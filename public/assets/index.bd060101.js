var Ie=Object.defineProperty;var q=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var ae=(t,e,i)=>e in t?Ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ce=(t,e)=>{for(var i in e||(e={}))le.call(e,i)&&ae(t,i,e[i]);if(q)for(var i of q(e))de.call(e,i)&&ae(t,i,e[i]);return t};var ue=(t,e)=>{var i={};for(var r in t)le.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&q)for(var r of q(t))e.indexOf(r)<0&&de.call(t,r)&&(i[r]=t[r]);return i};import{a as $,_ as g,o as a,c as d,F as T,r as C,n as S,b as m,d as h,e as D,w as b,f as o,g as v,h as f,v as M,i as I,s as Ce,j as pe,k as B,l as Ee,E as me,m as J,p as ge,t as y,q as L,U as we,u as Be,x as Me,D as be,y as K,z as Y,A as Se,C as xe,B as De,G as Ue,H as Le,I as Oe,J as Fe,K as Ne,L as Ge,M as Re,N as Pe,O as Ze,P as Je}from"./vendor.16ca0f1f.js";const Qe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};Qe();const Ye="/api/";var He=$.create({withCredentials:!0});const R={get(t,e){return X(t,"GET",e)},post(t,e){return X(t,"POST",e)},put(t,e){return X(t,"PUT",e)},delete(t,e){return X(t,"DELETE",e)}};async function X(t,e="GET",i=null){try{return console.log(t,e,i),(await He({url:`${Ye}${t}`,method:e,data:i,params:e==="GET"?i:null})).data}catch(r){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,i),console.dir(r),r.response&&r.response.status,r}}function Ve(t=8){var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<t;r++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function ee(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}const P={makeId:Ve,debounce:Xe,getRandomInt:ee,getRandomColor:ze,getRandomWord:$e,isDarkColor:qe,getLoremIpsum:je,loadFromStorage:We,saveToStorage:Ke,loadFromSessionStorage:et,saveToSessionStorage:tt};function je(t=5){const e=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"];let i="";for(;t>0;)i+=e[ee(0,e.length-1)]+" ",t--;return i.trim()}function $e(t=5){let e=["Animal","Africa","Moscow","Ukraine","Space","Motorcycle","Yamaha","Life","Business","Nature","Colorful","Productivity","Gaming"],i=[];for(var r=0;r<t;r++){let n=ee(0,e.length-1);i.push(e[n]),e.splice(n,1)}return i}function ze(){for(var t="#",e=0;e<6;e++)t+=Math.floor(Math.random()*10);return t}function qe(t){t=t.substring(1);const e=parseInt(t,16),i=e>>16&255,r=e>>8&255,n=e>>0&255;var s=.2126*i+.7152*r+.0722*n;return s<100}function Xe(t,e){let i;return function(...n){const s=()=>{clearTimeout(i),t(...n)};clearTimeout(i),i=setTimeout(s,e)}}function We(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}function Ke(t,e){localStorage[t]=JSON.stringify(e)}function et(t){var e=sessionStorage.getItem(t);return e?JSON.parse(e):null}function tt(t,e){sessionStorage[t]=JSON.stringify(e)}const F={getBoards:st,removeBoard:it,saveBoard:nt,getBoardById:ot,getEmptyBoard:lt,getEmptyGroup:rt,addActivity:at};function st(t){return R.get("board")}function ot(t){if(t)return R.get(`board/${t}`)}function it(t){return R.delete(`board/${t}`)}function nt(t){return t._id?R.put(`board/${t._id}`,t):R.post("board",t)}function rt(t="",e=[]){return{_id:P.makeId(),title:t,tasks:e}}function at(t,e,i,{_id:r,title:n}){return{_id:P.makeId(),byMember:e,txt:t,item:i,createdAt:Date.now(),boardId:r,boardTitle:n}}function lt(){return Promise.resolve({title:"",isFavorite:!1,createdBy:"",style:{bgColor:"#cacabb"},labels:[{color:"#f5dd29",title:"Day",_id:"l102"},{color:"#a7ffeb",title:"Remarket",_id:"l103"},{color:"#d7aefb",title:"Demand Marketing",_id:"enT4D7oh"},{color:"#33a9bb",title:"Partners",_id:"rtbnYyfi"},{color:"#16243d",title:"Government",_id:"5leaLS2n"},{color:"#f28b82",title:"Planning",_id:"NuwdhQ9L"}],members:[],groups:[{_id:P.makeId(),title:"New List",tasks:[]}],activities:[]})}const ke="Qe7xHRYFZ00Y7XpC8InL9Ffu0R6915MivLGckFh94wQ",H={getImages:dt,getRandomImages:ct};async function dt(t,e=12){const i=`https://api.unsplash.com/search/photos?query=${t}&per_page=${e}&client_id=${ke}`,r=await $.get(i);let{results:n}=r.data;return n=n.map(s=>({_id:s.id,full:s.urls.full,thumb:s.urls.thumb,sm:s.urls.small})),n}async function ct(t=12){const e=`https://api.unsplash.com/photos/random/?client_id=${ke}&count=${t}`;let r=(await $.get(e)).data;return r=r.map(n=>({_id:n.id,full:n.urls.full,thumb:n.urls.thumb,sm:n.urls.small})),r}const ut={name:"color-picker",props:{importedColors:Array,bgImg:String},data(){return{currColor:"",colors:[{color:"rgb(0, 121, 191)",title:""},{color:"rgb(210, 144, 52)",title:""},{color:"rgb(81, 152, 57)",title:""},{color:"rgb(176, 70, 50)",title:""},{color:"rgb(137, 96, 158)",title:""},{color:"rgb(205, 90, 145)",title:""},{color:"rgb(75, 191, 107)",title:""},{color:"rgb(0, 174, 204)",title:""},{color:"rgb(131, 140, 145)",title:""},{color:"#f5dd29",title:""}]}},methods:{updateColor(t){this.selectedColor=!0,this.currColor=t,this.$emit("updateColor",t,"bgColor")}}},mt={class:"color-picker"},ht=["title","onClick"],pt={key:0,class:"icon-complete"};function gt(t,e,i,r,n,s){return a(),d("section",mt,[(a(!0),d(T,null,C(n.colors,c=>(a(),d("div",{title:c.title,style:S({"background-color":c.color}),key:c.title,onClick:l=>s.updateColor(c.color)},[n.currColor===c.color&&!i.bgImg?(a(),d("span",pt)):m("",!0)],12,ht))),128))])}var W=g(ut,[["render",gt]]),bt="/assets/board-preview-skeleton.14cda5dc635d1f13bc48.76c3902e.svg";const kt={name:"create-board",data(){return{boardToAdd:null,randPics:null,bgImg:"",bgCurrColor:"#cacabb"}},async created(){this.boardToAdd=await F.getEmptyBoard(),this.randPics=await H.getImages("mountains",4)},methods:{async addBoard(){const t=this.boardToAdd;this.closeModal();const e=await this.$store.dispatch({type:"saveBoard",board:t});this.$router.push(`/board/${e._id}`)},closeModal(){this.$emit("closeCreateModal")},updateBgColor(t){this.bgCurrColor=t,this.boardToAdd.style.bgColor=t,this.bgImg="",this.boardToAdd.style.bgImg=""},updateBgImg(t,e){this.boardToAdd.style.bgImg=t,this.bgImg=e}},computed:{bgStyle(){var t;return{"background-color":this.boardToAdd.style.bgColor,"background-image":"url("+((t=this.boardToAdd.style)==null?void 0:t.bgImg)+")"}}},components:{colorPicker:W}},_t={key:0,class:"create-board-modal"},ft=o("p",null,"Create Board",-1),vt=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),yt=[vt],At=o("img",{src:bt,alt:"",role:"presentation"},null,-1),Tt=[At],It={class:"background-picker-container"},Ct=o("p",null,"Background",-1),Et={class:"cover-mini-photos"},wt=["onClick"],Bt=["src"],Mt={key:0,class:"icon-check"},St=I(" Board title "),xt=o("span",{class:"red-text"},"*",-1),Dt=["disabled"];function Ut(t,e,i,r,n,s){const c=h("color-picker"),l=D("click-outside");return n.boardToAdd?b((a(),d("section",_t,[o("header",null,[ft,o("span",{onClick:e[0]||(e[0]=(...u)=>s.closeModal&&s.closeModal(...u))},yt)]),o("div",{class:"create-board-preview",style:S(s.bgStyle)},Tt,4),o("div",It,[Ct,o("div",Et,[(a(!0),d(T,null,C(n.randPics,u=>(a(),d("div",{key:u._id,onClick:p=>s.updateBgImg(u.full,u._id)},[o("img",{src:u.thumb,class:v({"low-opacity ":n.bgImg===u._id})},null,10,Bt),n.bgImg===u._id?(a(),d("span",Mt)):m("",!0)],8,wt))),128))]),f(c,{bgImg:n.bgImg,onUpdateColor:s.updateBgColor},null,8,["bgImg","onUpdateColor"])]),o("div",null,[o("label",null,[St,xt,b(o("input",{type:"text",class:"board-title-inp","onUpdate:modelValue":e[1]||(e[1]=u=>n.boardToAdd.title=u)},null,512),[[M,n.boardToAdd.title]])])]),o("button",{disabled:!n.boardToAdd.title,class:"create-board-btn",onClick:e[2]||(e[2]=(...u)=>s.addBoard&&s.addBoard(...u))},"Create",8,Dt)])),[[l,s.closeModal]]):m("",!0)}var Lt=g(kt,[["render",Ut]]);const Ot={data(){return{search:"",isCreateBoard:!1,isInputFocused:!1,Search:Ce}},methods:{home(){this.$router.push("/board")},focusInput(){this.$refs.headerInput.focus(),this.isInputFocused=!0},async logout(){await this.$store.dispatch({type:"logout"}),this.$router.push("/login")}},computed:{user(){return this.$store.getters.user},isBoard(){return this.$store.getters.currBoard}},components:{createBoard:Lt,Avatar:pe}},Ft={class:"flex"},Nt=o("span",{class:"menu-btn"},null,-1),Gt=o("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"trello",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"trello-icon svg-inline--fa fa-trello fa-w-14 logo-img"},[o("path",{fill:"currentColor",d:"M392.3 32H56.1C25.1 32 0 57.1 0 88c-.1 0 0-4 0 336 0 30.9 25.1 56 56 56h336.2c30.8-.2 55.7-25.2 55.7-56V88c.1-30.8-24.8-55.8-55.6-56zM197 371.3c-.2 14.7-12.1 26.6-26.9 26.6H87.4c-14.8.1-26.9-11.8-27-26.6V117.1c0-14.8 12-26.9 26.9-26.9h82.9c14.8 0 26.9 12 26.9 26.9v254.2zm193.1-112c0 14.8-12 26.9-26.9 26.9h-81c-14.8 0-26.9-12-26.9-26.9V117.2c0-14.8 12-26.9 26.8-26.9h81.1c14.8 0 26.9 12 26.9 26.9v142.1z",class:""})],-1),Rt=o("span",{class:"logo"},"Drello",-1),Pt=[Gt,Rt],Zt={class:"create-board-container flex align-items"},Jt=o("p",null,"Create",-1),Qt=o("span",{class:"icon-plus"},null,-1),Yt=[Jt,Qt],Ht={class:"secondery-container flex align-items"},Vt=o("span",{class:"icon-search flex"},null,-1),jt=o("span",{class:"icon icon-info"},null,-1),$t=o("span",{class:"icon icon-bell"},null,-1);function zt(t,e,i,r,n,s){const c=h("createBoard"),l=h("avatar");return a(),d("header",{class:v(["main-header flex space-between",{"header-bg-color":s.isBoard}])},[o("div",Ft,[Nt,o("section",{class:"header-logo flex align-items",onClick:e[0]||(e[0]=(...u)=>s.home&&s.home(...u))},Pt),o("div",Zt,[o("button",{class:v(["create-btn",{"light-btn-bg":s.isBoard}]),onClick:e[1]||(e[1]=u=>n.isCreateBoard=!n.isCreateBoard)},Yt,2),n.isCreateBoard?(a(),B(c,{key:0,onCloseCreateModal:e[2]||(e[2]=u=>n.isCreateBoard=!1)})):m("",!0)])]),o("section",Ht,[o("div",{class:v(["main-header-input flex",{focused:n.isInputFocused}]),onClick:e[5]||(e[5]=(...u)=>s.focusInput&&s.focusInput(...u))},[Vt,b(o("input",{"onUpdate:modelValue":e[3]||(e[3]=u=>n.search=u),onBlur:e[4]||(e[4]=u=>{n.isInputFocused=!1}),ref:"headerInput",placeholder:"Search"},null,544),[[M,n.search]])],2),jt,$t,s.user?(a(),B(l,{key:0,size:"32",color:"white",name:s.user.fullname,class:"avatar-header"},null,8,["name"])):m("",!0)])],2)}var qt=g(Ot,[["render",zt]]);const Xt="",N=Wt();N.setup();function Wt(){var t=null;return{async setup(){t=Ee(Xt)},on(i,r){t.on(i,r)},off(i,r=null){!t||(r?t.off(i,r):t.removeAllListeners(i))},emit(i,r){t.emit(i,r)},terminate(){t=null}}}const te="auth",se="loggedinUser",O={login:ts,signup:ss,logout:os,getLoggedinUser:ns,getUsers:Kt,getUserById:es,getGuestUser:is};function Kt(){return R.get("user")}async function es(t){return await R.get(`user/${t}`)}async function ts(t){const e=await R.post(te+"/login",t);if(e)return _e(e)}async function ss(t){const e=await R.post(te+"/signup",t);return _e(e)}function os(){return sessionStorage.removeItem(se),R.post(te+"/logout")}function is(){return{fullname:"Guest",username:"guest",password:"guest"}}function _e(t){const r=t,{activities:e}=r,i=ue(r,["activities"]);return sessionStorage.setItem(se,JSON.stringify(i)),t}function ns(){return JSON.parse(sessionStorage.getItem(se)||"null")}const rs={name:"app",async created(){N.off("notify activity"),N.on("notify activity",this.notifyActivity),await this.$store.dispatch({type:"loadUsers"}),this.miniUser||await this.$store.dispatch({type:"login",cred:O.getGuestUser()}),await this.$store.dispatch({type:"loadBoards"})},methods:{notify(t=null,e,i){t?me({title:e,message:i,dangerouslyUseHTMLString:!0,type:"success"}):me({title:e,message:i,dangerouslyUseHTMLString:!0,type:"info"})},notifyActivity(t){var c,l,u;const e=t.byMember.fullname;t.to;const i=t.boardTitle,r=((c=t.item)==null?void 0:c.taskTitle)||((l=t.item)==null?void 0:l.taskGroup);let n,s;(u=t.toMember)!=null&&u._id?(n="You've been tagged",s=e+" just  tagged you at '"+r+"' at "+i+" board",O.getLoggedinUser()._id===t.toMember._id&&(this.notify(!0,n,s),console.log("hi",O.getLoggedinUser().fullname))):(n=t.txt,s=e+" just "+n+" to <a href=`http://localhost:3000/#/board/${activity.boardId}` ></a>"+i+" board",this.notify(null,n,s),console.log("hi everyone"))}},computed:{miniUser(){return this.$store.getters.miniUser},currBoardStyle(){var t,e;return(e=(t=this.$store.getters.currBoard)==null?void 0:t.style)==null?void 0:e.bgColor},currBoard(){var t;return(t=this.$store.getters.currBoard)==null?void 0:t.style},boardStlye(){var t,e;return{"background-color":(t=this.currBoard)==null?void 0:t.bgColor,"background-image":"url("+((e=this.currBoard)==null?void 0:e.bgImg)+")"}},isHomePage(){return this.$store.getters.isHomePage}},components:{appHeader:qt}};function as(t,e,i,r,n,s){const c=h("app-header"),l=h("router-view");return a(),d("div",{class:"wrapper",style:S(s.boardStlye)},[s.isHomePage?m("",!0):(a(),B(c,{key:0})),f(l)],4)}var ls=g(rs,[["render",as]]),ds="data:image/png;base64,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",cs="/assets/hero.f5b958c8.png",us="/assets/board.557c42ca.png",ms="data:image/png;base64,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",hs="/assets/view.2368c9e9.svg",ps="/assets/card-back.208a67eb.svg";const gs={name:"home-page",methods:{moveToBoards(){this.$router.push("/board")},setHomePage(t){this.$store.commit({type:"setHomePage",isHome:t})}},created(){this.setHomePage(!0)},unmounted(){this.setHomePage(!1)},computed:{isHomePage(){return this.$store.getters.isHomePage}},components:{}},bs={class:"home-container"},ks={class:"hero"},_s=o("div",{class:"logo"},[o("img",{src:ds,width:"25px",height:"25px",alt:""}),o("h1",null,"Drello")],-1),fs={class:"auth-btns"},vs={class:"btn login"},ys=I("Log in"),As={class:"btn signup"},Ts=I("Sign up"),Is={class:"info-container info-1 home-layout"},Cs=o("h1",null,"Smello helps teams move work forward.",-1),Es=o("p",null," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Trello. ",-1),ws=o("img",{class:"hero-img",src:cs,alt:""},null,-1),Bs=ge('<main class="home-layout"><section class="info-container info-2"><h2>It\u2019s more than work. It\u2019s a way of working together.</h2><p> Start with a Trello board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place. </p></section><section class="info-container info-3"><img src="'+us+'" class="board-img" alt="board"><p>Join over 1,000,000 teams worldwide that are using Trello to get more done.</p><img src="'+ms+'" class="trello-partners"></section><section class="info-container info-4"><h2>Features to help your team succeed</h2><p> Powering a productive team means using a powerful tool (and plenty of snacks). From meetings and projects to events and goal setting, Trello\u2019s intuitive features give any team the ability to quickly set up and customize workflows for just about anything. </p></section><section class="info-container info-5"><img src="'+hs+'" alt="view"><section><h5>CHOOSE A VIEW</h5><h2>The board is just the beginning</h2><p> Lists and cards are the building blocks of organizing work on a Trello board. Grow from there with task assignments, timelines, productivity metrics, calendars, and more. </p></section></section><section class="info-container info-6"><section><h5>DIVE INTO THE DETAILS</h5><h2>Cards contain everything you need</h2><p> Trello cards are your portal to more organized work\u2014where every single part of your task can be managed, tracked, and shared with teammates. Open any card to uncover an ecosystem of checklists, due dates, attachments, conversations, and more. </p></section><img src="'+ps+'" alt="card-back"></section></main>',1);function Ms(t,e,i,r,n,s){const c=h("router-link");return a(),d("section",bs,[o("section",ks,[o("header",null,[_s,o("div",fs,[o("div",vs,[f(c,{to:"/login"},{default:J(()=>[ys]),_:1})]),o("div",As,[f(c,{to:"/signup"},{default:J(()=>[Ts]),_:1})])])]),o("section",Is,[o("section",null,[Cs,Es,o("button",{class:"btn-primary",onClick:e[0]||(e[0]=(...l)=>s.moveToBoards&&s.moveToBoards(...l))},"Get Started")]),ws])]),Bs])}var Ss=g(gs,[["render",Ms]]);const xs={name:"workspace",data(){}},Ds={class:"workspace-filter-container"};function Us(t,e,i,r,n,s){return a(),d("section",Ds)}var Ls=g(xs,[["render",Us]]);const Os={name:"board-preview",emits:["toggleFavorite"],props:{board:Object},methods:{toggleFavorite(t){this.$emit("toggleFavorite",t)}},computed:{boardStyle(){return{"background-color":this.board.style.bgColor?this.board.style.bgColor:"","background-image":this.board.style.bgImg?`url(${this.board.style.bgImg})`:""}}}},Fs={key:0,class:"fa-regular fa-star"},Ns={key:1,class:"fa-solid fa-star"},Gs=o("div",{class:""},null,-1);function Rs(t,e,i,r,n,s){return i.board?(a(),d("li",{key:0,style:S(s.boardStyle)},[I(y(i.board.title)+" ",1),o("section",{class:"star",onClick:e[0]||(e[0]=L(c=>s.toggleFavorite(i.board._id),["stop"]))},[i.board.isFavorite?(a(),d("i",Ns)):(a(),d("i",Fs)),Gs])],4)):m("",!0)}var Ps=g(Os,[["render",Rs]]);const Zs={name:"board-list",emits:["toggleFavorite"],props:{boards:Array},data(){return{}},created(){},methods:{moveToBoard(t){this.$router.push(`/board/${t}`)},toggleFavorite(t){this.$emit("toggleFavorite",t)}},computed:{starredBoards(){return this.boards.filter(t=>t.isFavorite)},unStarredBoards(){return this.boards.filter(t=>!t.isFavorite)}},components:{boardPreview:Ps}},Js=o("h3",null,"Starred Boards",-1),Qs={class:"board-list"},Ys=o("h3",null,"Other Boards",-1),Hs={class:"board-list"};function Vs(t,e,i,r,n,s){const c=h("board-preview");return a(),d(T,null,[Js,o("ul",Qs,[(a(!0),d(T,null,C(s.starredBoards,l=>(a(),B(c,{onToggleFavorite:s.toggleFavorite,board:l,key:l._id,onClick:u=>s.moveToBoard(l._id)},null,8,["onToggleFavorite","board","onClick"]))),128))]),Ys,o("ul",Hs,[(a(!0),d(T,null,C(s.unStarredBoards,l=>(a(),B(c,{onToggleFavorite:s.toggleFavorite,board:l,key:l._id,onClick:u=>s.moveToBoard(l._id)},null,8,["onToggleFavorite","board","onClick"]))),128))])],64)}var js=g(Zs,[["render",Vs]]);const $s={name:"workspace",async created(){await this.$store.dispatch({type:"loadBoards"})},methods:{async toggleFavorite(t){const e=await F.getBoardById(t);e.isFavorite=!e.isFavorite,this.$store.dispatch({type:"saveBoard",board:e})}},computed:{boards(){return this.$store.getters.boards}},components:{workspaceFilter:Ls,boardList:js}},zs={class:"workspace-container main-layout"},qs=o("h2",null,"Workspace",-1);function Xs(t,e,i,r,n,s){const c=h("board-list");return a(),d("section",zs,[qs,f(c,{onToggleFavorite:s.toggleFavorite,boards:s.boards},null,8,["onToggleFavorite","boards"])])}var Ws=g($s,[["render",Xs]]);const Ks={components:{Datepicker:we},data(){return{date:Be(Date.now())}},methods:{saveDueDate(){const t={type:"dueDate",item:Date.parse(this.date)};this.$emit("addItem",t)}}},eo={class:"date-item"};function to(t,e,i,r,n,s){const c=h("Datepicker");return a(),d("section",eo,[f(c,{class:"date-picker",modelValue:n.date,"onUpdate:modelValue":e[0]||(e[0]=l=>n.date=l),inline:"",autoApply:""},null,8,["modelValue"]),o("button",{onClick:e[1]||(e[1]=(...l)=>s.saveDueDate&&s.saveDueDate(...l)),class:"save"},"save")])}var so=g(Ks,[["render",to]]);const oo={props:["board"],data(){return{filterBy:{title:""},isCreating:null,isEditing:null,title:"",color:"",currentLabelId:""}},computed:{getRelevantLabels(){let t=JSON.parse(JSON.stringify(this.boardLabels));const e=new RegExp(this.filterBy.title,"i");return t.filter(i=>e.test(i.title))},boardLabels(){return JSON.parse(JSON.stringify(this.board.labels))}},methods:{removeLabel(){var t=this.boardLabels.findIndex(i=>i._id===this.currentLabelId);this.boardLabels.splice(t,1);const e={type:"labels",item:{_id:this.currentLabelId,isDelete:!0}};this.$emit("updateLabels",this.boardLabels,e)},updateCurrData(t){this.isCreating=!0,this.isEditing=!0,this.currentLabelId=t._id,this.title=t.title,this.color=t.color},updateColor(t){this.color=t},setLabel(){if(!this.color)return;var t=this.currentLabelId||P.makeId();const e={type:"labels",item:{color:this.color,title:this.title,_id:t}};if(this.currentLabelId){var i=this.boardLabels.findIndex(n=>n._id===this.currentLabelId);this.boardLabels.splice(i,1,e.item)}else this.boardLabels.push(e.item);var r=this.boardLabels;this.$emit("updateLabels",r,e),this.currentLabelId=""},addLabel(t){const e={type:"labels",item:{_id:t}};this.$emit("addItem",e)}},components:{colorPicker:W}},io={key:0,class:"labels-item"},no=o("h3",null,"Labels",-1),ro=["onClick"],ao=["onClick"],lo={key:1},co=o("h3",null,"Name",-1),uo=o("h3",null,"Select a color",-1),mo={class:"labels-actions flex space-between"};function ho(t,e,i,r,n,s){const c=h("color-picker"),l=D("focus");return i.board&&!n.isCreating?(a(),d("div",io,[b(o("input",{type:"text",placeholder:"Search labels...",class:"label-item-input","onUpdate:modelValue":e[0]||(e[0]=u=>n.filterBy.title=u)},null,512),[[l],[M,n.filterBy.title]]),no,o("ul",null,[(a(!0),d(T,null,C(s.getRelevantLabels,u=>(a(),d("li",{class:"label",key:u._id},[o("div",{class:v(["hover",{"hover-marker":null}]),style:S({"background-color":u.color})},null,4),o("span",{onClick:p=>s.addLabel(u._id),style:S({"background-color":u.color}),class:"label-txt"},y(u.title),13,ro),o("span",{onClick:L(p=>(s.updateCurrData(u),(n.isCreating=!0)(n.isEditing=!0)),["stop"]),class:"edit-labels"},null,8,ao)]))),128))]),o("button",{onClick:e[1]||(e[1]=u=>(s.setLabel(),n.isCreating=!0)),class:"create-label-btn"},"Create a new label")])):(a(),d("section",lo,[co,b(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>n.title=u),class:"label-item-input"},null,512),[[M,n.title],[l]]),uo,f(c,{onUpdateColor:s.updateColor},null,8,["onUpdateColor"]),o("div",mo,[o("button",{class:"save create flex",onClick:e[3]||(e[3]=u=>s.setLabel())},"Save"),n.isEditing?(a(),d("button",{key:0,class:"delete-label flex",onClick:e[4]||(e[4]=(...u)=>s.removeLabel&&s.removeLabel(...u))},"Delete")):m("",!0)])]))}var po=g(oo,[["render",ho]]);const go={props:{board:Object,task:Object},data(){return{filterBy:{name:""}}},methods:{addMember({fullname:t,username:e,imgUrl:i,_id:r}){const n={type:"members",item:{fullname:t,username:e,imgUrl:i,_id:r}};this.$emit("addItem",n)}},computed:{getRelevantUsers(){let t=JSON.parse(JSON.stringify(this.boardMembers));const e=new RegExp(this.filterBy.name,"i");return t.filter(i=>e.test(i.fullname))},boardMembers(){return this.board.members},currTask(){return this.task},currTaskMembersIds(){var e;let t=(e=this.currTask)==null?void 0:e.members;return t?t.map(i=>i._id):[]}}},bo={key:0,class:"members-item"},ko=o("h3",null,"Board members",-1),_o=["onClick"],fo={class:"member-container flex align-items justify-center"},vo={class:"avatar"},yo={class:"name"},Ao={class:"username"},To={key:0,class:"icon-complete"};function Io(t,e,i,r,n,s){const c=h("avatar");return i.board?(a(),d("section",bo,[b(o("input",{type:"text",placeholder:"Search members",onInput:e[0]||(e[0]=(...l)=>t.findMembers&&t.findMembers(...l)),"onUpdate:modelValue":e[1]||(e[1]=l=>n.filterBy.name=l)},null,544),[[M,n.filterBy.name]]),ko,o("ul",null,[(a(!0),d(T,null,C(s.getRelevantUsers,l=>(a(),d("li",{key:l._id,class:"member flex align-items space-between",onClick:L(u=>s.addMember(l),["stop"])},[o("div",fo,[o("div",vo,[f(c,{size:32,color:"white",name:l.fullname},null,8,["name"])]),o("span",yo,y(l.fullname),1)]),o("span",Ao,"("+y(l.username)+")",1),s.currTaskMembersIds.includes(l._id)?(a(),d("span",To)):m("",!0)],8,_o))),128))])])):m("",!0)}var Co=g(go,[["render",Io]]);const Eo={name:"checklist-popup",data(){return{checklistTitle:""}},methods:{addCheckList(){this.checklistTitle||(this.checklistTitle="Checklist");const t={_id:P.makeId(),title:this.checklistTitle,todos:[]};this.$emit("addItem",{type:"checklist",item:t})}}},wo={class:"checklist-popup flex column"},Bo=o("label",{for:"checklist-input"},"Title",-1);function Mo(t,e,i,r,n,s){const c=D("focus");return a(),d("section",wo,[Bo,b(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>n.checklistTitle=l),id:"checklist-input",placeholder:"Checklist"},null,512),[[c],[M,n.checklistTitle]]),o("button",{class:"save",onClick:e[1]||(e[1]=(...l)=>s.addCheckList&&s.addCheckList(...l))},"Add")])}var So=g(Eo,[["render",Mo]]);const oe=async t=>{const e="ssrtedsh",r="https://api.cloudinary.com/v1_1/dkqvblbeq/image/upload",n=new FormData;n.append("file",t),n.append("upload_preset",e);try{return(await $.post(r,n)).data}catch(s){console.error("ERROR!",s)}};var fe="/assets/loader.1cadbea4.svg";const xo={name:"attachment-item",data(){return{isLoading:!1,isDragOver:!1,attachment:{createdAt:null,fileName:null,url:null,type:"image",id:P.makeId()},imgUrl:""}},methods:{handleFile(t){let e;t.type==="change"?e=t.target.files[0]:t.type==="drop"&&(e=t.dataTransfer.files[0]),this.onUploadImg(e)},async onUploadImg(t){this.isLoading=!0;const e=t.name,i=await oe(t);this.setAttachment(i.url,e);const r={type:"attachment",item:JSON.parse(JSON.stringify(this.attachment))};this.$emit("addItem",r),this.isLoading=!1,this.$emit("closePopup")},async AddAttachment(){const t=this.imgUrl.substring(this.imgUrl.lastIndexOf("/")+1);this.setAttachment(this.imgUrl,t);const e={type:"attachment",item:JSON.parse(JSON.stringify(this.attachment))};this.$emit("addItem",e),this.$emit("closePopup")},setAttachment(t,e){this.attachment.createdAt=Date.now(),this.attachment.url=t,this.attachment.fileName=e}}},Do={class:"attachment-item"},Uo=o("h3",null,"Choose an image or drag it here",-1),Lo=[Uo],Oo={key:1,src:fe,alt:""},Fo=o("label",{class:"attach-link",for:"attach-link"},"Attach a link",-1);function No(t,e,i,r,n,s){const c=D("focus");return a(),d("div",Do,[n.isLoading?(a(),d("img",Oo)):(a(),d("label",{key:0,for:"imgUploader",onDrop:e[0]||(e[0]=L((...l)=>s.handleFile&&s.handleFile(...l),["prevent"])),onDragover:e[1]||(e[1]=L(()=>{},["prevent"])),class:"drag-container"},Lo,32)),o("input",{hidden:"",type:"file",name:"img-uploader",id:"imgUploader",onChange:e[2]||(e[2]=(...l)=>s.handleFile&&s.handleFile(...l))},null,32),Fo,b(o("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>n.imgUrl=l),type:"text",name:"",id:"attach-link"},null,512),[[M,n.imgUrl],[c]]),o("button",{onClick:e[4]||(e[4]=(...l)=>s.AddAttachment&&s.AddAttachment(...l))},"Attach")])}var Go=g(xo,[["render",No]]);const Ro={name:"search-photo-item",props:["coverToEdit"],data(){return{keyword:"",suggSearches:P.getRandomWord(9),randPics:null}},async created(){this.randPics=await H.getRandomImages(12)},methods:{async setPics(){this.randPics=await H.getImages(this.keyword,12)},setImgUrl(t){this.$emit("setImgUrl",t)}}},Po={class:"search-photo-container"},Zo=o("h4",null,"Suggested searches",-1),Jo={class:"suggested-searches"},Qo=["onClick"],Yo=o("h4",null,"Top photos",-1),Ho={class:"cover-mini-photos"},Vo=["onClick"],jo=["src"];function $o(t,e,i,r,n,s){const c=D("focus");return a(),d("section",Po,[b(o("input",{class:"inline-input",type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>n.keyword=l),placeholder:"Search for unsplash photos",onChange:e[1]||(e[1]=(...l)=>s.setPics&&s.setPics(...l))},null,544),[[c],[M,n.keyword]]),Zo,o("div",Jo,[(a(!0),d(T,null,C(n.suggSearches,l=>(a(),d("button",{key:l,onClick:u=>(n.keyword=l,s.setPics())},y(l),9,Qo))),128))]),Yo,o("div",Ho,[(a(!0),d(T,null,C(n.randPics,l=>(a(),d("div",{key:l._id,onClick:u=>s.setImgUrl(l.sm),class:v({"selected-type":l.sm===i.coverToEdit.imgUrl})},[o("img",{src:l.thumb,alt:""},null,8,jo)],10,Vo))),128))])])}var zo=g(Ro,[["render",$o]]),qo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAApwAAAE1CAMAAAB9bsAsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+VpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmVkYTJiM2ZhYywgMjAyMS8xMS8xNy0xNzoyMzoxOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjMuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAzLTI1VDIyOjAzOjU2KzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMy0yNVQyMjowOSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMy0yNVQyMjowOSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDcwRUY5NTRBQzZGMTFFQ0I5MTlDRTcwNkFFRTJGODAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDcwRUY5NTVBQzZGMTFFQ0I5MTlDRTcwNkFFRTJGODAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNzBFRjk1MkFDNkYxMUVDQjkxOUNFNzA2QUVFMkY4MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNzBFRjk1M0FDNkYxMUVDQjkxOUNFNzA2QUVFMkY4MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvpfOHAAAABCUExURf///2t3jHyHmsfM1KqwvJqisW14jaivvHJ9ksbK0+jq7Y+YqLS6xH2Imvr6+6Gptt3g5JafrZyksu7v8oSOn/////HWvoAAAAAWdFJOU////////////////////////////wAB0sDkAAAEC0lEQVR42uzdXXKbMBhAUf8Dxo5jx93/VtvXTpPGAn2SAucsgMzIdxAQITa/oFEbQ4A4QZyIE8SJOEGcIE7ECeJEnCBOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeJEnCBOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeIEcSJOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeIEcSJOECfiBHGCOBEniBNxgjgRpyFAnCBOxAniRJwgThAn4gRxIk4QJ4gTcYI4ESeIE8SJOEGciBPECeJEnCBOxAniBHEiThAn4gRxIk4QJ4gTcYI4ESeIE8SJOEGciBPECeJEnCBOxAniBHEiThAnS40TAAAAAAAAAAAAAAAAAAAAAAAAgJXZH3enLWRz2h33edLcGUzy22XI82AYiXHQJkutc28EiTNvZne9SeR1pxMnizx1Hg0fkY5mdZY4r3v2TqiTOFlinKZ1mp3W3RDR7A2RR0mE2nsIzwJndadO2j1xWvhBIMuSWGybFhsTdL2ZaS281zTIKttrGgAAAAAAAAAAAAAAAMDSecHNi2atpunVYK/oNsqmCjY30CbqTJzT/XJr8DNndteb67judOLEqTMj226vxNGsjnk9H8/eV+IkTsRpWmcF07obIjdEHiXhUZJ5naXM6k6dTpwWflCVZUlo02Jj0q43f/haeK9pLJTvAQEAAAAAAAArdB668dpvt/117Iaz8aCZMi/Pv/+r/7zokxa8Pz5bdfJ4NzJU9nH7alHU7cPoUNPQf71krx+MD/V0/19R2hkhKnm7f7fe+f5mlKjS5vj9avxRndRwf+VdkbtxornrTded1LtPf/U9O/fsFPbRvxpn73knZd1ef0X5ZrQo6T3lBXr/yaSkR0qcD+NFOee0vUesUaKcS1qcFyNGMc+0OJ9GjEZndfM65QypcU59ED93C8SvN9qLOzJ1dak/5bT/YebZPPazLUrjjkxtY+rPOE75K9m23T6UOzLVXVN/xGvNNv9pKO7I1Nen/ob9hDk97IMicUemAem/YfrfyPqxgl2ZI7OOODN/I2tf4sisZFrP/GHWY4kjs5IbosyfINqVODIreZSU+fNDpxJHpgUFHsLn/ihTiSPTggL/vhQn0xRY+CFOJopfMidOJopfbCxOyszrZ3FSTvgLbuJkqvBXg8XJZNGbKoiTyaK3oxEn0wVv5OXfl8wQuwWihR/MEbp5rCVzzBG67bbFxsyrM/KDBV7TIPS6c86W215wY+49e9xHsrwazNznnXGfF7SpAnPFfZjVdjTMFvdJaxt5kaHPoRuvf64/++vYDTY8BAAAAAAAAAAAAAAAADab3wIMAPg/Oue/wQWyAAAAAElFTkSuQmCC",Xo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUYAAACcCAYAAAADBQINAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABW1pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmVkYTJiM2ZhYywgMjAyMS8xMS8xNy0xNzoyMzoxOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjMuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAzLTI1VDIzOjAwOjQyKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMy0yNVQyMzo1MjowOSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMy0yNVQyMzo1MjowOSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzA1NTc3M0RBQzdEMTFFQ0I3NTc5NzU3MDFGMEY3N0UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzA1NTc3M0VBQzdEMTFFQ0I3NTc5NzU3MDFGMEY3N0UiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MGY0YTM1OC1mMGZhLTYzNGItYThhMy04ODdkY2NkY2NiODYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQwZjRhMzU4LWYwZmEtNjM0Yi1hOGEzLTg4N2RjY2RjY2I4NiIgc3RFdnQ6d2hlbj0iMjAyMi0wMy0yNVQyMzowMDo0MiswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MGY0YTM1OC1mMGZhLTYzNGItYThhMy04ODdkY2NkY2NiODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDBmNGEzNTgtZjBmYS02MzRiLWE4YTMtODg3ZGNjZGNjYjg2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+YVoGqwAAApVJREFUeNrs3b8uQ2Ecx+EeKW7ALUhsJjs3YDMx2EkMXUwGMXQRS+/AZLBYRcINmCV2F+Hf8W3SRtLEoudtT3ie5Be1HM37pp+8StuqrusOAN8WLAGAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAAgjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIIIwDCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgiAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCKMlABBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQRgCEEeBn3WkvcHh8Pr65l7m0pEBBr5n1zNPwm0G/174TY6K4NLp5kLmwZ0Bhi5mbzNZEg1p1YvzM7A/vX2bFngGFVZnVzMmwXzkx3rbuxJg79Z4vR5k1+wXM0GZmp9TF/fEFQBgBhBFg5mE8y9xbSmCGHjJXbQ7jdWY382ivgMLqzHPmNHNX6od0G7rOS2Yj82HfgILeMtud0T94l1LVdW2pARr+VRpAGAGEEUAYAYQRAGEEEEYAYQQQRgBhBGhekx+G5bWFMCeDfq+yCi05MSaKy6II85fHYj3xmGQKU7+JxHhDACdHJ0YAYQQQRgBh/CXPaUALeH6xfSdGGwKi+Gf4aAOAQidGAGEEEEYAYQQQRgCEEUAYAYQRQBgBhBFAGAGEEUAYAYQRQBgBhBFAGAGEEUAYAYQR4D/4EmAA1eI9768s56cAAAAASUVORK5CYII=";const Wo={name:"cover-item",data(){return{isLoading:!1,coverToEdit:{color:null,imgUrl:null,type:null},randPics:null,photoSearch:!1}},async created(){var t,e,i,r,n,s,c,l,u,p,w;this.randPics=await H.getRandomImages(6),this.coverToEdit.color=(e=(t=this.currTask)==null?void 0:t.cover)!=null&&e.color?(i=this.currTask)==null?void 0:i.cover.color:"#cfd3da",this.coverToEdit.imgUrl=(n=(r=this.currTask)==null?void 0:r.cover)!=null&&n.imgUrl?(c=(s=this.currTask)==null?void 0:s.cover)==null?void 0:c.imgUrl:"",this.coverToEdit.type=(u=(l=this.currTask)==null?void 0:l.cover)!=null&&u.type?(w=(p=this.currTask)==null?void 0:p.cover)==null?void 0:w.type:"header"},methods:{async onUploadImg(t){this.isLoading=!0;const e=t.target.files[0],i=await oe(e);this.coverToEdit.imgUrl=i.url,this.isLoading=!1,this.updateCover()},setCoverType(t){this.coverToEdit.type=t,this.updateCover()},updateColor(t){this.coverToEdit.color=t,this.updateCover()},updateCover(){this.$emit("updateCover",this.coverToEdit)},setImgUrl(t){this.coverToEdit.imgUrl=t,this.updateCover()}},computed:{currColor(){},currTask(){return this.$store.getters.currTask},coverPreviewStyle(){return{"background-color":this.coverToEdit.color,"background-image":"url("+this.coverToEdit.imgUrl+")"}}},components:{colorPicker:W,searchPhoto:zo}},Ko={key:1,class:"cover-item"},ei={class:"cover-preview"},ti=o("h4",null,"Size",-1),si={class:"demo-images"},oi=o("img",{src:qo,alt:""},null,-1),ii=[oi],ni=o("img",{src:Xo,alt:""},null,-1),ri=[ni],ai=o("button",null,"Remove Cover",-1),li={class:"color-picker-container"},di=o("h4",null,"Colors",-1),ci={class:"cover-attachments"},ui=o("h4",null,"Attachments",-1),mi={key:0,class:"upload-img"},hi=I(" Upload a cover image "),pi={key:1,class:"loader-svg"},gi=o("img",{src:fe,alt:""},null,-1),bi=[gi],ki=o("h4",null,"Photos from Unsplash",-1),_i={class:"cover-mini-photos"},fi=["onClick"],vi=["src"];function yi(t,e,i,r,n,s){const c=h("color-picker"),l=h("search-photo");return a(),d(T,null,[n.photoSearch?(a(),d("span",{key:0,class:"icon-back cover-popup",onClick:e[0]||(e[0]=u=>n.photoSearch=!1)})):m("",!0),n.photoSearch?(a(),B(l,{key:2,coverToEdit:n.coverToEdit,onSetImgUrl:s.setImgUrl},null,8,["coverToEdit","onSetImgUrl"])):(a(),d("section",Ko,[o("div",ei,[ti,o("div",si,[o("div",{class:v(["demo-img",{"selected-type":n.coverToEdit.type==="header"}]),style:S(s.coverPreviewStyle),onClick:e[1]||(e[1]=u=>s.setCoverType("header"))},ii,6),o("div",{class:v(["demo-img",{"selected-type":n.coverToEdit.type==="inline"}]),style:S(s.coverPreviewStyle),onClick:e[2]||(e[2]=u=>s.setCoverType("inline"))},ri,6)]),ai]),o("div",li,[di,f(c,{onUpdateColor:s.updateColor},null,8,["onUpdateColor"])]),o("div",ci,[ui,n.isLoading?m("",!0):(a(),d("label",mi,[hi,o("input",{type:"file",onChange:e[3]||(e[3]=(...u)=>s.onUploadImg&&s.onUploadImg(...u)),hidden:""},null,32)])),n.isLoading?(a(),d("div",pi,bi)):m("",!0)]),ki,o("div",_i,[(a(!0),d(T,null,C(n.randPics,u=>(a(),d("div",{key:u._id,onClick:p=>s.setImgUrl(u.sm),class:v({"selected-type":u.sm===n.coverToEdit.imgUrl})},[o("img",{src:u.thumb,alt:""},null,8,vi)],10,fi))),128)),o("button",{onClick:e[4]||(e[4]=u=>n.photoSearch=!0)},"Search for photos")])]))],64)}var Ai=g(Wo,[["render",yi]]);const Ti={data(){return{autocomplete:"",center:{lat:32.109333,lng:34.855499}}},mounted(){this.autocomplete=new google.maps.places.Autocomplete(this.$refs.autocomplete,{types:["establishment"],componentRestrictions:{country:["IL"]},fields:["place._id","geometry","name"]}),this.autocomplete.addListener("place_changed",this.onPlaceChanged)},methods:{onPlaceChanged(){this.onSearch()},onPanTo(t=35.6895,e=139.6917){const i={type:"location",item:{lat:t,lng:e}};this.$emit("addItem",i)},geocode(t){$.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,key:"AIzaSyCv9mke4qM6dFwfae-VsXNlKlW2Mnk4kBk"}}).then(e=>e.data.results[0].geometry.location).then(e=>this.onPanTo(e.lat,e.lng))},onSearch(){this.geocode(this.$refs.autocomplete.value)}},components:{}},Ii={type:"text",placeholder:"Yes..",ref:"autocomplete"};function Ci(t,e,i,r,n,s){return a(),d("div",null,[o("input",Ii,null,512)])}var Ei=g(Ti,[["render",Ci]]);const wi={name:"pop-up-main",props:{popupData:Object,action:String,task:Object,actionType:""},mounted(){this.$emit("popupHeight",this.$refs.popup.clientHeight)},methods:{updateCover(t){this.$emit("updateCover",t)},updateLabels(t,e){this.$emit("updateLabels",t,e)},closePopup(){this.$emit("closePopup")},addItem(t){this.$emit("addItem",t)},removeItem(){}},computed:{currBoard(){return this.$store.getters.currBoard}},components:{labelsItem:po,checklistItem:So,attachmentItem:Go,coverItem:Ai,dateItem:so,membersItem:Co,locationItem:Ei}},Bi=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),Mi=[Bi];function Si(t,e,i,r,n,s){const c=D("click-outside");return b((a(),d("div",{ref:"popup",class:"pop-up-main",style:S(i.popupData.style)},[o("header",null,[o("p",null,y(i.popupData.name),1),o("span",{onClick:e[0]||(e[0]=l=>t.$emit("closePopup"))},Mi)]),o("main",null,[(a(),B(Me(i.action),{onAddItem:s.addItem,board:s.currBoard,onUpdateLabels:s.updateLabels,onClosePopup:s.closePopup,onUpdateCover:s.updateCover,task:i.task},null,8,["onAddItem","board","onUpdateLabels","onClosePopup","onUpdateCover","task"]))])],4)),[[c,s.closePopup]])}var ve=g(wi,[["render",Si]]);const xi={name:"quick-edit",props:{task:Object},data(){return{actionType:"",popupData:null,taskToEdit:null,popupHeight:null}},created(){this.taskToEdit=JSON.parse(JSON.stringify(this.task))},mounted(){this.$refs.editLabels.getBoundingClientRect()},methods:{openTask(){this.$emit("openTask")},setPopupHeight(t){this.popupHeight=t},setCmp(t,e){this.actionType=t,this.popupData=e},updateLabels(t,e){},updateCover(t){this.taskToEdit.cover=t,this.$emit("addItem","_",this.taskToEdit)},addItem(t){if(t.type==="labels")if(this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]),this.taskToEdit.labelIds.includes(t.item._id)){const e=this.taskToEdit.labelIds.findIndex(i=>i===t.item._id);this.taskToEdit.labelIds.splice(e,1)}else this.taskToEdit.labelIds.push(t.item._id);if(t.type==="members")if(this.taskToEdit.members||(this.taskToEdit.members=[]),this.taskToEdit.members.some(e=>e._id===t.item._id)){const e=this.taskToEdit.members.findIndex(i=>i._id===t.item._id);this.taskToEdit.members.splice(e,1)}else this.taskToEdit.members.push(t.item);t.type==="dueDate"&&(this.taskToEdit.dueDate||(this.taskToEdit.dueDate=[]),this.taskToEdit.dueDate=t.item),this.$emit("addItem","_",this.taskToEdit)},async updateLabels(t,e){try{await this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t}),this.addItem(e)}catch{}}},computed:{labelsStyle(){let t=this.$refs.editLabels.getBoundingClientRect().bottom;const e=this.$refs.editLabels.getBoundingClientRect().x;return window.innerHeight-t-this.popupHeight<0&&(t=this.popupHeight+(window.innerHeight-t-this.popupHeight)),{top:t+"px",left:e+"px",position:"fixed"}},membersStyle(){const t=this.$refs.editMembers.getBoundingClientRect().bottom,e=this.$refs.editMembers.getBoundingClientRect().x;return{top:t+"px",left:e+"px",position:"fixed"}}},components:{popupMain:ve}},Di={class:"quick-edit"},Ui=o("span",{class:"icon-board"},null,-1),Li=I("Open card "),Oi=[Ui,Li],Fi=o("span",{class:"icon-label"},null,-1),Ni=I("Edit Labels "),Gi=[Fi,Ni],Ri=o("span",{class:"icon-members"},null,-1),Pi=I("Change members "),Zi=[Ri,Pi],Ji=o("span",{class:"icon-cover"},null,-1),Qi=I("Change cover "),Yi=[Ji,Qi],Hi=o("span",{class:"icon-time"},null,-1),Vi=I("Edit Dates "),ji=[Hi,Vi],$i=o("span",{class:"icon-cancel"},null,-1),zi=I(" Remove "),qi=[$i,zi];function Xi(t,e,i,r,n,s){const c=h("popup-main");return a(),d("section",Di,[o("div",{class:"btn",onClick:e[0]||(e[0]=(...l)=>s.openTask&&s.openTask(...l))},Oi),o("div",{ref:"editLabels",class:"btn",onClick:e[1]||(e[1]=l=>s.setCmp("labelsItem",{name:"Labels",style:s.labelsStyle}))},Gi,512),o("div",{ref:"editMembers",class:"btn",onClick:e[2]||(e[2]=l=>s.setCmp("membersItem",{name:"Members",style:s.labelsStyle}))},Zi,512),o("div",{class:"btn",onClick:e[3]||(e[3]=l=>s.setCmp("coverItem",{name:"Members",style:s.labelsStyle}))},Yi),o("div",{class:"btn",onClick:e[4]||(e[4]=l=>s.setCmp("dateItem",{name:"Dates",style:s.labelsStyle}))},ji),o("div",{class:"btn",onClick:e[5]||(e[5]=L(l=>t.$emit("removeTask"),["stop"]))},qi),n.actionType?(a(),B(c,{key:0,ref:"popup",task:i.task,popupData:n.popupData,action:n.actionType,onAddItem:s.addItem,onUpdateLabels:s.updateLabels,onClosePopup:e[6]||(e[6]=l=>n.actionType=""),onUpdateCover:s.updateCover,onPopupHeight:s.setPopupHeight},null,8,["task","popupData","action","onAddItem","onUpdateLabels","onUpdateCover","onPopupHeight"])):m("",!0)])}var Wi=g(xi,[["render",Xi]]);const Ki={name:"task-preview",props:{task:{type:Object,required:!0},labelStatus:Boolean},data(){return{editIcon:!1,isQuickEdit:!1,taskCopy:null}},mounted(){},created(){this.taskCopy=JSON.parse(JSON.stringify(this.task))},components:{Draggable:be,quickEdit:Wi},methods:{toggleLabel(){this.$store.commit({type:"toggleLabel"})},removeTask(){this.$emit("removeTask",this.task._id),this.$emit("onQuickEdit",!1)},toggleLabels(){this.$emit("toggleLabels")},quickEdit(){this.$emit("onQuickEdit",!0),this.isQuickEdit=!0},closeQuickEdit(){this.$emit("onQuickEdit",!1),this.isQuickEdit=!1},updateTask(t,e=this.taskCopy){this.$emit("updateTask",JSON.parse(JSON.stringify(e)))},openTask(){this.closeQuickEdit(),this.$emit("openTask")}},computed:{board(){return this.$store.getters.currBoard},labels(){var t;return(t=this.task.labelIds)!=null&&t.length?this.task.labelIds.map(e=>this.board.labels.find(i=>i._id===e)):!1},date(){return K(this.task.dueDate).format("lll").split(",")[0]},tasksDone(){return this.task.checklists.reduce((e,{todos:i})=>e+i.reduce((r,n)=>n.isDone?r+1:r,0),0)},numOfTodos(){return this.task.checklists.reduce((t,{todos:e})=>t+e.length,0)},coverStyle(){var t,e;if(((t=this.task.cover)==null?void 0:t.color)&&!this.task.cover.imgUrl)return{"background-color":this.task.cover.color};if((e=this.task.cover)!=null&&e.imgUrl)return{"background-image":"url("+this.task.cover.imgUrl+")",height:"260px"}},taskStyle(){var t;if(((t=this.task.cover)==null?void 0:t.type)==="inline")return{"background-color":this.task.cover.color,"font-weight":500,"font-size":"16px","padding-top":"30px","background-image":"url("+this.task.cover.imgUrl+")","min-height":this.task.cover.imgUrl?"250px":"",color:"#fff","padding-top":this.task.cover.imgUrl?"215px":"30px"}},numOfComments(){var t;return(t=this.task.activities)!=null&&t.length?this.task.activities.reduce((e,i)=>i.isComment?e+1:e,0):0},quickEditPos(){const t=this.$refs.tasky.getBoundingClientRect().y,e=this.$refs.tasky.getBoundingClientRect().right;return{top:t+"px",left:e+"px"}}}},en={class:"task-preview-container"},tn={key:1,class:"dark-wrap"},sn={key:3,class:"preview-icon labels"},on={class:"icons"},nn={key:0},rn={key:0,class:"clock-icon"},an={key:1,class:"preview-icon"},ln=o("span",{class:"icon-description"},null,-1),dn=[ln],cn={key:2,class:"preview-icon"},un=o("span",{class:"icon-chat"},null,-1),mn={key:3,class:"preview-icon"},hn=o("span",{class:"icon-location"},null,-1),pn=[hn],gn={key:4,class:"preview-icon"},bn=o("span",{class:"icon-attachment"},null,-1),kn=o("span",{class:"icon-checklist"},null,-1),_n={key:1,class:"preview-icon members"};function fn(t,e,i,r,n,s){const c=h("avatar"),l=h("quick-edit"),u=h("Draggable");return i.task?(a(),B(u,{key:0},{default:J(()=>{var p,w,k,A,E,Q,x,G,z,V,j,_,ie,ne,re;return[o("div",en,[o("section",{class:v(["task-preview",{"on-quick-edit":n.isQuickEdit}]),style:S(s.taskStyle),onMouseover:e[4]||(e[4]=U=>n.editIcon=!0),onMouseleave:e[5]||(e[5]=U=>n.editIcon=!1),ref:"tasky"},[n.editIcon?(a(),d("span",{key:0,class:"icon-edit",onClick:e[0]||(e[0]=L((...U)=>s.quickEdit&&s.quickEdit(...U),["stop"]))})):m("",!0),((p=this.task.cover)==null?void 0:p.imgUrl)&&this.task.cover.type==="inline"?(a(),d("div",tn)):m("",!0),((w=i.task.cover)==null?void 0:w.type)==="header"?(a(),d("div",{key:2,class:"task-preview-cover",style:S(s.coverStyle)},null,4)):m("",!0),s.labels&&((k=this.task.cover)==null?void 0:k.type)!=="inline"?(a(),d("div",sn,[(a(!0),d(T,null,C(s.labels,(U,Ae)=>(a(),d("div",{key:Ae,onClick:e[1]||(e[1]=L((...Te)=>s.toggleLabels&&s.toggleLabels(...Te),["stop"])),class:v(["label",{openLabel:i.labelStatus}]),style:S({"background-color":U.color})},y(U.title),7))),128))])):m("",!0),n.isQuickEdit?m("",!0):(a(),d("p",{key:4,class:v(["title",{"pos-absolute":((A=this.task.cover)==null?void 0:A.type)==="inline"&&((E=this.task.cover)==null?void 0:E.imgUrl)}])},y(i.task.title),3)),n.isQuickEdit?b((a(),d("textarea",{key:5,"onUpdate:modelValue":e[2]||(e[2]=U=>n.taskCopy.title=U),onInput:e[3]||(e[3]=(...U)=>s.updateTask&&s.updateTask(...U)),name:"",id:"",cols:"30",rows:"10"},null,544)),[[M,n.taskCopy.title]]):m("",!0),o("div",on,[((Q=this.task.cover)==null?void 0:Q.type)!=="inline"?(a(),d("div",{key:0,class:v(["icon-container flex",{"p-b-10":((x=i.task.status)==null?void 0:x.length)||((G=i.task.attachments)==null?void 0:G.length)||((z=i.task.checklists)==null?void 0:z.length)&&s.numOfTodos||((V=i.task.members)==null?void 0:V.length)}])},[i.task.dueDate?(a(),d("div",nn,[o("span",{class:v(["preview-icon date",{completed:i.task.status==="completed",overdue:i.task.status==="overdue"}]),style:{"font-size":12+"px"}},[(j=i.task.status)!=null&&j.length?(a(),d("span",rn)):m("",!0),I(" "+y(s.date),1)],2)])):m("",!0),i.task.description?(a(),d("div",an,dn)):m("",!0),s.numOfComments?(a(),d("div",cn,[un,o("p",null,y(s.numOfComments),1)])):m("",!0),i.task.location?(a(),d("div",mn,pn)):m("",!0),(_=i.task.attachments)!=null&&_.length?(a(),d("div",gn,[bn,o("p",null,y((ie=i.task.attachments)==null?void 0:ie.length),1)])):m("",!0),((ne=i.task.checklists)==null?void 0:ne.length)&&s.numOfTodos?(a(),d("div",{key:5,class:v(["preview-icon",{completed:s.tasksDone===s.numOfTodos}])},[kn,o("p",null,y(s.tasksDone)+" / "+y(s.numOfTodos),1)],2)):m("",!0)],2)):m("",!0),(re=i.task.members)!=null&&re.length?(a(),d("div",_n,[(a(!0),d(T,null,C(i.task.members,U=>(a(),d("div",{key:U._id,class:"member"},[f(c,{size:28,color:"white",name:U.fullname},null,8,["name"])]))),128))])):m("",!0)])],38),n.isQuickEdit?(a(),B(l,{key:0,onRemoveTask:s.removeTask,onAddItem:s.updateTask,task:i.task,onOpenTask:s.openTask,style:S(s.quickEditPos),class:v({"on-quick-edit":n.isQuickEdit})},null,8,["onRemoveTask","onAddItem","task","onOpenTask","style","class"])):m("",!0)]),o("div",{class:v(["overlay",{"open-overlay":n.isQuickEdit}]),onClick:e[6]||(e[6]=L((...U)=>s.closeQuickEdit&&s.closeQuickEdit(...U),["stop"]))},null,2)]}),_:1})):m("",!0)}var vn=g(Ki,[["render",fn]]);const yn={data(){return{isCreating:null,title:""}},methods:{addTask(){!this.title||(this.$emit("addTask",this.title),this.isCreating=null,this.title="")}}},An={key:0,class:"task-add open"},Tn={class:"add-task-btns"},In=o("span",{class:"plus-icon"},null,-1),Cn=o("span",{class:"add-task-txt"},"Add a card",-1),En=[In,Cn];function wn(t,e,i,r,n,s){const c=D("focus");return n.isCreating?(a(),d("section",An,[b(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.title=l),type:"textarea",placeholder:"Enter a title for this card...",class:"inline-input"},null,512),[[c],[M,n.title]]),o("section",Tn,[o("button",{onClick:e[1]||(e[1]=(...l)=>s.addTask&&s.addTask(...l)),class:"add-card-btn"},"Add card"),o("span",{class:"icon-cancel",onClick:e[2]||(e[2]=l=>n.isCreating=!1)})])])):(a(),d("section",{key:1,onClick:e[3]||(e[3]=l=>n.isCreating=!0),class:"task-add"},En))}var Bn=g(yn,[["render",wn]]);const Mn={name:"add-group",data(){return{isFocused:!1,groupTitle:""}},methods:{addGroup(){!this.groupTitle||(this.$emit("add",this.groupTitle),this.groupTitle="")},close(){this.isFocused=!1}}},Sn={key:0,class:"add-group-btn"},xn=o("span",{class:"icon-plus"},null,-1),Dn=I(" Add another list "),Un=[xn,Dn],Ln={key:1,class:"group-add-input-container"},On={class:"add-group-btns"};function Fn(t,e,i,r,n,s){const c=D("focus"),l=D("click-outside");return b((a(),d("section",{class:v(["add-group",{editable:n.isFocused}]),onClick:e[3]||(e[3]=u=>n.isFocused=!0)},[n.isFocused?(a(),d("section",Ln,[b(o("input",{type:"text",class:"inline-input","onUpdate:modelValue":e[0]||(e[0]=u=>n.groupTitle=u),placeholder:"Enter list title..."},null,512),[[M,n.groupTitle],[c]]),o("section",On,[o("button",{onClick:e[1]||(e[1]=(...u)=>s.addGroup&&s.addGroup(...u)),class:"add-group-btn"},"Add list"),o("span",{class:"icon-cancel",onClick:e[2]||(e[2]=L((...u)=>s.close&&s.close(...u),["stop"]))})])])):(a(),d("span",Sn,Un))],2)),[[l,s.close]])}var Nn=g(Mn,[["render",Fn]]);const Gn={name:"attachment-preview",props:{attachment:Object},methods:{removeAttachment(t){this.$emit("removeAttachment",t)}},computed:{createdAt(){return K(this.attachment.createdAt).startOf("hour").fromNow()}}},Rn={class:"attachment-item"},Pn={class:"image-container"},Zn=["src"],Jn={class:"attachment-details"},Qn={class:"main-actions"},Yn=I(" Added "),Hn=o("span",{class:"attachment-action"},"Comment",-1),Vn=I(" - "),jn=I(" - "),$n=o("span",{class:"attachment-action"},"Edit",-1),zn=o("div",null,[o("span",{class:"attachment-action"},"Make Cover")],-1);function qn(t,e,i,r,n,s){return a(),d("li",Rn,[o("div",Pn,[o("img",{src:i.attachment.url,alt:""},null,8,Zn)]),o("div",Jn,[o("h4",null,y(i.attachment.fileName),1),o("div",Qn,[Yn,o("span",null,y(s.createdAt)+" -",1),Hn,Vn,o("span",{class:"attachment-action",onClick:e[0]||(e[0]=L(c=>s.removeAttachment(i.attachment.id),["stop"]))},"Delete"),jn,$n]),zn])])}var Xn=g(Gn,[["render",qn]]);const Wn={name:"attachment",props:{attachments:Array},data(){return{}},methods:{removeAttachment(t){const e=this.attachments.findIndex(i=>t===i.id);this.attachments.splice(e,1),this.updateAttachments(JSON.parse(JSON.stringify(this.attachments)))},updateAttachments(t){this.$emit("updateAttachments",{type:"attachments",val:t})}},components:{attachmentPreview:Xn}},Kn={class:"attachments-container"};function er(t,e,i,r,n,s){const c=h("attachmentPreview");return a(),d("section",Kn,[o("ul",null,[(a(!0),d(T,null,C(i.attachments,l=>(a(),B(c,{onRemoveAttachment:s.removeAttachment,attachment:l,key:l.id},null,8,["onRemoveAttachment","attachment"]))),128))])])}var tr=g(Wn,[["render",er]]);const sr={props:{task:Object},data(){return{dateStatus:!1}},created(){this.status==="completed"&&(this.dateStatus=!0)},methods:{updateStatus(){var t;this.dateStatus?t="completed":this.dueDate<Date.now()?t="overdue":t="";const e={type:"status",item:t};this.$emit("addItem",e)},setLabels(){this.$emit("setLabels")},setDate(){this.$emit("setDate")},setMembers(){this.$emit("setMembers")}},computed:{status(){if(this.currStatus==="completed")return"completed";if(this.dueDate<Date.now())return"overdue"},currStatus(){return this.task.status},dueDate(){return this.task.dueDate},members(){return this.task.members},labelIds(){return this.task.labelIds},boardLabels(){return this.$store.getters.currBoard.labels},taskLabels(){var t;if(!!((t=this.labelIds)!=null&&t.length))return this.labelIds.map(e=>this.boardLabels.find(i=>i._id===e))},date(){return K(this.dueDate).format("lll")}},watch:{dueDate(){this.updateStatus()}}},or={class:"task-combo-list flex wrap"},ir={key:0,class:"members flex column"},nr=o("h3",null,"Members",-1),rr={class:"flex"},ar={key:1,class:"labels flex column"},lr=o("h3",null,"Labels",-1),dr={class:"flex label"},cr={key:2,class:"due-date"},ur=o("h3",null,"Due date",-1),mr={class:"due-date flex"},hr=o("span",{class:"open-icon"},null,-1);function pr(t,e,i,r,n,s){var l,u;const c=h("avatar");return a(),d("section",or,[(l=s.members)!=null&&l.length?(a(),d("section",ir,[nr,o("section",rr,[(a(!0),d(T,null,C(s.members,p=>(a(),d("div",{key:p._id},[f(c,{size:"32",color:"white",name:p.fullname,class:"avatar"},null,8,["name"])]))),128)),o("span",{onClick:e[0]||(e[0]=(...p)=>s.setMembers&&s.setMembers(...p)),class:"combo-add-icon"})])])):m("",!0),(u=s.taskLabels)!=null&&u.length?(a(),d("section",ar,[lr,o("section",dr,[(a(!0),d(T,null,C(s.taskLabels,(p,w)=>(a(),d("div",{key:w},[p?(a(),d("span",{key:0,style:S({"background-color":p.color})},y(p.title),5)):m("",!0)]))),128)),o("div",{class:"combo-add-icon label",onClick:e[1]||(e[1]=(...p)=>s.setLabels&&s.setLabels(...p))})])])):m("",!0),s.dueDate?(a(),d("section",cr,[ur,o("section",mr,[b(o("input",{type:"checkbox",class:"date-checkbox","onUpdate:modelValue":e[2]||(e[2]=p=>n.dateStatus=p),onChange:e[3]||(e[3]=(...p)=>s.updateStatus&&s.updateStatus(...p))},null,544),[[Y,n.dateStatus]]),o("div",{class:"title",onClick:e[4]||(e[4]=(...p)=>s.setDate&&s.setDate(...p))},[I(y(s.date)+" ",1),o("span",{class:v(["status",{completed:s.status==="completed",overdue:s.status==="overdue"}])},y(s.status),3),hr])])])):m("",!0)])}var gr=g(sr,[["render",pr]]);const br={name:"task-checklist",props:{checklist:Object},data(){return{checklistToEdit:null,newTodoTitle:"",addItemMode:!1,isHideDone:!1}},created(){this.checklistToEdit=JSON.parse(JSON.stringify(this.checklist))},methods:{addTodo(){if(!this.newTodoTitle)return;const t={_id:P.makeId(),title:this.newTodoTitle,isDone:!1};this.checklistToEdit.todos.push(t),this.newTodoTitle="",this.addItemMode=!1,this.updateTask()},deleteChecklist(){this.$emit("updateItem",{type:"checklists",val:{_id:this.checklistToEdit._id}})},updateTask(){this.$emit("updateItem",{type:"checklists",val:JSON.parse(JSON.stringify(this.checklistToEdit))})}},computed:{doneTodosPerecent(){const t=this.checklistToEdit.todos.length;if(!t)return 0;const e=this.checklistToEdit.todos.reduce((i,r)=>r.isDone?i+1:i,0);return parseInt(e/t*100)},isAnyTodoDone(){return this.checklistToEdit.todos.some(t=>t.isDone)},hideBtnTxt(){return this.isHideDone?`Show checked items (${this.checklistToEdit.todos.reduce((e,i)=>i.isDone?e+1:e,0)})`:"Hide checked items"}}},kr={key:0,class:"task-checklist"},_r=o("section",{class:"block-title"},[o("span",{class:"icon checklist-icon"})],-1),fr={class:"checklist-header-container"},vr={class:"header-actions flex"},yr={class:"progress-bar"},Ar={class:"percentage"},Tr=["value"],Ir={class:"todos-container"},Cr={key:0,class:"todo-container"},Er=["onUpdate:modelValue"],wr=["onUpdate:modelValue"],Br={key:1},Mr={class:"actions"};function Sr(t,e,i,r,n,s){const c=D("focus");return i.checklist?(a(),d("section",kr,[o("header",null,[_r,o("section",fr,[b(o("input",{type:"text",class:"checklist-title-input",onBlur:e[0]||(e[0]=(...l)=>s.updateTask&&s.updateTask(...l)),"onUpdate:modelValue":e[1]||(e[1]=l=>n.checklistToEdit.title=l)},null,544),[[M,n.checklistToEdit.title]]),o("section",vr,[s.isAnyTodoDone?(a(),d("button",{key:0,onClick:e[2]||(e[2]=l=>n.isHideDone=!n.isHideDone),class:"hide-show-btn"},y(s.hideBtnTxt),1)):m("",!0),o("button",{onClick:e[3]||(e[3]=(...l)=>s.deleteChecklist&&s.deleteChecklist(...l))},"Delete")])])]),o("div",yr,[o("span",Ar,y(s.doneTodosPerecent)+"%",1),o("progress",{value:s.doneTodosPerecent,max:"100"},null,8,Tr)]),o("div",Ir,[(a(!0),d(T,null,C(n.checklistToEdit.todos,l=>(a(),d("div",{key:l._id},[!n.isHideDone||!l.isDone?(a(),d("div",Cr,[b(o("input",{type:"checkbox","onUpdate:modelValue":u=>l.isDone=u,onChange:e[4]||(e[4]=(...u)=>s.updateTask&&s.updateTask(...u))},null,40,Er),[[Y,l.isDone]]),b(o("textarea",{spellcheck:"false",class:v({completed:l.isDone}),onBlur:e[5]||(e[5]=(...u)=>s.updateTask&&s.updateTask(...u)),"onUpdate:modelValue":u=>l.title=u,rows:"1"},null,42,wr),[[M,l.title]])])):m("",!0)]))),128))]),n.addItemMode?(a(),d("section",Br,[b(o("textarea",{"onUpdate:modelValue":e[7]||(e[7]=l=>n.newTodoTitle=l),placeholder:"Add an item",class:"add-todo-inp"},null,512),[[M,n.newTodoTitle],[c]]),o("section",Mr,[o("button",{class:"blue-btn",onClick:e[8]||(e[8]=(...l)=>s.addTodo&&s.addTodo(...l))},"Add"),o("i",{onClick:e[9]||(e[9]=l=>n.addItemMode=!1),class:"fa-solid fa-x"})])])):(a(),d("button",{key:0,onClick:e[6]||(e[6]=l=>n.addItemMode=!0),class:"add-todo-btn"},"Add an item"))])):m("",!0)}var xr=g(br,[["render",Sr]]);const Dr={props:{pp:String},created(){},methods:{setComment(){this.pp&&this.$emit("updateItem",this.pp,!1),this.$emit("addComment")}},components:{}},Ur=o("button",{class:"save"},"Save",-1),Lr=[Ur],Or=ge('<div class="comment-actions flex"><span class="icon-attachment"></span><span class="icon-find-members"></span><span class="icon-emojis"></span><span class="title-icon"></span></div>',1);function Fr(t,e,i,r,n,s){return a(),d("section",null,[o("div",{onClick:e[0]||(e[0]=(...c)=>s.setComment&&s.setComment(...c)),class:"comment-save"},Lr),Or])}var ye=g(Dr,[["render",Fr]]);const Nr={name:"activities-list",props:{task:Object,user:Object,memberToAdd:Object},data(){return{isEditing:"",txt:[],lastAtIndex:0,currActivityId:""}},methods:{findMembers(t){this.$emit("findMembers",t)},closeComment(){this.isEditing&&(this.isEditing=!1),this.$emit("closeComment")},deleteItem(t){var e={_id:t};this.$emit("updateItem",{type:"comment",val:JSON.parse(JSON.stringify(e))})},updateItem(t,e){this.currActivityId=t;var i=JSON.parse(JSON.stringify(this.task)),r=i.activities.find(n=>n._id===t);r.isEditing=e,this.$emit("updateItem",{type:"comment",val:JSON.parse(JSON.stringify(r))}),this.txt=""}},components:{commentActions:ye},watch:{memberToAdd(){this.isEditing&&this.updateItem(this.currActivityId,!0)}}},Gr={key:0,class:"comment-text"},Rr={class:"member"},Pr=["onUpdate:modelValue","onInput"],Zr=["onClick"],Jr=["onClick"],Qr={key:2},Yr=["onClick"];function Hr(t,e,i,r,n,s){var w;const c=h("avatar"),l=h("timeago"),u=h("comment-actions"),p=D("click-outside");return a(),d("section",null,[(w=i.task.activities)!=null&&w.length?(a(),d("ul",Gr,[(a(!0),d(T,null,C(i.task.activities,k=>(a(),d("li",{key:k._id,class:v({open:k.isEditing})},[f(c,{class:"activity-avatar",size:"32",name:k.byMember.fullname},null,8,["name"]),o("div",{class:v({activity:k.isComment})},[o("span",Rr,y(k.byMember.username),1),f(l,{class:"time",datetime:k.createdAt},null,8,["datetime"])],2),o("div",{class:v(["try",{open:k.isEditing}])},[o("div",{class:v(["task-activity-txt",{open:k.isEditing}])},[b(o("input",{"onUpdate:modelValue":A=>k.txt=A,type:"text",onInput:A=>s.findMembers(k._id)},null,40,Pr),[[M,k.txt],[p,s.closeComment]])],2),k.isEditing?(a(),B(u,{key:0,pp:k._id,popo:n.isEditing,class:v([{open:k.isEditing},"comments-main-container flex space-between"]),onUpdateItem:s.updateItem},null,8,["pp","popo","class","onUpdateItem"])):m("",!0)],2),k.isEditing?(a(),d("button",{key:0,class:"close-comment-edit",onClick:A=>s.updateItem(k._id,!1)},null,8,Zr)):m("",!0),!k.isEditing&&i.user._id===k.byMember._id?(a(),d("a",{key:1,onClick:A=>(n.isEditing=!0,s.updateItem(k._id,!0))},"Edit",8,Jr)):m("",!0),!k.isEditing&&i.user._id===k.byMember._id?(a(),d("span",Qr,"-")):m("",!0),!k.isEditing&&i.user._id===k.byMember._id?(a(),d("a",{key:3,onClick:A=>s.deleteItem(k._id)},"Delete",8,Yr)):m("",!0)],2))),128))])):m("",!0)])}var Vr=g(Nr,[["render",Hr]]);const jr={props:["board"],data(){return{}},methods:{addMember({fullname:t,username:e,imgUrl:i,_id:r}){const n={fullname:t,username:e,imgUrl:i,_id:r};this.$emit("addTag",n)},computed:{currTask(){return this.$store.getters.currTask},currTaskMembersIds(){let t=this.currTask.members;return t?t.map(e=>e._id):[]}}}},$r={key:0,class:"members-item"},zr=o("h3",{class:"header"},"Mentions...",-1),qr=["onClick"],Xr={class:"member-container flex align-items justify-center"},Wr={class:"avatar"},Kr={class:"name"},ea={class:"username"};function ta(t,e,i,r,n,s){const c=h("avatar");return i.board?(a(),d("section",$r,[zr,o("ul",null,[(a(!0),d(T,null,C(i.board.members,l=>(a(),d("li",{key:l._id,class:"member find flex align-items space-between",onClick:L(u=>s.addMember(l),["stop"])},[o("div",Xr,[o("div",Wr,[f(c,{size:28,color:"white",name:l.fullname},null,8,["name"])]),o("span",Kr,y(l.fullname),1)]),o("span",ea,y(l.fullname),1)],8,qr))),128))])])):m("",!0)}var sa=g(jr,[["render",ta]]);const oa={data(){return{taskToEdit:null,showSaveBtn:!1,popupData:null,actionType:null,isDescEditMode:!1,isComment:!1,comment:"",isFindMembers:!1,lastAtIndex:0,memberToAdd:""}},created(){this.taskToEdit=JSON.parse(JSON.stringify(this.task)),this.isComment=!1},methods:{deleteMap(){this.taskToEdit.location="",this.onTaskEdit()},openComment(){this.isComment=!0,this.comment||(this.lastAtIndex=0)},addTag(t){this.memberToAdd=t,this.tagMembers()},tagMembers(t){if(this.isFindMembers&&(this.isFindMembers=!this.isFindMembers,this.isComment&&this.memberToAdd))return this.comment+=this.memberToAdd.fullname,this.memberToAdd="";var e;t?(e=this.task.activities.find(r=>r._id===t).txt,this.lastAtIndex=e.length-2):e=this.comment;var i=e.indexOf("@",this.lastAtIndex+1);i!==-1&&(this.lastAtIndex=i),(i!==-1&&e[i-1]===" "||e.length===1&&e==="@")&&(this.isFindMembers=!0)},closeComment(){this.isComment&&(this.lastAtIndex=0,this.isComment=!1,this.comments="")},addComment(){this.lastAtIndex=0;const t={type:"comment",item:{byMember:this.miniUser,createdAt:Date.now(),task:{_id:this.task._id,title:this.task.title},txt:this.comment,_id:P.makeId(),isComment:!0}},e={by:this.miniUser,createdAt:Date.now(),txt:`${this.miniUser.username} tagged you`};t.item.txt.split(" ").forEach(i=>{if(i[0]==="@"){const r=i.substring(1),n=this.board.members.find(s=>s.username===r);n&&(e.to=n,N.emit("notify user tag",e))}}),this.addItem(t),this.closeComment(),this.comment=""},setLocation(t){this.actionType=t,this.popupData={name:"Location",style:{top:"240px"}}},setDate(t){this.actionType=t,this.popupData={name:"Dates",style:{top:"180px"}}},updateCover(t){this.taskToEdit.cover=t,this.onTaskEdit()},setMembers(t){this.actionType=t,this.popupData={name:"Members",style:{top:"59px"}}},setLabels(t){this.actionType=t,this.popupData={name:"Labels",style:{top:"99px"}}},setAttachments(t){this.actionType=t,this.popupData={name:"Attachments",style:{top:"220px"}}},setChecklist(t){this.actionType=t,this.popupData={name:"Add checklist",style:{top:"140px"}}},setCover(t){this.actionType=t,this.popupData={name:"Cover",style:{top:"300px"}}},closePopup(){this.actionType=null,this.popupData=null},addItem(t){if(t.type==="attachment")this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(t.item),this.onTaskEdit();else if(t.type==="comment")this.taskToEdit.activities||(this.taskToEdit.activities=[]),this.taskToEdit.activities.unshift(t.item);else if(t.type==="dueDate")this.taskToEdit.dueDate||(this.taskToEdit.dueDate=[]),this.taskToEdit.dueDate=t.item,this.onTaskEdit(),this.closePopup();else if(t.type==="status")this.taskToEdit.status=t.item;else if(t.type==="location")this.taskToEdit.location=t.item,this.closePopup();else if(t.type==="checklist")this.taskToEdit.checklists||(this.taskToEdit.checklists=[]),this.taskToEdit.checklists.push(t.item),this.closePopup();else if(t.type==="members")if(this.taskToEdit.members||(this.taskToEdit.members=[]),this.taskToEdit.members.some(i=>i._id===t.item._id)){const i=this.taskToEdit.members.findIndex(r=>r._id===t.item._id);this.taskToEdit.members.splice(i,1)}else this.taskToEdit.members.push(t.item);else if(t.type==="labels")if(this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]),this.taskToEdit.labelIds.includes(t.item._id)){const i=this.taskToEdit.labelIds.findIndex(r=>r===t.item._id);var e=this.taskToEdit.labelIds[i];t.item.color===e.color&&t.item.title===e.title&&this.taskToEdit.labelIds.splice(i,1)}else this.taskToEdit.labelIds.push(t.item._id);this.onTaskEdit(t)},updateItem({type:t,val:e}){var i;if(t==="checklists"){const r=this.taskToEdit.checklists,n=r.findIndex(s=>s._id===e._id);e.title?r.splice(n,1,e):r.splice(n,1)}else if(t==="comment"){const r=this.taskToEdit.activities,n=r.findIndex(s=>s._id===e._id);(i=e.txt)!=null&&i.length?r.splice(n,1,e):r.splice(n,1)}else this.taskToEdit[t]=e;this.onTaskEdit()},onTaskEdit(t=null){this.$store.dispatch({type:"setTask",task:JSON.parse(JSON.stringify(this.taskToEdit)),action:t}),this.$store.commit({type:"setCurrTask",task:JSON.parse(JSON.stringify(this.taskToEdit))})},async updateLabels(t,e){var i;if((i=e.item)!=null&&i.isDelete)return this.removeLabel(t,e);try{await this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t}),this.addItem(e),this.closePopup()}catch(r){console.log("err",r)}},removeLabel(t,e){const i=this.taskToEdit.labelIds.findIndex(r=>r===e.item._id);this.taskToEdit.labelIds.splice(i,1),this.onTaskEdit(),this.closePopup(),this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t})},cancelDescEdit(){this.taskToEdit.description=this.task.description,this.isDescEditMode=!1},saveDescEdit(){this.isDescEditMode&&(this.onTaskEdit(),this.isDescEditMode=!1)},closeModal(){this.$emit("closeModal")}},computed:{board(){return this.$store.getters.currBoard},group(){return this.$store.getters.currGroup},task(){return JSON.parse(JSON.stringify(this.$store.getters.currTask))},currUser(){return this.$store.getters.user},coverStyle(){return{"background-color":this.taskToEdit.cover.color,"background-image":"url("+this.taskToEdit.cover.imgUrl+")"}},miniUser(){return this.$store.getters.miniUser}},components:{popupMain:ve,attachment:tr,taskComboList:gr,taskCheckList:xr,contenteditable:Se,activitiesList:Vr,commentActions:ye,findMembers:sa},unmounted(){var e,i;if(this.lastAtIndex=0,(i=(e=this.task)==null?void 0:e.activities)!=null&&i.length){var t=this.task.activities.map(r=>{if(r.isEditing)return r});t.forEach(r=>{r&&(r.isEditing=!1,this.updateItem({type:"comment",val:r}))})}this.$emit("cleanStore")}},ia={class:"task-details-modal"},na={class:"header"},ra=o("span",{class:"icon title-icon"},null,-1),aa={class:"boad-title"},la={class:"task-detail-main"},da={class:"task-content"},ca={class:"task-description"},ua=o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Description")],-1),ma={class:"description-container"},ha={key:0,class:"save-close-description"},pa={key:1,class:"attachment-container"},ga=o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Attachments")],-1),ba={class:"attachment-content"},ka={key:2,class:"location-container"},_a=o("div",{class:"activity-show-details"},[o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Activity")]),o("button",{class:"show-details-btn"},"Show Details")],-1),fa={class:"comment-text"},va={class:"actions-btns-container"},ya=o("h3",null,"Add To card",-1),Aa=o("span",{class:"icon-members"},null,-1),Ta=I(" Members "),Ia=[Aa,Ta],Ca=o("span",{class:"icon-label"},null,-1),Ea=I(" Labels "),wa=[Ca,Ea],Ba=o("span",{class:"icon-checklist"},null,-1),Ma=I(" Checklist "),Sa=[Ba,Ma],xa=o("span",{class:"icon-time"},null,-1),Da=I(" Dates "),Ua=[xa,Da],La=o("span",{class:"icon-attachment"},null,-1),Oa=I(" Attachments "),Fa=[La,Oa],Na=o("span",{class:"icon-location"},null,-1),Ga=I(" Location "),Ra=[Na,Ga],Pa=o("span",{class:"icon-cover"},null,-1),Za=I(" Cover "),Ja=[Pa,Za],Qa=o("div",null,[o("h3",null,"Actions"),o("button",null,[o("span",{class:"icon-copy"}),I(" Copy ")]),o("button",null,[o("span",{class:"icon-share"}),I(" Share ")])],-1);function Ya(t,e,i,r,n,s){var j;const c=h("task-combo-list"),l=h("contenteditable"),u=h("attachment"),p=h("GMapMarker"),w=h("GMapCluster"),k=h("GMapMap"),A=h("task-check-list"),E=h("avatar"),Q=h("comment-actions"),x=h("activities-list"),G=h("popup-main"),z=h("find-members"),V=D("click-outside");return a(),d("section",ia,[n.taskToEdit.cover?(a(),d("div",{key:0,style:S(s.coverStyle),class:"task-cover"},[o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(..._)=>s.closeModal&&s.closeModal(..._))})],4)):m("",!0),o("div",na,[n.taskToEdit.cover?m("",!0):(a(),d("span",{key:0,class:"icon-cancel",onClick:e[1]||(e[1]=(..._)=>s.closeModal&&s.closeModal(..._))})),ra,b(o("input",{type:"text",onBlur:e[2]||(e[2]=(..._)=>s.onTaskEdit&&s.onTaskEdit(..._)),"onUpdate:modelValue":e[3]||(e[3]=_=>n.taskToEdit.title=_),class:"task-details-title"},null,544),[[M,n.taskToEdit.title]])]),o("p",aa,"In list "+y(s.board.title),1),o("section",la,[o("div",da,[n.taskToEdit.members||n.taskToEdit.labelIds||n.taskToEdit.dueDate?(a(),B(c,{key:0,task:n.taskToEdit,onSetLabels:e[4]||(e[4]=_=>s.setLabels("labelsItem")),onSetDate:e[5]||(e[5]=_=>s.setDate("dateItem")),onSetMembers:e[6]||(e[6]=_=>s.setMembers("membersItem")),onAddItem:s.addItem},null,8,["task","onAddItem"])):m("",!0),o("div",ca,[ua,b((a(),d("div",ma,[f(l,{onClick:e[7]||(e[7]=_=>n.isDescEditMode=!0),tag:"div",contenteditable:"true",spellcheck:"false",modelValue:n.taskToEdit.description,"onUpdate:modelValue":e[8]||(e[8]=_=>n.taskToEdit.description=_),noHTML:!0,class:v(["description-textarea",{"desc-with-content":n.taskToEdit.description,focused:n.isDescEditMode}])},null,8,["modelValue","class"]),n.isDescEditMode?(a(),d("div",ha,[o("button",{class:"save",onClick:e[9]||(e[9]=(..._)=>s.saveDescEdit&&s.saveDescEdit(..._))},"Save"),o("i",{class:"fa-solid fa-x",onClick:e[10]||(e[10]=(..._)=>s.cancelDescEdit&&s.cancelDescEdit(..._))})])):m("",!0)])),[[V,s.saveDescEdit]])]),(j=n.taskToEdit.attachments)!=null&&j.length?(a(),d("div",pa,[ga,o("div",ba,[f(u,{attachments:n.taskToEdit.attachments,onUpdateAttachments:s.updateItem},null,8,["attachments","onUpdateAttachments"])])])):m("",!0),s.task.location?(a(),d("div",ka,[f(k,{class:"maps",center:s.task.location,zoom:7,"map-type-id":"terrain",style:{width:"500px",height:"300px"}},{default:J(()=>[f(w,null,{default:J(()=>[f(p,{position:s.task.location},null,8,["position"])]),_:1})]),_:1},8,["center"]),o("a",{onClick:e[11]||(e[11]=(..._)=>s.deleteMap&&s.deleteMap(..._))},"Delete")])):m("",!0),(a(!0),d(T,null,C(n.taskToEdit.checklists,_=>(a(),B(A,{key:_._id,checklist:_,onUpdateItem:s.updateItem},null,8,["checklist","onUpdateItem"]))),128)),_a,b((a(),d("div",{class:v([{open:n.isComment},"comment-text-container"])},[o("div",fa,[f(E,{size:"32",name:s.currUser.fullname},null,8,["name"]),b(o("input",{class:v({open:n.isComment}),onClick:e[12]||(e[12]=(..._)=>s.openComment&&s.openComment(..._)),onInput:e[13]||(e[13]=_=>s.tagMembers(null)),placeholder:"Write a comment...",type:"text","onUpdate:modelValue":e[14]||(e[14]=_=>n.comment=_)},null,34),[[M,n.comment]]),n.isComment?(a(),B(Q,{key:0,class:v([{open:n.isComment},"comments-main-container flex space-between"]),onAddComment:s.addComment,onCloseComment:s.closeComment},null,8,["class","onAddComment","onCloseComment"])):m("",!0)])],2)),[[V,s.closeComment]]),f(x,{task:s.task,user:s.miniUser,onUpdateItem:s.updateItem,onFindMembers:s.tagMembers,memberToAdd:n.memberToAdd},null,8,["task","user","onUpdateItem","onFindMembers","memberToAdd"])]),o("div",va,[o("div",null,[ya,o("button",{onClick:e[15]||(e[15]=_=>s.setMembers("membersItem"))},Ia),o("button",{onClick:e[16]||(e[16]=_=>s.setLabels("labelsItem"))},wa),o("button",{onClick:e[17]||(e[17]=_=>s.setChecklist("checklistItem"))},Sa),o("button",{onClick:e[18]||(e[18]=_=>s.setDate("dateItem"))},Ua),o("button",{onClick:e[19]||(e[19]=_=>s.setAttachments("attachmentItem"))},Fa),o("button",{onClick:e[20]||(e[20]=_=>s.setLocation("locationItem"))},Ra),o("button",{onClick:e[21]||(e[21]=_=>s.setCover("coverItem"))},Ja)]),Qa,n.actionType?(a(),B(G,{key:0,task:s.task,onClosePopup:s.closePopup,popupData:n.popupData,onUpdateCover:s.updateCover,action:n.actionType,onAddItem:s.addItem,onSetItem:t.setItem,onUpdateLabels:s.updateLabels},null,8,["task","onClosePopup","popupData","onUpdateCover","action","onAddItem","onSetItem","onUpdateLabels"])):m("",!0)]),n.isFindMembers?(a(),B(z,{key:0,board:s.board,class:"find-members",onAddTag:s.addTag},null,8,["board","onAddTag"])):m("",!0)])])}var Ha=g(oa,[["render",Ya]]);const Va={name:"board-group",emits:["columnChange","addGroup","removeTask","addTask","taskChange","editTask","cleanStore","editGroup"],props:{groups:{type:Array,required:!0},board:Object},data(){return{scene:{groups:this.groups},isTaskDetail:!1,isLabelsOpen:!1,isQuickEdit:!1}},components:{Container:xe,Draggable:be,taskPreview:vn,taskAdd:Bn,addGroup:Nn,taskDetailsModal:Ha},watch:{groups(t,e){this.scene={groups:t}}},methods:{cleanStore(){this.$emit("cleanStore",["Task","Group"])},openTask(t,e,i){this.isQuickEdit||(this.isTaskDetail=!0,this.$store.commit({type:"setCurrGroup",group:e}),this.$store.commit({type:"setCurrTask",task:i}))},addGroup(t){this.$emit("addGroup",t)},editGroupTitle(t,e,i){const r=t.target.value;if(!r)return t.target.value=e.title;const n=JSON.parse(JSON.stringify(e));n.title=r,this.$emit("editGroup",{groupIdx:i,newGroup:n})},removeTask(t,e){const i={taskId:t,groupId:e};this.$emit("removeTask",i)},addTask(t,e){const i={title:t,groupId:e,members:[]};this.$emit("addTask",i)},editTask(t){this.$emit("editTask",t)},closeModal(){this.isTaskDetail=!1},toggleLabels(){this.isLabelsOpen=!this.isLabelsOpen},applyDrag(t,e){const{removedIndex:i,addedIndex:r,payload:n}=e;if(i===null&&r===null)return t;const s=[...t];let c=n;return i!==null&&(c=s.splice(i,1)[0]),r!==null&&s.splice(r,0,c),s},onColumnDrop(t){const e=Object.assign({},this.scene);e.groups=this.applyDrag(e.groups,t),this.scene=e,this.$emit("columnChange",this.scene.groups)},onCardDrop(t,e){if(e.removedIndex!==null||e.addedIndex!==null){const i=Object.assign({},this.scene),r=i.groups.filter(c=>c._id===t)[0],n=i.groups.indexOf(r),s=Object.assign({},r);e.removedIndex==null&&e.addedIndex>=0,s.tasks=this.applyDrag(s.tasks,e),this.$emit("taskChange",{groupIdx:n,newGroup:s})}},getCardPayload(t){return e=>this.scene.groups.filter(i=>i._id===t)[0].tasks[e]},onQuickEdit(t){this.isQuickEdit=t},updateTask(t){this.groups.filter(e=>(e.tasks.some(i=>i._id===t._id),e._id)),this.$emit("editTask",t)}}},ja={class:"group-container"},$a={class:"group-title"},za=["value","onChange"],qa=o("span",{class:"menu-icon"},null,-1);function Xa(t,e,i,r,n,s){const c=h("task-preview"),l=h("Container"),u=h("task-add"),p=h("Draggable"),w=h("add-group"),k=h("task-details-modal"),A=D("click-outside");return a(),d(T,null,[f(l,{"group-name":"cols",tag:"div",orientation:"horizontal","drag-handle-selector":".group-title","drag-class":"dragging",onDrop:e[0]||(e[0]=E=>s.onColumnDrop(E))},{default:J(()=>[(a(!0),d(T,null,C(n.scene.groups,(E,Q)=>(a(),B(p,{class:"",key:E._id},{default:J(()=>[o("section",ja,[o("section",$a,[o("textarea",{value:E.title,onChange:x=>s.editGroupTitle(x,E,Q),spellcheck:"false",class:"group-title inline-input"},null,40,za),qa]),f(l,{orientation:"vertical","group-name":"col-items","non-drag-area-selector":".on-quick-edit",shouldAcceptDrop:(x,G)=>x.groupName==="col-items"&&!G.loading,"get-child-payload":s.getCardPayload(E._id),"drop-placeholder":{className:"drag-placeholder-task"},"drag-class":"dragging",onDrop:x=>s.onCardDrop(E._id,x)},{default:J(()=>[(a(!0),d(T,null,C(E.tasks,x=>(a(),B(c,{onUpdateTask:s.updateTask,onOpenTask:G=>s.openTask(i.board,E,x),onOnQuickEdit:s.onQuickEdit,onRemoveTask:G=>s.removeTask(G,E._id),onClick:L(G=>s.openTask(i.board,E,x),["stop"]),onToggleLabels:s.toggleLabels,key:x._id,task:x,labelStatus:n.isLabelsOpen},null,8,["onUpdateTask","onOpenTask","onOnQuickEdit","onRemoveTask","onClick","onToggleLabels","task","labelStatus"]))),128))]),_:2},1032,["shouldAcceptDrop","get-child-payload","onDrop"]),f(u,{onAddTask:x=>s.addTask(x,E._id)},null,8,["onAddTask"])])]),_:2},1024))),128)),f(w,{onAdd:s.addGroup},null,8,["onAdd"])]),_:1}),o("div",{class:v(["overlay",{"open-overlay":n.isTaskDetail}])},[n.isTaskDetail?b((a(),B(k,{key:0,onCleanStore:s.cleanStore,onCloseModal:s.closeModal,onEditTask:s.editTask},null,8,["onCleanStore","onCloseModal","onEditTask"])),[[A,s.closeModal]]):m("",!0)],2)],64)}var Wa=g(Va,[["render",Xa]]);const Ka={name:"board-header-title",props:{title:String,createdBy:String},data(){return{titleToEdit:this.title}},methods:{editTitle(){if(!this.titleToEdit)return this.titleToEdit=this.title;!this.isEditAble||this.$emit("editTitle",this.titleToEdit)}},computed:{userId(){var t;return(t=this.$store.getters.miniUser)==null?void 0:t._id},isEditAble(){return this.createdBy===this.userId},inputSize(){const i=this.titleToEdit.length-2;return i<1?1:i>60?60:i}}},el={class:"board-header-title"},tl=["size","disabled"];function sl(t,e,i,r,n,s){return a(),d("section",el,[b(o("input",{type:"text",size:s.inputSize,"onUpdate:modelValue":e[0]||(e[0]=c=>n.titleToEdit=c),class:v(["inline-input",{editable:s.isEditAble}]),disabled:!s.isEditAble,onBlur:e[1]||(e[1]=(...c)=>s.editTitle&&s.editTitle(...c))},null,42,tl),[[M,n.titleToEdit]])])}var ol=g(Ka,[["render",sl]]);const il={name:"board-header-favorite",props:{favorite:Boolean},data(){return{isFavorite:this.favorite,isHovered:!1}},methods:{toggleFavorite(){this.isFavorite=!this.isFavorite,this.$emit("toggleFavorite",this.isFavorite)}},computed:{favoriteIcon(){return this.isFavorite?"fa-solid fa-star":"fa-regular fa-star"}}};function nl(t,e,i,r,n,s){return a(),d("section",{class:"board-header-favorite",onClick:e[0]||(e[0]=(...c)=>s.toggleFavorite&&s.toggleFavorite(...c))},[o("i",{class:v(s.favoriteIcon)},null,2)])}var rl=g(il,[["render",nl]]);const al={name:"members-preview",props:{board:Object},components:{}},ll={class:"members-preview"},dl={key:0,class:"admin-badge",src:"https://a.trellocdn.com/prgb/dist/images/chevron.88a4454280d68a816b89.png"};function cl(t,e,i,r,n,s){const c=h("avatar");return a(),d("section",ll,[(a(!0),d(T,null,C(i.board.members,l=>(a(),d("div",{class:"avatar-container",key:l._id},[f(c,{size:28,color:"white",name:l.fullname},null,8,["name"]),i.board.createdBy._id===l._id?(a(),d("img",dl)):m("",!0)]))),128))])}var ul=g(al,[["render",cl]]);const ml={name:"invite-members",props:{board:Object},data(){return{appUsers:null,filterBy:{name:""}}},created(){this.appUsers=this.users},methods:{closeModal(){this.$emit("closeInviteModal")},addMember({fullname:t,_id:e,imgUrl:i}){const r={fullname:t,_id:e,imgUrl:i};let n=JSON.parse(JSON.stringify(this.board));n.members.push(r),this.$emit("addMember",n.members)}},computed:{users(){return this.$store.getters.getAllUsers},getRelevantUsers(){let t=JSON.parse(JSON.stringify(this.appUsers));const e=new RegExp(this.filterBy.name,"i");return t=t.filter(i=>e.test(i.fullname)),t.filter(i=>!this.board.members.some(r=>i._id===r._id))}}},hl={class:"invite-members-modal"},pl=o("p",null,"Invite to board",-1),gl=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),bl=[gl],kl=o("h4",null,"Add Member",-1),_l=["onClick"];function fl(t,e,i,r,n,s){const c=h("avatar");return a(),d("section",hl,[o("header",null,[pl,o("span",{onClick:e[0]||(e[0]=(...l)=>s.closeModal&&s.closeModal(...l))},bl)]),o("main",null,[b(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>n.filterBy.name=l),placeholder:"Member name"},null,512),[[M,n.filterBy.name]]),kl,o("ul",null,[(a(!0),d(T,null,C(s.getRelevantUsers,(l,u)=>(a(),d("li",{key:u,onClick:p=>s.addMember(l)},[f(c,{size:"32",name:l.fullname},null,8,["name"]),o("p",null,y(l.fullname),1)],8,_l))),128))])])])}var vl=g(ml,[["render",fl]]);const yl={methods:{setCmp(t){this.$emit("changeCmp",t)},async onUploadImg(t){this.isLoading=!0;const e=await oe(t.target.files[0]);this.$emit("save",e.url),this.$emit("setBg",{type:"bgImg",val:e.url}),this.isLoading=!1}}},Al={class:"change-bg-menu"},Tl=o("span",null,"Images",-1),Il=o("span",null,"Colors",-1),Cl={class:"custom-bg"},El=o("h2",null,"Custom",-1),wl=o("label",{for:"imgInput"},[o("div",{class:"add-bg"},[o("span",{class:"icon-plus"})])],-1);function Bl(t,e,i,r,n,s){return a(),d("section",Al,[o("section",null,[o("div",null,[o("div",{class:"img",onClick:e[0]||(e[0]=c=>s.setCmp("bgPhotos"))}),Tl]),o("div",null,[o("div",{class:"color",onClick:e[1]||(e[1]=c=>s.setCmp("colorPicker"))}),Il])]),o("div",Cl,[El,wl,o("input",{hidden:"",type:"file",name:"img-input",id:"imgInput",onChange:e[2]||(e[2]=(...c)=>s.onUploadImg&&s.onUploadImg(...c))},null,32)])])}var Ml=g(yl,[["render",Bl]]);const Sl={data(){return{randPics:null,keyword:""}},async created(){this.randPics=await H.getRandomImages(20)},methods:{async setPics(){this.randPics=await H.getImages(this.keyword,20)},setBgImg(t){this.$emit("setBg",{type:"bgImg",val:t})}}},xl={class:"background-photos"},Dl={key:0,class:"photos"},Ul=["onClick"],Ll=["src"];function Ol(t,e,i,r,n,s){const c=D("focus");return a(),d("section",xl,[b(o("input",{type:"text",class:"popup-inp","onUpdate:modelValue":e[0]||(e[0]=l=>n.keyword=l),placeholder:"Search photos",onChange:e[1]||(e[1]=(...l)=>s.setPics&&s.setPics(...l))},null,544),[[c],[M,n.keyword]]),n.randPics?(a(),d("div",Dl,[(a(!0),d(T,null,C(n.randPics,l=>(a(),d("div",{key:l._id,onClick:u=>s.setBgImg(l.full)},[o("img",{src:l.thumb,alt:""},null,8,Ll)],8,Ul))),128))])):m("",!0)])}var Fl=g(Sl,[["render",Ol]]);const Nl={props:{isOpen:Boolean,board:Object},data(){return{currSection:"Menu"}},created(){},unmounted(){this.currSection="Menu"},methods:{closeMenu(){this.$emit("closeMenu"),this.currSection="Menu"},changeCmp(t){this.currSection=t},setBg(t,e="bgImg"){e==="bgColor"?this.$emit("setBg",{type:e,val:t}):this.$emit("setBg",t)},goBack(){this.currSection==="changeBg"&&(this.currSection="Menu"),this.currSection==="bgPhotos"&&(this.currSection="changeBg"),this.currSection==="colorPicker"&&(this.currSection="changeBg")},setBgColor(t){this.$emit("setBgColor")}},computed:{boardBgStyle(){return{"background-color":this.board.style.bgColor,"background-image":"url("+this.board.style.bgImg+")"}}},components:{changeBg:Ml,bgPhotos:Fl,colorPicker:W}},Gl={key:1},Rl={key:2},Pl={key:3},Zl={key:4},Jl={key:0},Ql={class:"about-board"},Yl=o("div",null,[o("span",{class:"icon-trello"}),o("p",null,"About this board")],-1),Hl=o("p",null,"Change background",-1);function Vl(t,e,i,r,n,s){const c=h("change-bg"),l=h("bg-photos"),u=h("color-picker"),p=h("avatar"),w=h("timeago"),k=D("click-outside");return i.isOpen?b((a(),d("div",{key:0,class:v(["board-menu-modal",{open:i.isOpen}])},[o("header",null,[n.currSection!=="Menu"?(a(),d("span",{key:0,class:"icon-back",onClick:e[0]||(e[0]=(...A)=>s.goBack&&s.goBack(...A))})):m("",!0),n.currSection==="Menu"?(a(),d("h3",Gl,"Menu")):m("",!0),n.currSection==="changeBg"?(a(),d("h3",Rl,"Change background")):m("",!0),n.currSection==="bgPhotos"?(a(),d("h3",Pl,"Photos by Unsplash")):m("",!0),n.currSection==="colorPicker"?(a(),d("h3",Zl,"Colors")):m("",!0),o("span",{class:"icon-cancel",onClick:e[1]||(e[1]=(...A)=>s.closeMenu&&s.closeMenu(...A))})]),n.currSection==="Menu"?(a(),d("main",Jl,[o("section",Ql,[Yl,o("div",{onClick:e[2]||(e[2]=A=>n.currSection="changeBg")},[o("span",{style:S(s.boardBgStyle),class:"bg-icon"},null,4),Hl])])])):m("",!0),n.currSection==="changeBg"?(a(),B(c,{key:1,onSetBg:s.setBg,onChangeCmp:s.changeCmp},null,8,["onSetBg","onChangeCmp"])):m("",!0),n.currSection==="bgPhotos"?(a(),B(l,{key:2,onSetBg:s.setBg},null,8,["onSetBg"])):m("",!0),n.currSection==="colorPicker"?(a(),B(u,{key:3,class:"wide",onUpdateColor:s.setBg},null,8,["onUpdateColor"])):m("",!0),o("section",null,[o("ul",null,[(a(!0),d(T,null,C(i.board.activities,A=>(a(),d("li",{key:A._id},[o("div",null,[f(p,{class:"activity-avatar",size:"32",name:A.byMember.fullname},null,8,["name"]),o("span",null,y(A.byMember.fullname)+" -",1),o("span",null,y(A.txt),1)]),o("div",null,[f(w,{class:"time",datetime:A.createdAt},null,8,["datetime"])])]))),128))])])],2)),[[k,s.closeMenu]]):m("",!0)}var jl=g(Nl,[["render",Vl]]);const $l={name:"close-filter",props:{board:Object,filter:Object},data(){return{dueDateOptions:[{_id:"1",txt:"No dates",classList:"icon-date",val:"no-dates"},{_id:"2",txt:"Overdue",classList:"icon-time red-bg",val:"overdue"},{_id:"3",txt:"Due in the next day",classList:"icon-time wait-bg",val:"next-day"}],filterBy:{title:"",labels:[],members:[],dueDate:[]}}},created(){this.filterBy=this.filter},methods:{closeFilter(){this.$emit("closeFilter")},setFilter(){console.log(this.filter),this.$emit("setFilter",ce({},this.filterBy))}}},zl={class:"board-filter"},ql=o("h3",null,"Filter",-1),Xl={class:"search-inp"},Wl=o("h4",null,"Keyword",-1),Kl=o("p",null,"Search cards, members, labels, and more.",-1),ed={class:"members"},td=o("h4",null,"Members",-1),sd=["value","id"],od={class:"dates"},id=o("h4",null,"Due date",-1),nd=["value"],rd={class:"labels"},ad=o("h4",null,"Labels",-1),ld=o("span",{class:"icon-label"},null,-1),dd=o("p",null,"No labels",-1),cd=["value","id"];function ud(t,e,i,r,n,s){const c=h("avatar"),l=D("focus");return a(),d("section",zl,[o("header",null,[t.currSection!=="Menu"?(a(),d("span",{key:0,class:"icon-back",onClick:e[0]||(e[0]=(...u)=>t.goBack&&t.goBack(...u))})):m("",!0),ql,o("span",{class:"icon-cancel",onClick:e[1]||(e[1]=(...u)=>s.closeFilter&&s.closeFilter(...u))})]),o("div",Xl,[Wl,b(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>n.filterBy.title=u),placeholder:"Enter a keyword...",onInput:e[3]||(e[3]=(...u)=>s.setFilter&&s.setFilter(...u))},null,544),[[l],[M,n.filterBy.title]]),Kl]),o("div",ed,[td,o("ul",null,[(a(!0),d(T,null,C(i.board.members,(u,p)=>(a(),d("li",{key:u._id},[b(o("input",{value:u._id,"onUpdate:modelValue":e[4]||(e[4]=w=>n.filterBy.members=w),onChange:e[5]||(e[5]=(...w)=>s.setFilter&&s.setFilter(...w)),type:"checkbox",id:u._id},null,40,sd),[[Y,n.filterBy.members]]),f(c,{size:"24",name:u.fullname},null,8,["name"]),o("p",null,y(u.fullname),1)]))),128))])]),o("div",od,[id,o("ul",null,[(a(!0),d(T,null,C(n.dueDateOptions,u=>(a(),d("li",{key:u._id},[o("label",null,[b(o("input",{onChange:e[6]||(e[6]=(...p)=>s.setFilter&&s.setFilter(...p)),"onUpdate:modelValue":e[7]||(e[7]=p=>n.filterBy.dueDate=p),type:"checkbox",value:u.val},null,40,nd),[[Y,n.filterBy.dueDate]]),o("span",{class:v(u.classList)},null,2),o("p",null,y(u.txt),1)])]))),128))])]),o("div",rd,[ad,o("ul",null,[o("li",null,[o("label",null,[b(o("input",{onChange:e[8]||(e[8]=(...u)=>s.setFilter&&s.setFilter(...u)),type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=u=>n.filterBy.labels=u),value:"none"},null,544),[[Y,n.filterBy.labels]]),ld,dd])]),(a(!0),d(T,null,C(i.board.labels,u=>(a(),d("li",null,[o("label",null,[b(o("input",{value:u._id,"onUpdate:modelValue":e[10]||(e[10]=p=>n.filterBy.labels=p),onChange:e[11]||(e[11]=(...p)=>s.setFilter&&s.setFilter(...p)),type:"checkbox",id:u._id},null,40,cd),[[Y,n.filterBy.labels]]),o("div",{class:"label",style:S({"background-color":u.color})},[o("p",null,y(u.title),1)],4)])]))),256))])])])}var he=g($l,[["render",ud]]);const md={name:"board-header",emits:["editTitle","toggleFavorite"],props:{board:Object,filterBy:Object},data(){return{isInviteModal:!1,isMenuModal:!1,isFilterModal:!1}},components:{boardHeaderTitle:ol,boardHeaderFavorite:rl,membersPreview:ul,inviteMembers:vl,boardMenuModal:jl,boardFilter:he,BoardFilter:he},methods:{editTitle(t){this.$emit("editTitle",t)},toggleFavorite(t){this.$emit("toggleFavorite",t)},closeModal(){this.isInviteModal=!1},closeFilterModal(){this.isFilterModal=!1},toggleBoardMenu(){this.isMenuModal=!this.isMenuModal},addMember(t){this.$emit("addMember",t)},setBg(t){this.$emit("setBg",t)},setFilter(t){this.$emit("setFilter",t)}},computed:{boardTitle(){var t;return(t=this.$store.getters.currBoard)==null?void 0:t.title},boardFavoriteStatus(){var t;return(t=this.$store.getters.currBoard)==null?void 0:t.isFavorite},boardCreatorId(){var t,e;return(e=(t=this.$store.getters.currBoard)==null?void 0:t.createdBy)==null?void 0:e._id}}},hd={class:"board-header flex space-between"},pd={class:"menu-left-header"},gd=o("button",{class:"btn"},[o("span",{class:"board-header-board-icon"}),I(" Board "),o("span",{class:"board-header-open-icon"})],-1),bd={class:"invite-members-container"},kd=o("span",{class:"board-header-invite-icon"},null,-1),_d=I(" Invite "),fd=[kd,_d],vd={class:"right-btns"},yd=o("span",{class:"board-header-filter-icon"},null,-1),Ad=I("Filter "),Td=[yd,Ad],Id=o("span",{class:"board-header-menu-icon"},null,-1),Cd=I("Show menu "),Ed=[Id,Cd];function wd(t,e,i,r,n,s){const c=h("board-header-title"),l=h("board-header-favorite"),u=h("members-preview"),p=h("invite-members"),w=h("board-filter"),k=h("board-menu-modal"),A=D("click-outside");return a(),d("header",hd,[o("section",pd,[gd,f(c,{style:{color:"black"},onEditTitle:s.editTitle,title:s.boardTitle,createdBy:s.boardCreatorId},null,8,["onEditTitle","title","createdBy"]),f(l,{class:"board-header-invite btn",onToggleFavorite:s.toggleFavorite,favorite:s.boardFavoriteStatus},null,8,["onToggleFavorite","favorite"]),f(u,{board:i.board},null,8,["board"]),o("div",bd,[o("button",{class:"btn",onClick:e[0]||(e[0]=E=>n.isInviteModal=!n.isInviteModal)},fd),n.isInviteModal?b((a(),B(p,{key:0,board:i.board,onCloseInviteModal:s.closeModal,onAddMember:s.addMember},null,8,["board","onCloseInviteModal","onAddMember"])),[[A,s.closeModal]]):m("",!0)])]),o("section",vd,[o("button",{class:"btn",onClick:e[1]||(e[1]=E=>n.isFilterModal=!n.isFilterModal)},Td),o("button",{class:"btn show-menu",onClick:e[2]||(e[2]=(...E)=>s.toggleBoardMenu&&s.toggleBoardMenu(...E))},Ed),n.isFilterModal?b((a(),B(w,{key:0,onSetFilter:s.setFilter,onCloseFilter:s.closeFilterModal,board:i.board,filter:i.filterBy},null,8,["onSetFilter","onCloseFilter","board","filter"])),[[A,s.closeFilterModal]]):m("",!0),f(k,{onSetBg:s.setBg,board:i.board,isOpen:n.isMenuModal,onCloseMenu:e[3]||(e[3]=E=>n.isMenuModal=!1)},null,8,["onSetBg","board","isOpen"])])])}var Bd=g(md,[["render",wd]]);const Md={name:"board-details",components:{boardGroup:Wa,boardHeader:Bd},data(){return{filterBy:{title:"",labels:[],members:[],dueDate:[]}}},watch:{"$route.params.boardId":{immediate:!0,async handler(t,e){await this.$store.dispatch({type:"setCurrentBoard",boardId:t})},deep:!0}},async created(){await this.loadBoard(),N.on("tag user",this.tagUser)},unmounted(){this.$store.commit({type:"setCurrentBoard",board:null})},methods:{tagUser(t){this.$toast(t.txt,{duration:2e3,styles:{top:"90px",right:"90px",position:"absolute"},class:"toast",positionX:"left",positionY:"top"})},async loadBoard(){try{await this.$store.dispatch({type:"setCurrentBoard",boardId:this.$route.params.boardId}),this.board=null,await De()}catch(t){console.log("err",t)}},removeTask(t){this.$store.dispatch({type:"removeTask",task:t})},setTask({title:t,groupId:e}){var i={title:t};this.$store.dispatch({type:"setTask",groupId:e,task:i})},editTask(t){this.$store.dispatch({type:"setTask",task:t})},quickUpdateTask(){this.$store.dispatch({type:"setTask",task:editedTask})},addGroup(t){this.$store.dispatch({type:"addGroup",groupTitle:t})},editGroup({groupIdx:t,newGroup:e}){this.$store.dispatch({type:"setGroup",groupIdx:t,newGroup:e})},columnChange(t){this.$store.dispatch({type:"setGroups",groups:t})},taskChange({groupIdx:t,newGroup:e}){this.$store.dispatch({type:"setGroup",groupIdx:t,newGroup:e})},editBoardTitle(t){this.$store.dispatch({type:"setBoardPrefs",key:"title",val:t})},toggleFavorite(t){this.$store.dispatch({type:"setBoardPrefs",key:"isFavorite",val:t})},cleanStore(t){t.forEach(e=>{const i={type:`setCurr${e}`};i[e.toLowerCase()]=null,this.$store.commit(i)})},async addMember(t){await this.$store.dispatch({type:"setBoardPrefs",key:"members",val:t})},async setBg(t){const e=JSON.parse(JSON.stringify(this.currBoard));e.style[t.type]=t.val,t.type==="bgColor"&&(e.style.bgImg=""),await this.$store.dispatch({type:"saveBoard",board:e}),await this.$store.dispatch({type:"setCurrentBoard",boardId:e._id})},setFilter(t){const e=JSON.parse(JSON.stringify(t));this.filterBy=e}},computed:{miniUser(){return this.$store.getters.miniUser},groups(){return this.$store.getters.boardGroups},currBoard(){return this.$store.getters.currBoard},groupsToDisplay(){let t=[];const e=JSON.parse(JSON.stringify(this.currBoard)),i=new RegExp(this.filterBy.title,"i");return t=e.groups.filter(r=>i.test(r.title)||r.tasks.some(n=>i.test(n.title))),this.filterBy.members.length&&(t=t.filter(r=>r.tasks.some(n=>{var s;return(s=n.members)==null?void 0:s.some(c=>this.filterBy.members.includes(c._id))})),t=t.map(r=>(r.tasks=r.tasks.filter(n=>{var s;return n.members||(n.members=[]),(s=n.members)==null?void 0:s.some(c=>this.filterBy.members.includes(c._id))}),r))),this.filterBy.labels.length&&(t=t.filter(r=>r.tasks.some(n=>{var s;return(s=n.labelIds)==null?void 0:s.some(c=>this.filterBy.labels.includes(c))})),t=t.map(r=>(r.tasks=r.tasks.filter(n=>{var s;return this.filterBy.labels.includes("none"),(s=n.labelIds)==null?void 0:s.some(c=>{if(c!=="none")return this.filterBy.labels.includes(c)})}),r))),this.filterBy.dueDate&&this.filterBy.dueDate==="overdue"&&(t=t.filter(r=>r.tasks.some(n=>n.status==="overdue"))),t}}},Sd={class:"group-container-scrollable"};function xd(t,e,i,r,n,s){const c=h("board-header"),l=h("board-group");return s.currBoard?(a(),d("section",{key:0,class:"board-container",style:S(t.boardStyle)},[f(c,{onSetBg:s.setBg,board:s.currBoard,onEditTitle:s.editBoardTitle,onAddMember:s.addMember,onToggleFavorite:s.toggleFavorite,onSetFilter:s.setFilter,filterBy:n.filterBy},null,8,["onSetBg","board","onEditTitle","onAddMember","onToggleFavorite","onSetFilter","filterBy"]),o("section",Sd,[f(l,{onRemoveTask:s.removeTask,onAddTask:s.setTask,onEditTask:s.editTask,onTaskChange:s.taskChange,onColumnChange:s.columnChange,onAddGroup:s.addGroup,onEditGroup:s.editGroup,onCleanStore:s.cleanStore,groups:s.groupsToDisplay,board:s.currBoard},null,8,["onRemoveTask","onAddTask","onEditTask","onTaskChange","onColumnChange","onAddGroup","onEditGroup","onCleanStore","groups","board"])])],4)):m("",!0)}var Dd=g(Md,[["render",xd]]);const Ud={data(){return{board:"",task:null}},created(){var t=this.groups.find(e=>e._id===this.$route.params.groupId);this.task=t.tasks.find(e=>e._id===this.$route.params.taskId)},computed:{groups(){return this.$store.getters.boardGroups}}};function Ld(t,e,i,r,n,s){return a(),d("h1",null,y(n.task.title),1)}var Od=g(Ud,[["render",Ld]]);const Fd={name:"login-signup",data(){return{user:{fullname:"",username:"",password:""},isLogin:!0}},created(){this.isLogin=this.$route.path==="/login"},methods:{async onLoginSignup(){try{const t=this.isLogin?"login":"signup";await this.$store.dispatch({type:t,cred:this.user}),this.$router.push("/board")}catch(t){console.log(t)}},async handleGoogleLogin(){try{const t=await this.$gAuth.signIn();if(!t)return;const e=t.getBasicProfile().getId(),i=t.getBasicProfile().getEmail(),r=t.getBasicProfile().getName(),n=t.getBasicProfile().getImageUrl(),s={username:i,fullname:r,password:e,imgUrl:n};try{await this.$store.dispatch({type:"login",cred:s})}catch{await this.$store.dispatch({type:"signup",cred:s})}this.$router.push("/board")}catch(t){console.log(t)}},toggleLoginSignup(){this.isLogin=!this.isLogin}},computed:{loginSignupBtnTxt(){return this.isLogin?"Login":"Signup"},loginSignupLinkTxt(){return this.isLogin?"Sign up for an account":"Already have an account? Log in"}}},Nd={class:"login-wrapper"},Gd={class:"main-container"},Rd=o("header",null,[o("span",{class:"icon-trello"}),o("h1",null,"Drello")],-1),Pd={class:"login-container"},Zd=o("h2",null,"Log in to Drello",-1),Jd=o("div",{class:"login-option-sep"},"Or",-1),Qd=o("span",{class:"google-icon"},null,-1),Yd=o("span",{class:"btn-txt"},"Continue with Google",-1),Hd=[Qd,Yd],Vd=o("hr",null,null,-1);function jd(t,e,i,r,n,s){return a(),d("section",Nd,[o("section",Gd,[Rd,o("main",Pd,[Zd,o("form",{onSubmit:e[5]||(e[5]=L(()=>{},["prevent"]))},[b(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>n.user.username=c),placeholder:"Enter Username"},null,512),[[M,n.user.username]]),n.isLogin?m("",!0):b((a(),d("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=c=>n.user.fullname=c),type:"text",placeholder:"Enter Full Name"},null,512)),[[M,n.user.fullname]]),b(o("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=c=>n.user.password=c),placeholder:"Enter password"},null,512),[[M,n.user.password]]),o("button",{class:"login-btn",onClick:e[3]||(e[3]=(...c)=>s.onLoginSignup&&s.onLoginSignup(...c))},y(s.loginSignupBtnTxt),1),Jd,o("button",{class:"login-with-google",onClick:e[4]||(e[4]=(...c)=>s.handleGoogleLogin&&s.handleGoogleLogin(...c))},Hd)],32),Vd,o("p",{onClick:e[6]||(e[6]=(...c)=>s.toggleLoginSignup&&s.toggleLoginSignup(...c)),class:"change-form-link"},y(s.loginSignupLinkTxt),1)])])])}var $d=g(Fd,[["render",jd]]);const zd=Ue({history:Le(),routes:[{path:"/",name:"home",component:Ss},{path:"/board",name:"board",component:Ws},{path:"/board/:boardId",name:"board-details",component:Dd},{path:"/board/:boardId/:groupId/:taskId",name:"task-details",component:Od},{path:"/login",name:"login-signup",component:$d,alias:"/signup"}]});var qd={state:{boards:[],currentBoard:null,currentGroup:null,currentTask:null,openLabels:!1},getters:{openLabel({openLabels:t}){return t},boards({boards:t}){return t},boardsToShow({boards:t,filterBy:e}){return JSON.parse(JSON.stringify(t))},currBoard({currentBoard:t}){return t},boardGroups({currentBoard:t}){return t==null?void 0:t.groups},currGroup({currentGroup:t}){return t},currTask({currentTask:t}){return t}},mutations:{toggleLabel(t){t.openLabels=!t.openLabels},setBoards(t,{boards:e}){t.boards=e},saveBoard(t,{board:e}){const i=t.boards.findIndex(r=>r._id===e._id);i!==-1?t.boards.splice(i,1,e):t.boards.push(e)},updateBoard(t,{key:e,val:i}){t.currentBoard[e]=i},removeBoard(t,{boardId:e}){const i=t.boards.findIndex(r=>r._id===e);t.boards.splice(i,1)},setFilter(t,{filterBy:e}){t.filterBy=e},setCurrGroup(t,{group:e}){t.currentGroup=e},setCurrTask(t,{task:e}){t.currentTask=e},setSort(t,{sortBy:e}){t.sortBy=e},setCurrentBoard(t,{board:e}){t.currentBoard=e},addGroup(t,{group:e}){t.currentBoard.groups.push(e)},removeGroup(t,{groupId:e}){const i=t.currentBoard.groups.indexOf(c=>c._id===e),{_id:r,title:n}=t.currentBoard.groups[i];t.currentBoard.groups.splice(i,1);const s=F.addActivity("removed group",O.getLoggedinUser(),{type:"group",_id:r,title:n});t.currentBoard.activities.unshift(s)},setCurrGroups(t,{groups:e}){t.currentBoard.groups=e},setGroup(t,{groupIdx:e,newGroup:i}){t.currentBoard.groups.splice(e,1,i)},setTask(t,{groupId:e,task:i,action:r}){var p,w,k;let n,s;var c=t.currentTask;if(console.log(r),r?s=`Edited ${r.type} in ${i.title}`:s=i._id?`Edited task ${i.title}`:`Added task ${i.title}`,t.currentGroup&&(e=t.currentGroup._id),e?n=t.currentBoard.groups.findIndex(A=>A._id===e):n=t.currentBoard.groups.findIndex(A=>A.tasks.findIndex(E=>E._id===i._id)!==-1),i._id){const A=t.currentBoard.groups[n].tasks.findIndex(E=>E._id===i._id);t.currentBoard.groups[n].tasks.splice(A,1,i)}else i._id=P.makeId(),t.currentBoard.groups[n].tasks.push(i);if((r==null?void 0:r.type)==="members"&&(((p=c==null?void 0:c.members)==null?void 0:p.length)||((w=c==null?void 0:c.members)==null?void 0:w.length)>((k=i==null?void 0:i.members)==null?void 0:k.length)))return;const l=t.currentBoard.groups[n],u=F.addActivity(s,O.getLoggedinUser(),{type:"task",_id:i._id,taskTitle:i.title,groupTitle:l.title},t.currentBoard);(r==null?void 0:r.type)==="members"&&(u.toMember=r.item),t.currentBoard.activities.unshift(u),N.emit("activity notify",{activity:u,boardMembers:t.currentBoard.members})},removeTask(t,{task:e}){const i=t.currentBoard.groups[e.groupIdx].tasks.findIndex(c=>c._id===e.taskId),{_id:r,title:n}=t.currentBoard.groups[e.groupIdx].tasks[i];t.currentBoard.groups[e.groupIdx].tasks.splice(i,1);const s=F.addActivity("Removed task",O.getLoggedinUser(),{type:"task",_id:r,title:n});t.currentBoard.activities.unshift(s)}},actions:{async loadBoards({commit:t,state:e}){try{const i=await F.getBoards(e.filterBy);t({type:"setBoards",boards:i}),N.off("board update"),N.on("board update",r=>{var n;r._id===((n=e.currentBoard)==null?void 0:n._id)&&(console.log(r),t({type:"setCurrentBoard",board:r}))})}catch(i){console.log(i)}},async saveBoard({getters:t,commit:e},{board:i,activity:r}){i._id||(i.createdBy=t.miniUser,i.members=[t.miniUser]);try{const n=JSON.parse(JSON.stringify(i));return e({type:"saveBoard",board:n}),await F.saveBoard(i)}catch(n){console.log(n)}},async removeBoard({commit:t},{boardId:e}){try{await F.removeBoard(e),t({type:"removeBoard",boardId:e})}catch(i){console.log(i)}},async setCurrentBoard({commit:t},{boardId:e}){try{const i=await F.getBoardById(e);t({type:"setCurrentBoard",board:i})}catch(i){console.log(i)}},async setBoardPrefs({state:t,commit:e,dispatch:i},{key:r,val:n}){try{if(r==="members"){const s=O.getLoggedinUser(),c=n[n.length-1],l=F.addActivity(`${s.fullname} invited you to board ${t.currentBoard.title}`,s,{type:"board",_id:t.currentBoard._id},t.currentBoard._id);l.toMember=c,N.emit("activity notify",{activity:l,boardMembers:t.currentBoard.members})}e({type:"updateBoard",key:r,val:n}),await i({type:"saveBoard",board:t.currentBoard})}catch(s){console.log(s)}},async addGroup({state:t,commit:e,dispatch:i},{groupTitle:r}){try{const n=F.getEmptyGroup(r);console.log(n),e({type:"addGroup",group:n}),await i({type:"saveBoard",board:t.currentBoard})}catch(n){console.log(n)}},async setGroups({state:t,commit:e,dispatch:i},{groups:r}){try{e({type:"setCurrGroups",groups:r}),await i({type:"saveBoard",board:t.currentBoard})}catch(n){console.log(n)}},async removeGroup({state:t,commit:e,dispatch:i},{groupId:r}){try{e({type:"removeGroup",groupId:r}),await i({type:"saveBoard",board:t.currentBoard})}catch{console.log(err)}},async setGroup({state:t,commit:e,dispatch:i},{groupIdx:r,newGroup:n}){try{e({type:"setGroup",groupIdx:r,newGroup:n}),await i({type:"saveBoard",board:t.currentBoard})}catch(s){console.log(s)}},async setTask({commit:t,state:e,dispatch:i},{groupId:r,task:n,action:s}){try{t({type:"setTask",groupId:r,task:n,action:s}),await i({type:"saveBoard",board:e.currentBoard})}catch(c){console.log(c)}},async removeTask({commit:t,state:e,dispatch:i},{task:r}){try{const n=e.currentBoard.groups.findIndex(s=>s._id===r.groupId);t({type:"removeTask",task:{groupIdx:n,taskId:r.taskId}}),await i({type:"saveBoard",board:e.currentBoard})}catch(n){console.log(n)}}}},Xd={state:{loggedinUser:O.getLoggedinUser(),allUsers:[]},getters:{user(t){return t.loggedinUser},getAllUsers(t){return t.allUsers},miniUser({loggedinUser:t}){return t?{_id:t._id,fullname:t.fullname,username:t.username,imgUrl:t.imgUrl}:void 0}},mutations:{setLoggedinUser(t,{user:e}){e?N.emit("set-user-socket",e._id):N.emit("unset-user-socket"),t.loggedinUser=e,console.log(e)},setUsers(t,{users:e}){t.allUsers=e}},actions:{async loadUsers({commit:t,state:e}){try{const i=await O.getUsers();t({type:"setUsers",users:i})}catch(i){throw console.log(i),i}},async login({commit:t},{cred:e}){try{const i=await O.login(e);t({type:"setLoggedinUser",user:i})}catch(i){throw console.log(i),i}},async signup({commit:t},{cred:e}){try{const i=await O.signup(e);t({type:"setLoggedinUser",user:i})}catch(i){throw console.log(i),i}},async logout({commit:t}){try{await O.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log(e),e}}}};const Wd=Oe({strict:!0,state:{isHomePage:!1},getters:{isHomePage({isHomePage:t}){return t}},mutations:{setHomePage(t,{isHome:e}){t.isHomePage=e}},actions:{},modules:{boardStore:qd,userStore:Xd}});const Kd={mounted:t=>{t.focus()}},Z=Fe(ls).component("avatar",pe);Z.directive("focus",Kd);const ec={clientId:"259143911327-0c53jftjilthpbel1ctuab58cef805bk.apps.googleusercontent.com",prompt:"consent"};Z.use(Ne,ec);Z.use(Ge);Z.use(zd);Z.use(Wd);Z.use(Re);Z.use(Pe);Z.use(Ze);Z.use(Je,{load:{key:"AIzaSyDxg1BG-_6y4c06PrVYvHH76q51dKWkOGs"}});Z.mount("#app");
