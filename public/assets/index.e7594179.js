var Ce=Object.defineProperty;var ae=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var le=(t,e,i)=>e in t?Ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,de=(t,e)=>{for(var i in e||(e={}))Ie.call(e,i)&&le(t,i,e[i]);if(ae)for(var i of ae(e))Te.call(e,i)&&le(t,i,e[i]);return t};import{_ as g,r as p,o as a,c as l,a as o,b as k,w as G,d as y,e as me,t as f,f as R,n as x,g as m,F as I,h as B,i as C,U as we,j as Be,k as L,l as _,v as S,m as A,p as z,q as Me,D as he,s as ee,u as W,x as Ee,y as H,z as Se,C as xe,A as Ue,B as Le,E as De,G as Oe,H as pe,T as Fe,I as ce,J as Re,K as Ne,L as Ge,M as $e,N as Pe,O as Je,P as Ze}from"./vendor.d6116195.js";const je=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}};je();const te="auth",se="loggedinUser",F={login:Ye,signup:Ve,logout:ze,getLoggedinUser:oe,getUsers:He,getUserById:Qe,getGuestUser:We,addRecentBoard:qe,update:Xe,saveLocalUser:q};function He(){return P.get("user")}async function Qe(t){return await P.get(`user/${t}`)}async function Ye(t){const e=await P.post(te+"/login",t);if(e)return q(e)}async function Ve(t){const e=await P.post(te+"/signup",t);return q(e)}function ze(){return sessionStorage.removeItem(se),P.post(te+"/logout")}function qe(t){const e=oe();if(e.recentBoards.includes(t)){const i=e.recentBoards.findIndex(n=>n===t);e.recentBoards.splice(i,1)}return e.recentBoards.unshift(t),e.recentBoards=e.recentBoards.slice(0,5),q(e)}async function Xe(t){console.log(t);try{return t=await P.put(`user/${t._id}`,t),oe()._id===t._id&&q(t),t}catch(e){console.log("Failed to update user",e)}}function We(){return{fullname:"Guest",username:"guest",password:"guest"}}function q(t){return sessionStorage.setItem(se,JSON.stringify(t)),t}function oe(){return JSON.parse(sessionStorage.getItem(se)||"null")}var Ke="data:image/png;base64,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",et="/assets/hero.f5b958c8.png",tt="/assets/board.557c42ca.png",st="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAj4AAAA1CAIAAADOCHYRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA9BSURBVHhe7Zy96m1JEcV9Cx9insFAjQcZJpMBTUUdM7loNLFfkclNhAmMJxMEwUSQwUCMFIwMZUTf4LrmrDqLdat6997n3P/52OfUj8Vhd3V1dXV17933Xj++8qZpmqZpdkVfXU3TNM3O6KuraZqm2Rl9dT0Xf/r8b1S074mf/fq3X33vfeg+02ua5n7oq+spwGWAi+GD7/6EdwMFS3TfAcjwPhNrmuYOeaerix9EV/95+a7gBulKqAq/O8Dz7FPUNM2cM68ufGjSH+Fd6A2/XfHt733yre+8osK0W+qlhf2ChXJ7DLg1Ok54CFPTNM0CJ19d6cM3ETxjzE7A1cXMv/7BD8O0Q3BppT9V8NKK7iPqjfZNQc7KZ3fHpmma63Pa1bV0b6VvpStG7oEHuLrSBmFflv7xTT7Rvimedv9rYfPM8N9LoH4R5pxwdQ3/LJ/qC4u7oRkde2DXVxc2QmWn5sWXW7RvipLB4QlT0zwNeFX1CgzV11hl69WVirv6iYHPvu4tsNOrC8e6/qli9azLM9q3wy/dfkWbpyK9uUsK78bYdHX5xwV61O/LHq+u+ue1LX9i0Ibew9WlJdxDMi8CystPUrQPFiwTRvxu2aDm4Ukf1Yn28l5c+V7YdHXxPdxXHc9gd1eXPvoUtmbj6dGGXvm0DVH+j/FN908SV+Svj9ubp2X7vQXVTy6G10NFhceIpVH8CKSPyUT0J3jGwBQWzeEJr57Uea/DpqvLpwnTI7Kjq6ueQjT9SM3RqO1DLgQSuJ9k3p26HN8mf36AxTbnsf2SoPzL7gdsovA+sjoKJzN9T5YEN8WcD6EbWPWkTn0j1q8uX/ap0ecgGoSNkaJjDYxCLU4dAmeOClNh9eo6Y95LgDS0IxSyir5taGC0bwcqed4S7hCtBcIewYJFaXW00O0BFtucR315Xemc0MivDew6TlvEIMCP5ZJef/pZsiyJR3dLJpx9vt4krnQj61eXZxmml2CpoJPsJ5sXHiOGE8HodnouXV1L83IXr0xdzqlp+GEK0wHYJ8W/ECrs9ad+WXxfUElYtDRuEMt+9plBfInxE9y+iQ+mHg4cpsRso2HADn8Xp4vuI8mHkhtTpQXyrNxfDtFnLKUntk8hRfeFQTI8FUlIwJMUTJ7rPUlc0ZaBLFEyLgmeiJyMVZx9e1gJQw7rXmf96vK4YSqwuHOF68F5dfHhaqxWoa55y0QU/YdXF4LIbajwuwq1CNt3WqgmeODWeFg0w+/yeG1fat5r5i9qAb3IaGqlasphyw7CGYInhVFpmYyffPAb3QeW5oI9ngymV/05EaeQYElBqg+FrnmqdSAsEHvFUnqAtfX4yblOQbH3onDtQ6ErnAqTUXNhUVx7MkbcY63wUN2WtOQJu0/Hkqr3JDG3VV7s6nK3ocL17TLhmWuu6wzvAzU+RyUjLDHggE8EDYdQ9K9XV5pX2boxTXpRfN6zp05BksLpKqiSqGqYNqOx0T6A/YKdv2G6PMoEwtSw6OBxXe7w+tPP1OviwCE8hNE44v50qEuG0Qs79AHD4DAuzVuNAEa3D30Iuup2azno1bOA0TNnDqxqmAwEh1IQNDXpcNR18JPgqgVxhqPSEDSTA/TxT3+VLNLwJIDhXComK59Uq40gQ08oeaZeKvrWuPbV5aWpG7bU6xuTFg/UBYXp7ZTqROqiaKxXl+eDZxqJd4Xp8mhGKOWzkaWdQokQsNb2omhbT12LryJMByN/3XhpdAywFiagRfHU+TlZureoQ7wx817E5FwVH4jnYZ1rcLjRsw5ZKi/XFY1pwjWmg16W0YG/B0ST662hkueQVYfLsbT7k4KA5AwNtzv5QJOrS0pT1wx9rmH+0fc23IikpZ1Nir41rnd1MW81h9UHcoBo8eUN93joIMv2idLV5YtK86LLd3FpihdHKQ3rMCflDKGJONyXVTa6nYQyWQ0OB18ynjU2TMcM0bV9Ue8IZmEOqCRnVIV5JDxPv7fYS2T0BSZWe+Op4AOXgqThXJSKOeyNhoFV+KKGPoTrXVqOpnY8+Dw9ND2NIWnINeHahwqPwvD6qSViWZJQn8mMkvZiKQh7QeqClqpd5x16cgeTom+Nl7m6lvBa0KJmrb6QD5ta3lKZgCpFH5/XS+941WiZXF10AMPdnSR2c5AwVqr6zHOmcxWHh9M7wPh6rpnAWFOl3A1BZA/TAQZnzrRcFKXB6ZQ5U1UvNLy36ICHZK+oVlBaGruiUdAUoI4laTh8PJM0qk4HC2fBQ5gOoxAkKfqsMjCmlFIcwBllnKdXh1c4b1L0XRgtfKhwOkLnjVfXMDLdsLpkr2IQljrJ50pdVPS9TZ10WOSNbkPWry5wRlzimaHppaHDkOSjpp/RhO8cmj6Rl95JQ0C6uuSAVSDIsMpLwe+HmjaVMh8e/aRwnYKwCAVF+wjsKZpmpHN1SPKY7lwXkiyXQ0vAs1JCwdFU2fEwubdoYa+6JmAUnb0aaMZTgcH5nEYJH85VeAE5YzQWtgkOqeYwYmBS9B2hMS2H0dhVe0Fq4hmWaBx6UyYVRkiKvguDiTD7SRoWPCW8tCnRfQRuSwnQofamIKmXSsmgSSU3KDyOcHOTVrdPnHZ1QWHahkaxBL4eOgyRD4uSmkNS5C0T+X7TsnR1VWE520t8W5QwllOXTNw+1Mb1pjhhLXZEo9hkZDXxgFTVpCXNnrYGzei4LkpDtUWqsPta5vcWBIfUuwqHR+OwxfF0BBbWBA8qHSzDKXw4I8PN5Q5cZjRKJmJoXMKD4AFNF+0ETTjU9OTGXj4vobluAmbfLqyFBV8Slz8UBmpszH3YvjpEFUt2KNU/9brgqciYhTs1FNyW0lYmW9h0daWZwrqGF105ycLmEPkggjcnC1Ol6ONTM0jFi0vLlqsLRjrvBSSsCmgfUyW10qVabcFrTkWHzevVo0WZsAmt5lAngm61L0qAaePXi7x6b7n/SUuAfzwdyxuNA5yCv2E61i0aR5IRoaoYig41CB2icaRa5sAfkf1hiGclYQh+6TBcY+LU3F4WZrhRLDv38SRhlu0TseBDf3Y5yWGo7Z4ubeJGNl1dwOfQOZ6QChFWi7MUxAfS4jtHS4UnGNL6NWRpohp28p91IWzdxd2h5UxOJMpSFU5HMBxG1ETV9lpJqUvOQEYFxwMtUp2XIA56uSPuH93XpaZNMT2mymb1HzpU6BONAwwSjQMMEo1DeTkqhYXFq8oC4lfNYRp0q88ClmSsPgJdaWd9OXhQPonh1MTteIbmU/DhVnAhW6RSJPtcHMUlr0qFGvqzy0kOQ9FzYwLU5PwvsfXqAmmypRMGUtKqDnB7mIy0qTR6NA8lhg6yQLQ4w4nS1QXkANHiMEg07h5fcpjehh+7oVRVPCQ3NBXZu3QWtTtwowVoiCIDzzApPEq0YfAroxwk1kTVUCl8gUOHJTQFHjiqrlc+dMAvp4M9PA7QR3G8F5bkLOTJmDQ6KRSbVejCL3ohTsdndnFgXRqZpAe7d3lYLhO/Ckt7FXuvBhObK1wPbPGHD525TavyUtf4ipZArZKnK41KvVXwZxoIi4elSSsnXF01Y245J8YvhGYqQU3Fe+Ef1lJuhiUeMwWcdMkOebQ0EUR7vbrSkmkkHsSD3y0qVKpSAmtJJeUeud0dJIZVl2oiBzaJCjssXYrPyECjlJI3bw7S0HKUqpJXthCetUY5rIKYVLRHILKnAfyZKE7qmkRmWD4P3dwB4Hmo6D6wZKwJk0kXSHEAU6qjaKyK7qtTTzs0KYI7UxP/5ElVfzSTDzSvCXqZqvzZrJkMg1dn7sJ8UueEqwsgbspgLiQXIw0Yk1tVHZgchkpV254t/evVBbZku73cN0TZ1rOV4JLxq3V5JWmsZWFY2Q/jvoRN2KN9QAGjbSCOguBB2WqIQsmyuqLrw9yUKjJkqszWF0iHpmlO4rSri+jFmwg+/MYN0UdnqKWByc2F6Ybfry2pQnQeXl1AbkNNlnk/eMHDtIAqxmb6zqrItEgqgixsgmoBaRaRPvFhHd1bYJgqn28LsvVTkRaltO8k2+ZqfPGf//3jn/+6hHCuKE601Bwa2QQnWdyemiQZUxPIIkXHNs65ugBfTr2QLryQ/t5O0DvsY+cLqEOg1U9A8ocwi/LXcFxd733tIyhdXURjpdVs7wfPOUwLyNNLBKU9lR3ymDJG27ZMESZh1aWYSEMRUvI0upLDrVA+WI6ShyZraZ6Bv/z17zoML6t/f/FfPvBc6ZjhGadOXXpIPumgQnwx1cQzkUV2vbOyAI+WLPpmphnRpH0jZ15dDr9xkHI6lfPGvuMQVfzUkp29zFuBhHU+wrSMPCXUpy7ZHcJ0QEYeCVhUZxrTeXVxSDJKdZuq851sTcqKQm5a+6lHrnkMdHX94NUvX0oM+Ls//JkPUHrfdepk52vCZ2jppZO/jqtb+LYqOJ/p6QlAHCtPNoEcGIpZbecFrq6dgmKpcGF6UHREeLDmyHk+hNVDbzpwqipFo07tRJoo2anJscaMNY2b43VgepCa4dQ8Gbq6vv/qFy8lBvzk57/hA+Svm04dXxPZpeSMJNXU/1heL5c74zm97Gi6mzvD6M9EFnhCYd3Mw15dKLcqGCZDOwqp4g+Jr1RHcA5POX43+icwkErDeUDdCB9klYxA9hqkafbL5f7B8P2Pfsy3RsLr47+YXV2ub374MR/oAzgE+saHP+KD3kE2Jdgh+VNKA10y+liG8l63b+dhry7fSO0K8XKnrsfDD1aYmqa5Eb//4+cXEoLrTcdb7y8+vnjei2fdHH6F4JvpH0a3Q8mTFrh5ly7CpOFYNhkB+rI6p/DI/2CoYkm+H9QZJdsR6cSEtWmaG6H38cXlwfGM953P+OgdZo5eNvUlxLM8Jfoko39MqPT/ao9R+osaYnrY4RTJ8mWKp/Dg/1lXqk4Sd+iB8fMRpqZpbge/6ZcQrhY9YyI1OS9gE3Y9116IDm6hhpY0qT977+tPP1PXkjhkO4//X9Oo1zulHXpUsEAt9uEv6aZpnorHv7oELnZ8wR/+xhJ+Zz/PqpumeQae6Op6NnRv9V+5mqZ5MPrqelj4t66n+otm0zRPQl9dTdM0zc7oq6tpmqbZGX11NU3TNDujr66maZpmZ/TV1TRN0+yMvrqapmmandFXV9M0TbMz+upqmqZpdkZfXU3TNM3O6KuraZqm2Rl9dTVN0zQ7o6+upmmaZmf01dU0TdPsijdv/g/v2IQ5uU7KngAAAABJRU5ErkJggg==",ot="/assets/view.2368c9e9.svg",it="/assets/card-back.208a67eb.svg";const rt={name:"home-page",methods:{async moveToBoards(){await this.$store.dispatch({type:"login",cred:F.getGuestUser()}),this.$router.push("/board")},setHomePage(t){this.$store.commit({type:"setHomePage",isHome:t})}},created(){this.setHomePage(!0)},unmounted(){this.setHomePage(!1)},computed:{isHomePage(){return this.$store.getters.isHomePage}},components:{}},nt={class:"home-container"},at={class:"hero"},lt=o("div",{class:"logo"},[o("img",{src:Ke,width:"25px",height:"25px",alt:""}),o("h1",null,"Drello")],-1),dt={class:"auth-btns"},ct={class:"btn login"},ut=y("Log in"),mt={class:"btn signup"},ht=y("Sign up"),pt={class:"info-container info-1 home-layout"},gt=o("h1",null,"Drello helps teams move work forward.",-1),bt=o("p",null," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique accomplish it all with Drello. ",-1),_t=o("img",{class:"hero-img",src:et,alt:""},null,-1),kt=me('<main class="home-layout"><section class="info-container info-2"><h2>It&#39;s more than work. It&#39;s a way of working together.</h2><p> Start with a Drello board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit all in one place. </p></section><section class="info-container info-3"><img src="'+tt+'" class="board-img" alt="board"><p>Join over 1,000,000 teams worldwide that are using Drello to get more done.</p><img src="'+st+'" class="trello-partners"></section><section class="info-container info-4"><h2>Features to help your team succeed</h2><p> Powering a productive team means using a powerful tool (and plenty of snacks). From meetings and projects to events and goal setting, Drello\u2019s intuitive features give any team the ability to quickly set up and customize workflows for just about anything. </p></section><section class="info-container info-5"><img src="'+ot+'" alt="view"><section><h5>CHOOSE A VIEW</h5><h2>The board is just the beginning</h2><p> Lists and cards are the building blocks of organizing work on a Drello board. Grow from there with task assignments, timelines, productivity metrics, calendars, and more. </p></section></section><section class="info-container info-6"><section><h5>DIVE INTO THE DETAILS</h5><h2>Cards contain everything you need</h2><p> Drello cards are your portal to more organized work\u2014where every single part of your task can be managed, tracked, and shared with teammates. Open any card to uncover an ecosystem of checklists, due dates, attachments, conversations, and more. </p></section><img src="'+it+'" alt="card-back"></section></main>',1);function ft(t,e,i,n,r,s){const d=p("router-link");return a(),l("section",nt,[o("section",at,[o("header",null,[lt,o("div",dt,[o("div",ct,[k(d,{to:"/login"},{default:G(()=>[ut]),_:1})]),o("div",mt,[k(d,{to:"/signup"},{default:G(()=>[ht]),_:1})])])]),o("section",pt,[o("section",null,[gt,bt,o("button",{class:"btn-primary",onClick:e[0]||(e[0]=(...c)=>s.moveToBoards&&s.moveToBoards(...c))},"Try live demo")]),_t])]),kt])}var vt=g(rt,[["render",ft]]);const yt={name:"workspace",data(){}},At={class:"workspace-filter-container"};function Ct(t,e,i,n,r,s){return a(),l("section",At)}var It=g(yt,[["render",Ct]]);const Tt={name:"board-preview",emits:["toggleFavorite"],props:{board:Object},methods:{toggleFavorite(t){this.$emit("toggleFavorite",t)}},computed:{boardStyle(){return{"background-color":this.board.style.bgColor?this.board.style.bgColor:"","background-image":this.board.style.bgImg?`url(${this.board.style.bgImg})`:""}},user(){return this.$store.getters.user},starTxt(){var n;const t=(n=this.user.favorites)==null?void 0:n.includes(this.board._id);return`Click to ${t?"unstar":"star"} this board. It will be ${t?"removed from":"added to"} your starred list.`}}},wt={class:"preview-content"},Bt=["title"],Mt={key:0,class:"fa-regular fa-star white-font empty-star"},Et={key:1,class:"fa-solid fa-star"},St=o("div",{class:"small-overlay"},null,-1);function xt(t,e,i,n,r,s){var d;return i.board?(a(),l("li",{key:0,style:x(s.boardStyle)},[o("div",wt,[o("h2",null,f(i.board.title),1),o("section",{class:"star",onClick:e[0]||(e[0]=R(c=>s.toggleFavorite(i.board._id),["stop"])),title:s.starTxt},[(d=s.user.favorites)!=null&&d.includes(i.board._id)?(a(),l("i",Et)):(a(),l("i",Mt))],8,Bt)]),St],4)):m("",!0)}var Ut=g(Tt,[["render",xt]]);const Lt={name:"board-list",emits:["toggleFavorite"],props:{boards:Array},data(){return{}},created(){},methods:{moveToBoard(t){this.$router.push(`/board/${t}`)},toggleFavorite(t){this.$emit("toggleFavorite",t)}},components:{boardPreview:Ut}};var ge=new Image;ge.onload=()=>{};ge.src="img/1.jpg";const Dt={class:"board-list"};function Ot(t,e,i,n,r,s){const d=p("board-preview");return a(),l("ul",Dt,[(a(!0),l(I,null,B(i.boards,c=>(a(),C(d,{onToggleFavorite:s.toggleFavorite,board:c,key:c,onClick:u=>s.moveToBoard(c._id),title:c.title},null,8,["onToggleFavorite","board","onClick","title"]))),128))])}var Ft=g(Lt,[["render",Ot]]);const Rt={name:"workspace",async created(){await this.$store.dispatch({type:"loadBoards"})},methods:{async toggleFavorite(t){const e=JSON.parse(JSON.stringify(this.user));e.favorites||(e.favorites=[]);const i=e.favorites.findIndex(n=>(console.log(n),console.log(t),n===t));i===-1?e.favorites.push(t):e.favorites.splice(i,1),await this.$store.dispatch({type:"updateUser",user:e})}},computed:{user(){return this.$store.getters.user},boards(){return this.$store.getters.boards},starredBoards(){return this.boards.filter(t=>t.isFavorite)},otherBoards(){return this.boards.filter(t=>!t.isFavorite)},recentBoards(){return this.boards.length?this.user.recentBoards.map(t=>this.boards.find(e=>e._id===t)):[]},userFavoriteBoards(){var e;return this.user.favorites||(this.user.favorites=[]),((e=this.user)==null?void 0:e.favorites.map(i=>this.boards.filter(r=>r._id===i))).flat()}},components:{workspaceFilter:It,boardList:Ft}},Nt={class:"workspace-container main-layout"},Gt=o("h2",null,"Workspace",-1),$t=o("h3",null,[o("span",{class:"icon-member"}),y("Starred Boards")],-1),Pt={key:1},Jt=o("h3",null,[o("span",{class:"icon-time"}),y("Recent Boards")],-1),Zt=o("h3",null,[o("span",{class:"icon-members"}),y("All boards in this Workspace")],-1);function jt(t,e,i,n,r,s){var c;const d=p("board-list");return a(),l("section",Nt,[Gt,$t,(c=s.user.favorites)!=null&&c.length?(a(),C(d,{key:0,onToggleFavorite:s.toggleFavorite,boards:s.userFavoriteBoards},null,8,["onToggleFavorite","boards"])):(a(),l("h2",Pt,"No favorite boards yet...")),Jt,k(d,{onToggleFavorite:s.toggleFavorite,boards:s.recentBoards},null,8,["onToggleFavorite","boards"]),Zt,k(d,{onToggleFavorite:s.toggleFavorite,boards:s.boards},null,8,["onToggleFavorite","boards"])])}var Ht=g(Rt,[["render",jt]]);const Qt={components:{Datepicker:we},data(){return{date:Be(Date.now())}},methods:{updateStatus(){var t="";Date.parse(this.date)<Date.now()&&(t="overdue");const e={type:"status",item:t};this.$emit("addItem",e)},saveDueDate(){const t={type:"dueDate",item:Date.parse(this.date)};this.$emit("addItem",t),this.updateStatus()}}},Yt={class:"date-item"};function Vt(t,e,i,n,r,s){const d=p("Datepicker");return a(),l("section",Yt,[k(d,{class:"date-picker",modelValue:r.date,"onUpdate:modelValue":e[0]||(e[0]=c=>r.date=c),inline:"",autoApply:""},null,8,["modelValue"]),o("button",{onClick:e[1]||(e[1]=(...c)=>s.saveDueDate&&s.saveDueDate(...c)),class:"save"},"save")])}var zt=g(Qt,[["render",Vt]]);const qt={name:"color-picker",props:{importedColors:Array,bgImg:String},data(){return{currColor:"",colors:[{color:"rgb(0, 121, 191)",title:""},{color:"rgb(210, 144, 52)",title:""},{color:"rgb(81, 152, 57)",title:""},{color:"rgb(176, 70, 50)",title:""},{color:"rgb(137, 96, 158)",title:""},{color:"rgb(205, 90, 145)",title:""},{color:"rgb(75, 191, 107)",title:""},{color:"rgb(0, 174, 204)",title:""},{color:"rgb(131, 140, 145)",title:""},{color:"#f5dd29",title:""}]}},methods:{updateColor(t){this.selectedColor=!0,this.currColor=t,this.$emit("updateColor",t,"bgColor")}}},Xt={class:"color-picker"},Wt=["title","onClick"],Kt={key:0,class:"icon-complete"};function es(t,e,i,n,r,s){return a(),l("section",Xt,[(a(!0),l(I,null,B(r.colors,d=>(a(),l("div",{title:d.title,style:x({"background-color":d.color}),key:d.title,onClick:c=>s.updateColor(d.color)},[r.currColor===d.color&&!i.bgImg?(a(),l("span",Kt)):m("",!0)],12,Wt))),128))])}var K=g(qt,[["render",es]]);function ts(t=8){var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function ie(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}const J={makeId:ts,debounce:ns,getRandomInt:ie,getRandomColor:is,getRandomWord:os,isDarkColor:rs,getLoremIpsum:ss,loadFromStorage:as,saveToStorage:ls,loadFromSessionStorage:ds,saveToSessionStorage:cs};function ss(t=5){const e=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"];let i="";for(;t>0;)i+=e[ie(0,e.length-1)]+" ",t--;return i.trim()}function os(t=5){let e=["Animal","Africa","Moscow","Ukraine","Space","Motorcycle","Yamaha","Life","Business","Nature","Colorful","Productivity","Gaming"],i=[];for(var n=0;n<t;n++){let r=ie(0,e.length-1);i.push(e[r]),e.splice(r,1)}return i}function is(){for(var t="#",e=0;e<6;e++)t+=Math.floor(Math.random()*10);return t}function rs(t){t=t.substring(1);const e=parseInt(t,16),i=e>>16&255,n=e>>8&255,r=e>>0&255;var s=.2126*i+.7152*n+.0722*r;return s<100}function ns(t,e){let i;return function(...r){const s=()=>{clearTimeout(i),t(...r)};clearTimeout(i),i=setTimeout(s,e)}}function as(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}function ls(t,e){localStorage[t]=JSON.stringify(e)}function ds(t){var e=sessionStorage.getItem(t);return e?JSON.parse(e):null}function cs(t,e){sessionStorage[t]=JSON.stringify(e)}const us={props:["board"],data(){return{filterBy:{title:""},isCreating:null,isEditing:null,title:"",color:"",currentLabelId:""}},computed:{userLabelIds(){var t;return(t=this.$store.getters.currTask)==null?void 0:t.labelIds},relevantLabels(){let t=JSON.parse(JSON.stringify(this.boardLabels));const e=new RegExp(this.filterBy.title,"i");return t.filter(i=>e.test(i.title))},boardLabels(){return JSON.parse(JSON.stringify(this.board.labels))}},methods:{removeLabel(){var t=this.boardLabels.findIndex(i=>i._id===this.currentLabelId);this.boardLabels.splice(t,1);const e={type:"labels",item:{_id:this.currentLabelId,isDelete:!0}};this.$emit("updateLabels",this.boardLabels,e)},updateCurrData(t){this.isCreating=!0,this.isEditing=!0,this.currentLabelId=t._id,this.title=t.title,this.color=t.color},updateColor(t){this.color=t},setLabel(){if(!this.color)return;var t=this.currentLabelId||J.makeId();const e={type:"labels",item:{color:this.color,title:this.title,_id:t}};if(this.currentLabelId){var i=this.boardLabels.findIndex(r=>r._id===this.currentLabelId);this.boardLabels.splice(i,1,e.item)}else this.boardLabels.push(e.item);var n=this.boardLabels;this.$emit("updateLabels",n,e),this.currentLabelId=""},addLabel(t){const e={type:"labels",item:{_id:t}};this.$emit("addItem",e)}},components:{colorPicker:K}},ms={key:0,class:"labels-item"},hs=o("h3",null,"Labels",-1),ps=["onClick"],gs={key:0,class:"icon-complete"},bs=["onClick"],_s={key:1},ks=o("h3",null,"Name",-1),fs=o("h3",null,"Select a color",-1),vs={class:"labels-actions flex space-between"};function ys(t,e,i,n,r,s){const d=p("color-picker"),c=L("focus");return i.board&&!r.isCreating?(a(),l("div",ms,[_(o("input",{type:"text",placeholder:"Search labels...",class:"label-item-input","onUpdate:modelValue":e[0]||(e[0]=u=>r.filterBy.title=u)},null,512),[[c],[S,r.filterBy.title]]),hs,o("ul",null,[(a(!0),l(I,null,B(s.relevantLabels,u=>{var h;return a(),l("li",{class:"label",key:u._id},[o("div",{class:A(["label-hover",{"hover-marker":null}]),style:x({"background-color":u.color})},null,4),o("span",{onClick:T=>s.addLabel(u._id),style:x({"background-color":u.color}),class:"label-txt"},[y(f(u.title)+" ",1),(h=s.userLabelIds)!=null&&h.includes(u._id)?(a(),l("span",gs)):m("",!0)],12,ps),o("span",{onClick:R(T=>(s.updateCurrData(u),(r.isCreating=!0)(r.isEditing=!0)),["stop"]),class:"edit-labels"},null,8,bs)])}),128))]),o("button",{onClick:e[1]||(e[1]=u=>(s.setLabel(),r.isCreating=!0)),class:"create-label-btn"},"Create a new label")])):(a(),l("section",_s,[ks,_(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>r.title=u),class:"label-item-input"},null,512),[[S,r.title],[c]]),fs,k(d,{onUpdateColor:s.updateColor},null,8,["onUpdateColor"]),o("div",vs,[o("button",{class:"save create flex",onClick:e[3]||(e[3]=u=>s.setLabel())},"Save"),r.isEditing?(a(),l("button",{key:0,class:"delete-label flex",onClick:e[4]||(e[4]=(...u)=>s.removeLabel&&s.removeLabel(...u))},"Delete")):m("",!0)])]))}var As=g(us,[["render",ys]]);const Cs={props:{board:Object,task:Object},data(){return{filterBy:{name:""}}},methods:{addMember({fullname:t,username:e,imgUrl:i,_id:n}){const r={type:"members",item:{fullname:t,username:e,imgUrl:i,_id:n}};this.$emit("addItem",r)}},computed:{getRelevantUsers(){let t=JSON.parse(JSON.stringify(this.boardMembers));const e=new RegExp(this.filterBy.name,"i");return t.filter(i=>e.test(i.fullname))},boardMembers(){return this.board.members},currTask(){return this.task},currTaskMembersIds(){var e;let t=(e=this.currTask)==null?void 0:e.members;return t?t.map(i=>i._id):[]}}},Is={key:0,class:"members-item"},Ts=o("h3",null,"Board members",-1),ws=["onClick"],Bs={class:"member-container flex align-items justify-center"},Ms={class:"avatar"},Es={class:"name"},Ss={key:0,class:"icon-complete"};function xs(t,e,i,n,r,s){const d=p("avatar");return i.board?(a(),l("section",Is,[_(o("input",{type:"text",placeholder:"Search members",onInput:e[0]||(e[0]=(...c)=>t.findMembers&&t.findMembers(...c)),"onUpdate:modelValue":e[1]||(e[1]=c=>r.filterBy.name=c)},null,544),[[S,r.filterBy.name]]),Ts,o("ul",null,[(a(!0),l(I,null,B(s.getRelevantUsers,c=>(a(),l("li",{key:c._id,class:"member flex align-items space-between",onClick:R(u=>s.addMember(c),["stop"])},[o("div",Bs,[o("div",Ms,[k(d,{size:32,color:"white",name:c.fullname},null,8,["name"])]),o("span",Es,f(c.fullname),1)]),s.currTaskMembersIds.includes(c._id)?(a(),l("span",Ss)):m("",!0)],8,ws))),128))])])):m("",!0)}var Us=g(Cs,[["render",xs]]);const Ls={name:"checklist-popup",data(){return{checklistTitle:""}},methods:{addCheckList(){this.checklistTitle||(this.checklistTitle="Checklist");const t={_id:J.makeId(),title:this.checklistTitle,todos:[]};this.$emit("addItem",{type:"checklist",item:t})}}},Ds={class:"checklist-popup flex column"},Os=o("label",{for:"checklist-input"},"Title",-1);function Fs(t,e,i,n,r,s){const d=L("focus");return a(),l("section",Ds,[Os,_(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>r.checklistTitle=c),id:"checklist-input",placeholder:"Checklist"},null,512),[[d],[S,r.checklistTitle]]),o("button",{class:"save",onClick:e[1]||(e[1]=(...c)=>s.addCheckList&&s.addCheckList(...c))},"Add")])}var Rs=g(Ls,[["render",Fs]]);const re=async t=>{const e="ssrtedsh",n="https://api.cloudinary.com/v1_1/dkqvblbeq/image/upload",r=new FormData;r.append("file",t),r.append("upload_preset",e);try{return(await z.post(n,r)).data}catch(s){console.error("ERROR!",s)}};var be="/assets/loader.1cadbea4.svg";const Ns={name:"attachment-item",data(){return{isLoading:!1,isDragOver:!1,attachment:{createdAt:null,fileName:null,url:null,type:"image",id:J.makeId()},imgUrl:""}},methods:{handleFile(t){let e;t.type==="change"?e=t.target.files[0]:t.type==="drop"&&(e=t.dataTransfer.files[0]),this.onUploadImg(e)},async onUploadImg(t){this.isLoading=!0;const e=t.name,i=await re(t);this.setAttachment(i.url,e);const n={type:"attachment",item:JSON.parse(JSON.stringify(this.attachment))};this.$emit("addItem",n),this.isLoading=!1,this.$emit("closePopup")},async AddAttachment(){const t=this.imgUrl.substring(this.imgUrl.lastIndexOf("/")+1);this.setAttachment(this.imgUrl,t);const e={type:"attachment",item:JSON.parse(JSON.stringify(this.attachment))};this.$emit("addItem",e),this.$emit("closePopup")},setAttachment(t,e){this.attachment.createdAt=Date.now(),this.attachment.url=t,this.attachment.fileName=e}}},Gs={class:"attachment-item"},$s=o("h3",null,"Choose an image or drag it here",-1),Ps=[$s],Js={key:1,src:be,alt:""},Zs=o("label",{class:"attach-link",for:"attach-link"},"Attach a link",-1);function js(t,e,i,n,r,s){const d=L("focus");return a(),l("div",Gs,[r.isLoading?(a(),l("img",Js)):(a(),l("label",{key:0,for:"imgUploader",onDrop:e[0]||(e[0]=R((...c)=>s.handleFile&&s.handleFile(...c),["prevent"])),onDragover:e[1]||(e[1]=R(()=>{},["prevent"])),class:"drag-container"},Ps,32)),o("input",{hidden:"",type:"file",name:"img-uploader",id:"imgUploader",onChange:e[2]||(e[2]=(...c)=>s.handleFile&&s.handleFile(...c))},null,32),Zs,_(o("input",{"onUpdate:modelValue":e[3]||(e[3]=c=>r.imgUrl=c),type:"text",name:"",id:"attach-link"},null,512),[[S,r.imgUrl],[d]]),o("button",{onClick:e[4]||(e[4]=(...c)=>s.AddAttachment&&s.AddAttachment(...c))},"Attach")])}var Hs=g(Ns,[["render",js]]);const _e="Qe7xHRYFZ00Y7XpC8InL9Ffu0R6915MivLGckFh94wQ",Q={getImages:Qs,getRandomImages:Ys};async function Qs(t,e=12){const i=`https://api.unsplash.com/search/photos?query=${t}&per_page=${e}&client_id=${_e}`,n=await z.get(i);let{results:r}=n.data;return r=r.map(s=>({_id:s.id,full:s.urls.full,thumb:s.urls.thumb,sm:s.urls.small})),r}async function Ys(t=12){const e=`https://api.unsplash.com/photos/random/?client_id=${_e}&count=${t}`;let n=(await z.get(e)).data;return n=n.map(r=>({_id:r.id,full:r.urls.full,thumb:r.urls.thumb,sm:r.urls.small})),n}const Vs={name:"search-photo-item",props:["coverToEdit"],data(){return{keyword:"",suggSearches:J.getRandomWord(9),randPics:null}},async created(){this.randPics=await Q.getRandomImages(12)},methods:{async setPics(){this.randPics=await Q.getImages(this.keyword,12)},setImgUrl(t){this.$emit("setImgUrl",t)}}},zs={class:"search-photo-container"},qs=o("h4",null,"Suggested searches",-1),Xs={class:"suggested-searches"},Ws=["onClick"],Ks=o("h4",null,"Top photos",-1),eo={class:"cover-mini-photos"},to=["onClick"],so=["src"];function oo(t,e,i,n,r,s){const d=L("focus");return a(),l("section",zs,[_(o("input",{class:"inline-input",type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>r.keyword=c),placeholder:"Search for unsplash photos",onChange:e[1]||(e[1]=(...c)=>s.setPics&&s.setPics(...c))},null,544),[[d],[S,r.keyword]]),qs,o("div",Xs,[(a(!0),l(I,null,B(r.suggSearches,c=>(a(),l("button",{key:c,onClick:u=>(r.keyword=c,s.setPics())},f(c),9,Ws))),128))]),Ks,o("div",eo,[(a(!0),l(I,null,B(r.randPics,c=>(a(),l("div",{key:c._id,onClick:u=>s.setImgUrl(c.sm),class:A({"selected-type":c.sm===i.coverToEdit.imgUrl})},[o("img",{src:c.thumb,alt:""},null,8,so)],10,to))),128))])])}var io=g(Vs,[["render",oo]]),ro="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAApwAAAE1CAMAAAB9bsAsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+VpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmVkYTJiM2ZhYywgMjAyMS8xMS8xNy0xNzoyMzoxOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjMuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAzLTI1VDIyOjAzOjU2KzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMy0yNVQyMjowOSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMy0yNVQyMjowOSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDcwRUY5NTRBQzZGMTFFQ0I5MTlDRTcwNkFFRTJGODAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDcwRUY5NTVBQzZGMTFFQ0I5MTlDRTcwNkFFRTJGODAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNzBFRjk1MkFDNkYxMUVDQjkxOUNFNzA2QUVFMkY4MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNzBFRjk1M0FDNkYxMUVDQjkxOUNFNzA2QUVFMkY4MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvpfOHAAAABCUExURf///2t3jHyHmsfM1KqwvJqisW14jaivvHJ9ksbK0+jq7Y+YqLS6xH2Imvr6+6Gptt3g5JafrZyksu7v8oSOn/////HWvoAAAAAWdFJOU////////////////////////////wAB0sDkAAAEC0lEQVR42uzdXXKbMBhAUf8Dxo5jx93/VtvXTpPGAn2SAucsgMzIdxAQITa/oFEbQ4A4QZyIE8SJOEGcIE7ECeJEnCBOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeJEnCBOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeIEcSJOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeIEcSJOECfiBHGCOBEniBNxgjgRpyFAnCBOxAniRJwgThAn4gRxIk4QJ4gTcYI4ESeIE8SJOEGciBPECeJEnCBOxAniBHEiThAn4gRxIk4QJ4gTcYI4ESeIE8SJOEGciBPECeJEnCBOxAniBHEiThAnS40TAAAAAAAAAAAAAAAAAAAAAAAAgJXZH3enLWRz2h33edLcGUzy22XI82AYiXHQJkutc28EiTNvZne9SeR1pxMnizx1Hg0fkY5mdZY4r3v2TqiTOFlinKZ1mp3W3RDR7A2RR0mE2nsIzwJndadO2j1xWvhBIMuSWGybFhsTdL2ZaS281zTIKttrGgAAAAAAAAAAAAAAAMDSecHNi2atpunVYK/oNsqmCjY30CbqTJzT/XJr8DNndteb67judOLEqTMj226vxNGsjnk9H8/eV+IkTsRpWmcF07obIjdEHiXhUZJ5naXM6k6dTpwWflCVZUlo02Jj0q43f/haeK9pLJTvAQEAAAAAAAArdB668dpvt/117Iaz8aCZMi/Pv/+r/7zokxa8Pz5bdfJ4NzJU9nH7alHU7cPoUNPQf71krx+MD/V0/19R2hkhKnm7f7fe+f5mlKjS5vj9avxRndRwf+VdkbtxornrTded1LtPf/U9O/fsFPbRvxpn73knZd1ef0X5ZrQo6T3lBXr/yaSkR0qcD+NFOee0vUesUaKcS1qcFyNGMc+0OJ9GjEZndfM65QypcU59ED93C8SvN9qLOzJ1dak/5bT/YebZPPazLUrjjkxtY+rPOE75K9m23T6UOzLVXVN/xGvNNv9pKO7I1Nen/ob9hDk97IMicUemAem/YfrfyPqxgl2ZI7OOODN/I2tf4sisZFrP/GHWY4kjs5IbosyfINqVODIreZSU+fNDpxJHpgUFHsLn/ihTiSPTggL/vhQn0xRY+CFOJopfMidOJopfbCxOyszrZ3FSTvgLbuJkqvBXg8XJZNGbKoiTyaK3oxEn0wVv5OXfl8wQuwWihR/MEbp5rCVzzBG67bbFxsyrM/KDBV7TIPS6c86W215wY+49e9xHsrwazNznnXGfF7SpAnPFfZjVdjTMFvdJaxt5kaHPoRuvf64/++vYDTY8BAAAAAAAAAAAAAAAADab3wIMAPg/Oue/wQWyAAAAAElFTkSuQmCC",no="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUYAAACcCAYAAAADBQINAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABW1pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmVkYTJiM2ZhYywgMjAyMS8xMS8xNy0xNzoyMzoxOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjMuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAzLTI1VDIzOjAwOjQyKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMy0yNVQyMzo1MjowOSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMy0yNVQyMzo1MjowOSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzA1NTc3M0RBQzdEMTFFQ0I3NTc5NzU3MDFGMEY3N0UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzA1NTc3M0VBQzdEMTFFQ0I3NTc5NzU3MDFGMEY3N0UiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MGY0YTM1OC1mMGZhLTYzNGItYThhMy04ODdkY2NkY2NiODYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQwZjRhMzU4LWYwZmEtNjM0Yi1hOGEzLTg4N2RjY2RjY2I4NiIgc3RFdnQ6d2hlbj0iMjAyMi0wMy0yNVQyMzowMDo0MiswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MGY0YTM1OC1mMGZhLTYzNGItYThhMy04ODdkY2NkY2NiODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDBmNGEzNTgtZjBmYS02MzRiLWE4YTMtODg3ZGNjZGNjYjg2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+YVoGqwAAApVJREFUeNrs3b8uQ2Ecx+EeKW7ALUhsJjs3YDMx2EkMXUwGMXQRS+/AZLBYRcINmCV2F+Hf8W3SRtLEoudtT3ie5Be1HM37pp+8StuqrusOAN8WLAGAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAAgjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIIIwDCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgiAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCKMlABBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQRgCEEeBn3WkvcHh8Pr65l7m0pEBBr5n1zNPwm0G/174TY6K4NLp5kLmwZ0Bhi5mbzNZEg1p1YvzM7A/vX2bFngGFVZnVzMmwXzkx3rbuxJg79Z4vR5k1+wXM0GZmp9TF/fEFQBgBhBFg5mE8y9xbSmCGHjJXbQ7jdWY382ivgMLqzHPmNHNX6od0G7rOS2Yj82HfgILeMtud0T94l1LVdW2pARr+VRpAGAGEEUAYAYQRAGEEEEYAYQQQRgBhBGhekx+G5bWFMCeDfq+yCi05MSaKy6II85fHYj3xmGQKU7+JxHhDACdHJ0YAYQQQRgBh/CXPaUALeH6xfSdGGwKi+Gf4aAOAQidGAGEEEEYAYQQQRgCEEUAYAYQRQBgBhBFAGAGEEUAYAYQRQBgBhBFAGAGEEUAYAYQR4D/4EmAA1eI9768s56cAAAAASUVORK5CYII=";const ao={name:"cover-item",data(){return{isLoading:!1,coverToEdit:{color:null,imgUrl:null,type:null},randPics:null,photoSearch:!1}},async created(){var t,e,i,n,r,s,d,c,u,h,T;this.randPics=await Q.getRandomImages(6),this.coverToEdit.color=(e=(t=this.currTask)==null?void 0:t.cover)!=null&&e.color?(i=this.currTask)==null?void 0:i.cover.color:"#cfd3da",this.coverToEdit.imgUrl=(r=(n=this.currTask)==null?void 0:n.cover)!=null&&r.imgUrl?(d=(s=this.currTask)==null?void 0:s.cover)==null?void 0:d.imgUrl:"",this.coverToEdit.type=(u=(c=this.currTask)==null?void 0:c.cover)!=null&&u.type?(T=(h=this.currTask)==null?void 0:h.cover)==null?void 0:T.type:"header"},methods:{async onUploadImg(t){this.isLoading=!0;const e=t.target.files[0],i=await re(e);this.coverToEdit.imgUrl=i.url,this.isLoading=!1,this.updateCover()},setCoverType(t){this.coverToEdit.type=t,this.updateCover()},updateColor(t){this.coverToEdit.color=t,this.updateCover()},updateCover(){this.$emit("updateCover",this.coverToEdit)},setImgUrl(t){this.coverToEdit.imgUrl=t,this.updateCover()}},computed:{currColor(){},currTask(){return this.$store.getters.currTask},coverPreviewStyle(){return{"background-color":this.coverToEdit.color,"background-image":"url("+this.coverToEdit.imgUrl+")"}}},components:{colorPicker:K,searchPhoto:io}},lo={key:1,class:"cover-item"},co={class:"cover-preview"},uo=o("h4",null,"Size",-1),mo={class:"demo-images"},ho=o("img",{src:ro,alt:""},null,-1),po=[ho],go=o("img",{src:no,alt:""},null,-1),bo=[go],_o=o("button",null,"Remove Cover",-1),ko={class:"color-picker-container"},fo=o("h4",null,"Colors",-1),vo={class:"cover-attachments"},yo=o("h4",null,"Attachments",-1),Ao={key:0,class:"upload-img"},Co=y(" Upload a cover image "),Io={key:1,class:"loader-svg"},To=o("img",{src:be,alt:""},null,-1),wo=[To],Bo=o("h4",null,"Photos from Unsplash",-1),Mo={class:"cover-mini-photos"},Eo=["onClick"],So=["src"];function xo(t,e,i,n,r,s){const d=p("color-picker"),c=p("search-photo");return a(),l(I,null,[r.photoSearch?(a(),l("span",{key:0,class:"icon-back cover-popup",onClick:e[0]||(e[0]=u=>r.photoSearch=!1)})):m("",!0),r.photoSearch?(a(),C(c,{key:2,coverToEdit:r.coverToEdit,onSetImgUrl:s.setImgUrl},null,8,["coverToEdit","onSetImgUrl"])):(a(),l("section",lo,[o("div",co,[uo,o("div",mo,[o("div",{class:A(["demo-img",{"selected-type":r.coverToEdit.type==="header"}]),style:x(s.coverPreviewStyle),onClick:e[1]||(e[1]=u=>s.setCoverType("header"))},po,6),o("div",{class:A(["demo-img",{"selected-type":r.coverToEdit.type==="inline"}]),style:x(s.coverPreviewStyle),onClick:e[2]||(e[2]=u=>s.setCoverType("inline"))},bo,6)]),_o]),o("div",ko,[fo,k(d,{onUpdateColor:s.updateColor},null,8,["onUpdateColor"])]),o("div",vo,[yo,r.isLoading?m("",!0):(a(),l("label",Ao,[Co,o("input",{type:"file",onChange:e[3]||(e[3]=(...u)=>s.onUploadImg&&s.onUploadImg(...u)),hidden:""},null,32)])),r.isLoading?(a(),l("div",Io,wo)):m("",!0)]),Bo,o("div",Mo,[(a(!0),l(I,null,B(r.randPics,u=>(a(),l("div",{key:u._id,onClick:h=>s.setImgUrl(u.sm),class:A({"selected-type":u.sm===r.coverToEdit.imgUrl})},[o("img",{src:u.thumb,alt:""},null,8,So)],10,Eo))),128)),o("button",{onClick:e[4]||(e[4]=u=>r.photoSearch=!0)},"Search for photos")])]))],64)}var Uo=g(ao,[["render",xo]]);const Lo={data(){return{autocomplete:"",center:{lat:32.109333,lng:34.855499}}},mounted(){this.autocomplete=new google.maps.places.Autocomplete(this.$refs.autocomplete,{types:["establishment"],componentRestrictions:{country:["US"]},fields:["place._id","geometry","name"]}),this.autocomplete.addListener("place_changed",this.onPlaceChanged)},methods:{onPlaceChanged(){this.onSearch()},onPanTo(t=35.6895,e=139.6917){const i={type:"location",item:{lat:t,lng:e}};this.$emit("addItem",i)},async geocode(t){try{let e=await z.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,key:"AIzaSyDtacGFKDZu-p73ElA1OFnZCeT-jGafFHw"}});e=e.data.results[0].geometry.location,this.onPanTo(e.lat,e.lng)}catch(e){console.log(e)}},async onSearch(){await this.geocode(this.$refs.autocomplete.value)}},components:{}},Do={class:"location-input",type:"text",placeholder:"Search..",ref:"autocomplete"};function Oo(t,e,i,n,r,s){return a(),l("div",null,[o("input",Do,null,512)])}var Fo=g(Lo,[["render",Oo]]);const Ro={name:"pop-up-main",props:{popupData:Object,cmp:String,task:Object},mounted(){this.$emit("popupHeight",this.$refs.popup.clientHeight)},methods:{updateCover(t){this.$emit("updateCover",t)},updateLabels(t,e){this.$emit("updateLabels",t,e)},closePopup(){this.$emit("closePopup")},addItem(t){this.$emit("addItem",t)},removeItem(){}},computed:{currBoard(){return this.$store.getters.currBoard}},components:{labelsItem:As,checklistItem:Rs,attachmentItem:Hs,coverItem:Uo,dateItem:zt,membersItem:Us,locationItem:Fo}},No=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),Go=[No];function $o(t,e,i,n,r,s){const d=L("click-outside");return _((a(),l("div",{ref:"popup",class:"pop-up-main",style:x(i.popupData.style)},[o("header",null,[o("p",null,f(i.popupData.name),1),o("span",{onClick:e[0]||(e[0]=c=>t.$emit("closePopup"))},Go)]),o("main",null,[(a(),C(Me(i.cmp),{onAddItem:s.addItem,board:s.currBoard,onUpdateLabels:s.updateLabels,onClosePopup:s.closePopup,onUpdateCover:s.updateCover,task:i.task},null,8,["onAddItem","board","onUpdateLabels","onClosePopup","onUpdateCover","task"]))])],4)),[[d,s.closePopup]])}var ke=g(Ro,[["render",$o]]);const Po={name:"quick-edit",props:{task:Object},data(){return{actionType:"",popupData:null,taskToEdit:null,popupHeight:null}},created(){this.taskToEdit=JSON.parse(JSON.stringify(this.task))},mounted(){this.$refs.editLabels.getBoundingClientRect()},methods:{openTask(){this.$emit("openTask")},setPopupHeight(t){this.popupHeight=t},setCmp(t,e){this.actionType=t,this.popupData=e},updateLabels(t,e){},updateCover(t){this.taskToEdit.cover=t,this.$emit("addItem",this.taskToEdit)},addItem(t){if(t.type==="labels")if(this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]),this.taskToEdit.labelIds.includes(t.item._id)){const e=this.taskToEdit.labelIds.findIndex(i=>i===t.item._id);this.taskToEdit.labelIds.splice(e,1)}else this.taskToEdit.labelIds.push(t.item._id);if(t.type==="members")if(this.taskToEdit.members||(this.taskToEdit.members=[]),this.taskToEdit.members.some(e=>e._id===t.item._id)){const e=this.taskToEdit.members.findIndex(i=>i._id===t.item._id);this.taskToEdit.members.splice(e,1)}else this.taskToEdit.members.push(t.item);t.type==="dueDate"&&(this.taskToEdit.dueDate||(this.taskToEdit.dueDate=[]),this.taskToEdit.dueDate=t.item),this.$emit("addItem",this.taskToEdit)},async updateLabels(t,e){try{await this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t}),this.addItem(e)}catch{}}},computed:{labelsStyle(){let t=this.$refs.editLabels.getBoundingClientRect().bottom;const e=this.$refs.editLabels.getBoundingClientRect().x;return window.innerHeight-t-this.popupHeight<0&&(t=this.popupHeight+(window.innerHeight-t-this.popupHeight)),{top:t+"px",left:e+"px",position:"fixed"}},membersStyle(){const t=this.$refs.editMembers.getBoundingClientRect().bottom,e=this.$refs.editMembers.getBoundingClientRect().x;return{top:t+"px",left:e+"px",position:"fixed"}}},components:{popupMain:ke}},Jo={class:"quick-edit"},Zo=o("span",{class:"icon-board"},null,-1),jo=y("Open card "),Ho=[Zo,jo],Qo=o("span",{class:"icon-label"},null,-1),Yo=y("Edit Labels "),Vo=[Qo,Yo],zo=o("span",{class:"icon-members"},null,-1),qo=y("Change members "),Xo=[zo,qo],Wo=o("span",{class:"icon-cover"},null,-1),Ko=y("Change cover "),ei=[Wo,Ko],ti=o("span",{class:"icon-time"},null,-1),si=y("Edit Dates "),oi=[ti,si],ii=o("span",{class:"icon-cancel"},null,-1),ri=y(" Remove "),ni=[ii,ri];function ai(t,e,i,n,r,s){const d=p("popup-main");return a(),l("section",Jo,[o("div",{class:"btn",onClick:e[0]||(e[0]=(...c)=>s.openTask&&s.openTask(...c))},Ho),o("div",{ref:"editLabels",class:"btn",onClick:e[1]||(e[1]=c=>s.setCmp("labelsItem",{name:"Labels",style:s.labelsStyle}))},Vo,512),o("div",{ref:"editMembers",class:"btn",onClick:e[2]||(e[2]=c=>s.setCmp("membersItem",{name:"Members",style:s.labelsStyle}))},Xo,512),o("div",{class:"btn",onClick:e[3]||(e[3]=c=>s.setCmp("coverItem",{name:"Members",style:s.labelsStyle}))},ei),o("div",{class:"btn",onClick:e[4]||(e[4]=c=>s.setCmp("dateItem",{name:"Dates",style:s.labelsStyle}))},oi),o("div",{class:"btn",onClick:e[5]||(e[5]=R(c=>t.$emit("removeTask"),["stop"]))},ni),r.actionType?(a(),C(d,{key:0,ref:"popup",task:i.task,popupData:r.popupData,cmp:r.actionType,onAddItem:s.addItem,onUpdateLabels:s.updateLabels,onClosePopup:e[6]||(e[6]=c=>r.actionType=""),onUpdateCover:s.updateCover,onPopupHeight:s.setPopupHeight},null,8,["task","popupData","cmp","onAddItem","onUpdateLabels","onUpdateCover","onPopupHeight"])):m("",!0)])}var li=g(Po,[["render",ai]]);const di={name:"task-preview",props:{task:{type:Object,required:!0},labelStatus:Boolean},data(){return{editIcon:!1,isQuickEdit:!1,taskCopy:null,displayLabels:!1}},mounted(){},created(){this.taskCopy=JSON.parse(JSON.stringify(this.task))},components:{Draggable:he,quickEdit:li},methods:{toggleStatus(){var t=JSON.parse(JSON.stringify(this.task));t.status===""||!t.status?t.status="completed":t.status==="completed"?Date.now()>t.dueDate?t.status="overdue":t.status="":t.status==="overdue"&&(t.status="completed"),this.updateTask(t)},toggleLabel(){this.$store.commit({type:"toggleLabel"})},removeTask(){this.$emit("removeTask",this.task._id),this.$emit("onQuickEdit",!1)},toggleLabels(){this.$emit("toggleLabels")},quickEdit(){this.$emit("onQuickEdit",!0),this.isQuickEdit=!0},closeQuickEdit(){this.$emit("onQuickEdit",!1),this.isQuickEdit=!1},updateTask(t){this.$emit("updateTask",JSON.parse(JSON.stringify(t)))},openTask(){this.closeQuickEdit(),this.$emit("openTask")},toggleLabels(){this.$emit("toggleLabels"),this.displayLabels?this.displayLabels=!this.displayLabels:setTimeout(()=>{this.displayLabels=!this.displayLabels},400)}},computed:{board(){return this.$store.getters.currBoard},labels(){var t;return(t=this.task.labelIds)!=null&&t.length?this.task.labelIds.map(e=>this.board.labels.find(i=>i._id===e)):!1},date(){return ee(this.task.dueDate).format("lll").split(",")[0]},tasksDone(){return this.task.checklists.reduce((e,{todos:i})=>e+i.reduce((n,r)=>r.isDone?n+1:n,0),0)},numOfTodos(){return this.task.checklists.reduce((t,{todos:e})=>t+e.length,0)},coverStyle(){var t,e;if(((t=this.task.cover)==null?void 0:t.color)&&!this.task.cover.imgUrl)return{"background-color":this.task.cover.color};if((e=this.task.cover)!=null&&e.imgUrl)return{"background-image":"url("+this.task.cover.imgUrl+")",height:"260px"}},taskStyle(){var t;if(((t=this.task.cover)==null?void 0:t.type)==="inline")return{"background-color":this.task.cover.color,"font-weight":500,"font-size":"16px","padding-top":"30px","background-image":"url("+this.task.cover.imgUrl+")","min-height":this.task.cover.imgUrl?"250px":"",color:"#fff","padding-top":this.task.cover.imgUrl?"215px":"30px"}},numOfComments(){var t;return(t=this.task.activities)!=null&&t.length?this.task.activities.reduce((e,i)=>i.isComment?e+1:e,0):0},quickEditPos(){const t=this.$refs.tasky.getBoundingClientRect().y,e=this.$refs.tasky.getBoundingClientRect().right;return{top:t+"px",left:e+"px"}},isIcons(){var t,e;return this.task.dueDate||this.task.location||this.task.description||this.numOfComments||((t=this.task.attachments)==null?void 0:t.length)||((e=this.task.checklists)==null?void 0:e.length)&&this.numOfTodos}}},ci={class:"task-preview-container"},ui={key:1,class:"dark-wrap"},mi={key:3,class:"preview-icon labels"},hi=["title"],pi={class:"icons"},gi={key:0,class:"icon-container flex"},bi={key:0,class:"clock-icon"},_i={key:1,class:"icon-checklist"},ki={key:2,class:"icon-emptyBox"},fi={key:1,class:"preview-icon",title:"This card has a description."},vi=o("span",{class:"icon-description"},null,-1),yi=[vi],Ai={key:2,class:"preview-icon",title:"Comments"},Ci=o("span",{class:"icon-chat"},null,-1),Ii={key:3,class:"preview-icon",title:"Location"},Ti=o("span",{class:"icon-location"},null,-1),wi=[Ti],Bi={key:4,class:"preview-icon",title:"Attachments"},Mi=o("span",{class:"icon-attachment"},null,-1),Ei=o("span",{class:"icon-checklist"},null,-1),Si={key:1,class:"preview-icon members"};function xi(t,e,i,n,r,s){const d=p("avatar"),c=p("quick-edit"),u=p("Draggable");return i.task?(a(),C(u,{key:0},{default:G(()=>{var h,T,b,w,U,M,E,D,j,Y,V,v,ne;return[o("div",ci,[o("section",{class:A(["task-preview",{"on-quick-edit":r.isQuickEdit}]),style:x(s.taskStyle),onMouseover:e[5]||(e[5]=O=>r.editIcon=!0),onMouseleave:e[6]||(e[6]=O=>r.editIcon=!1),ref:"tasky"},[r.editIcon?(a(),l("span",{key:0,class:"icon-edit",onClick:e[0]||(e[0]=R((...O)=>s.quickEdit&&s.quickEdit(...O),["stop"]))})):m("",!0),((h=this.task.cover)==null?void 0:h.imgUrl)&&this.task.cover.type==="inline"?(a(),l("div",ui)):m("",!0),((T=i.task.cover)==null?void 0:T.type)==="header"?(a(),l("div",{key:2,class:"task-preview-cover",style:x(s.coverStyle)},null,4)):m("",!0),s.labels&&((b=this.task.cover)==null?void 0:b.type)!=="inline"?(a(),l("div",mi,[(a(!0),l(I,null,B(s.labels,(O,ye)=>(a(),l("div",{key:ye,onClick:e[1]||(e[1]=R((...Ae)=>s.toggleLabels&&s.toggleLabels(...Ae),["stop"])),class:A(["label",{openLabel:i.labelStatus}]),style:x({"background-color":O.color}),title:O.title},f(O.title),15,hi))),128))])):m("",!0),r.isQuickEdit?m("",!0):(a(),l("p",{key:4,class:A(["title",{"pos-absolute":((w=this.task.cover)==null?void 0:w.type)==="inline"&&((U=this.task.cover)==null?void 0:U.imgUrl)}])},f(i.task.title),3)),r.isQuickEdit?_((a(),l("textarea",{key:5,"onUpdate:modelValue":e[2]||(e[2]=O=>r.taskCopy.title=O),onChange:e[3]||(e[3]=O=>s.updateTask(r.taskCopy)),name:"",id:"",cols:"30",rows:"10"},null,544)),[[S,r.taskCopy.title]]):m("",!0),o("div",pi,[((M=this.task.cover)==null?void 0:M.type)!=="inline"&&s.isIcons?(a(),l("div",gi,[i.task.dueDate?(a(),l("div",{key:0,class:"duedate",onClick:e[4]||(e[4]=R((...O)=>s.toggleStatus&&s.toggleStatus(...O),["stop"]))},[o("span",{class:A(["preview-icon date",{completed:i.task.status==="completed",overdue:i.task.status==="overdue"}]),style:{"font-size":12+"px"}},[(E=i.task.status)!=null&&E.length?(a(),l("span",bi)):m("",!0),((D=i.task)==null?void 0:D.status)==="completed"?(a(),l("span",_i)):m("",!0),((j=i.task)==null?void 0:j.status)==="overdue"?(a(),l("span",ki)):m("",!0),y(" "+f(s.date),1)],2)])):m("",!0),i.task.description?(a(),l("div",fi,yi)):m("",!0),s.numOfComments?(a(),l("div",Ai,[Ci,o("p",null,f(s.numOfComments),1)])):m("",!0),i.task.location?(a(),l("div",Ii,wi)):m("",!0),(Y=i.task.attachments)!=null&&Y.length?(a(),l("div",Bi,[Mi,o("p",null,f((V=i.task.attachments)==null?void 0:V.length),1)])):m("",!0),((v=i.task.checklists)==null?void 0:v.length)&&s.numOfTodos?(a(),l("div",{key:5,class:A(["preview-icon",{completed:s.tasksDone===s.numOfTodos}]),title:"Checklist items"},[Ei,o("p",null,f(s.tasksDone)+" / "+f(s.numOfTodos),1)],2)):m("",!0)])):m("",!0),(ne=i.task.members)!=null&&ne.length?(a(),l("div",Si,[(a(!0),l(I,null,B(i.task.members,O=>(a(),l("div",{key:O._id,class:"member"},[k(d,{size:28,color:"white",name:O.fullname},null,8,["name"])]))),128))])):m("",!0)])],38),r.isQuickEdit?(a(),C(c,{key:0,onRemoveTask:s.removeTask,onAddItem:s.updateTask,task:i.task,onOpenTask:s.openTask,style:x(s.quickEditPos),class:A({"on-quick-edit":r.isQuickEdit})},null,8,["onRemoveTask","onAddItem","task","onOpenTask","style","class"])):m("",!0)]),o("div",{class:A(["overlay",{"open-overlay":r.isQuickEdit}]),onClick:e[7]||(e[7]=R((...O)=>s.closeQuickEdit&&s.closeQuickEdit(...O),["stop"]))},null,2)]}),_:1})):m("",!0)}var Ui=g(di,[["render",xi]]);const Li={data(){return{isCreating:null,title:""}},methods:{addTask(){if(!this.title||this.title===`
`)return this.title="";this.$emit("addTask",this.title),this.isCreating=null,this.title=""}}},Di={key:0,class:"task-add open"},Oi={class:"add-task-btns"},Fi=o("span",{class:"plus-icon"},null,-1),Ri=o("span",{class:"add-task-txt"},"Add a card",-1),Ni=[Fi,Ri];function Gi(t,e,i,n,r,s){const d=L("focus");return r.isCreating?(a(),l("section",Di,[_(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=c=>r.title=c),type:"textarea",placeholder:"Enter a title for this card...",class:"inline-input",onKeydown:e[1]||(e[1]=W(R((...c)=>s.addTask&&s.addTask(...c),["prevent"]),["enter"]))},null,544),[[d],[S,r.title]]),o("section",Oi,[o("button",{onClick:e[2]||(e[2]=(...c)=>s.addTask&&s.addTask(...c)),class:"add-card-btn"},"Add card"),o("span",{class:"icon-cancel",onClick:e[3]||(e[3]=c=>r.isCreating=!1)})])])):(a(),l("section",{key:1,onClick:e[4]||(e[4]=c=>r.isCreating=!0),class:"task-add"},Ni))}var $i=g(Li,[["render",Gi]]);const Pi={name:"add-group",data(){return{isFocused:!1,groupTitle:""}},methods:{addGroup(){!this.groupTitle||(this.$emit("add",this.groupTitle),this.groupTitle="",this.$refs.addGroupInput.focus())},close(){this.isFocused=!1}}},Ji={key:0,class:"add-group-btn"},Zi=o("span",{class:"icon-plus"},null,-1),ji=y(" Add another list "),Hi=[Zi,ji],Qi={key:1,class:"group-add-input-container"},Yi={class:"add-group-btns"};function Vi(t,e,i,n,r,s){const d=L("focus"),c=L("click-outside");return _((a(),l("section",{class:A(["add-group",{editable:r.isFocused}]),onClick:e[4]||(e[4]=u=>r.isFocused=!0)},[r.isFocused?(a(),l("section",Qi,[_(o("input",{type:"text",class:"inline-input","onUpdate:modelValue":e[0]||(e[0]=u=>r.groupTitle=u),onKeydown:e[1]||(e[1]=W((...u)=>s.addGroup&&s.addGroup(...u),["enter"])),placeholder:"Enter list title...",ref:"addGroupInput"},null,544),[[S,r.groupTitle],[d]]),o("section",Yi,[o("button",{onClick:e[2]||(e[2]=(...u)=>s.addGroup&&s.addGroup(...u)),class:"add-group-btn"},"Add list"),o("span",{class:"icon-cancel",onClick:e[3]||(e[3]=R((...u)=>s.close&&s.close(...u),["stop"]))})])])):(a(),l("span",Ji,Hi))],2)),[[c,s.close]])}var zi=g(Pi,[["render",Vi]]);const qi="",N=Xi();N.setup();function Xi(){var t=null;return{async setup(){t=Ee(qi)},on(i,n){t.on(i,n)},off(i,n=null){!t||(n?t.off(i,n):t.removeAllListeners(i))},emit(i,n){t.emit(i,n)},terminate(){t=null}}}const Wi={name:"attachment-preview",props:{attachment:Object},methods:{removeAttachment(t){this.$emit("removeAttachment",t)}},computed:{createdAt(){return ee(this.attachment.createdAt).startOf("hour").fromNow()}}},Ki={class:"attachment-item"},er={class:"image-container"},tr=["src"],sr={class:"attachment-details"},or={class:"main-actions"},ir=y(" Added "),rr=o("span",{class:"attachment-action"},"Comment",-1),nr=y(" - "),ar=y(" - "),lr=o("span",{class:"attachment-action"},"Edit",-1),dr=o("div",null,[o("span",{class:"attachment-action"},"Make Cover")],-1);function cr(t,e,i,n,r,s){return a(),l("li",Ki,[o("div",er,[o("img",{src:i.attachment.url,alt:""},null,8,tr)]),o("div",sr,[o("h4",null,f(i.attachment.fileName),1),o("div",or,[ir,o("span",null,f(s.createdAt)+" -",1),rr,nr,o("span",{class:"attachment-action",onClick:e[0]||(e[0]=R(d=>s.removeAttachment(i.attachment.id),["stop"]))},"Delete"),ar,lr]),dr])])}var ur=g(Wi,[["render",cr]]);const mr={name:"attachment",props:{attachments:Array},data(){return{}},methods:{removeAttachment(t){const e=this.attachments.findIndex(i=>t===i.id);this.attachments.splice(e,1),this.updateAttachments(JSON.parse(JSON.stringify(this.attachments)))},updateAttachments(t){this.$emit("updateAttachments",{type:"attachments",val:t})}},components:{attachmentPreview:ur}},hr={class:"attachments-container"};function pr(t,e,i,n,r,s){const d=p("attachmentPreview");return a(),l("section",hr,[o("ul",null,[(a(!0),l(I,null,B(i.attachments,c=>(a(),C(d,{onRemoveAttachment:s.removeAttachment,attachment:c,key:c.id},null,8,["onRemoveAttachment","attachment"]))),128))])])}var gr=g(mr,[["render",pr]]);const br={props:{task:Object},data(){return{dateStatus:!1}},created(){this.status==="completed"&&(this.dateStatus=!0)},methods:{updateStatus(){var t="";this.dateStatus?t="completed":this.dueDate<Date.now()&&(t="overdue");const e={type:"status",item:t};this.$emit("addItem",e)},setLabels(){this.$emit("setLabels")},setDate(){this.$emit("setDate"),this.updateStatus()},setMembers(){this.$emit("setMembers")}},computed:{status(){if(this.currStatus==="completed")return"completed";if(this.dueDate<Date.now())return"overdue"},currStatus(){return this.task.status},dueDate(){return this.task.dueDate},members(){return this.task.members},labelIds(){return this.task.labelIds},boardLabels(){return this.$store.getters.currBoard.labels},taskLabels(){var t;if(!!((t=this.labelIds)!=null&&t.length))return this.labelIds.map(e=>this.boardLabels.find(i=>i._id===e))},date(){return ee(this.dueDate).format("lll")}},watch:{dueDate(){this.updateStatus()}}},_r={class:"task-combo-list flex wrap"},kr={key:0,class:"members flex column"},fr=o("h3",null,"Members",-1),vr={class:"flex"},yr={key:1,class:"labels flex column"},Ar=o("h3",null,"Labels",-1),Cr={class:"flex label"},Ir={key:2,class:"due-date"},Tr=o("h3",null,"Due date",-1),wr={class:"due-date flex"},Br=o("span",{class:"open-icon"},null,-1);function Mr(t,e,i,n,r,s){var c,u;const d=p("avatar");return a(),l("section",_r,[(c=s.members)!=null&&c.length?(a(),l("section",kr,[fr,o("section",vr,[(a(!0),l(I,null,B(s.members,h=>(a(),l("div",{key:h._id},[k(d,{size:"32",color:"white",name:h.fullname,class:"avatar"},null,8,["name"])]))),128)),o("span",{onClick:e[0]||(e[0]=(...h)=>s.setMembers&&s.setMembers(...h)),class:"combo-add-icon"})])])):m("",!0),(u=s.taskLabels)!=null&&u.length?(a(),l("section",yr,[Ar,o("section",Cr,[(a(!0),l(I,null,B(s.taskLabels,(h,T)=>(a(),l("div",{key:T},[h?(a(),l("span",{key:0,style:x({"background-color":h.color})},f(h.title),5)):m("",!0)]))),128)),o("div",{class:"combo-add-icon label",onClick:e[1]||(e[1]=(...h)=>s.setLabels&&s.setLabels(...h))})])])):m("",!0),s.dueDate?(a(),l("section",Ir,[Tr,o("section",wr,[_(o("input",{type:"checkbox",class:"date-checkbox","onUpdate:modelValue":e[2]||(e[2]=h=>r.dateStatus=h),onChange:e[3]||(e[3]=(...h)=>s.updateStatus&&s.updateStatus(...h))},null,544),[[H,r.dateStatus]]),o("div",{class:"title",onClick:e[4]||(e[4]=(...h)=>s.setDate&&s.setDate(...h))},[y(f(s.date)+" ",1),o("span",{class:A(["status",{completed:s.status==="completed",overdue:s.status==="overdue"}])},f(s.status),3),Br])])])):m("",!0)])}var Er=g(br,[["render",Mr]]);const Sr={name:"task-checklist",props:{checklist:Object},data(){return{checklistToEdit:null,newTodoTitle:"",addItemMode:!1,isHideDone:!1}},created(){this.checklistToEdit=JSON.parse(JSON.stringify(this.checklist))},methods:{addTodo(){if(!this.newTodoTitle)return;const t={_id:J.makeId(),title:this.newTodoTitle,isDone:!1};this.checklistToEdit.todos.push(t),this.newTodoTitle="",this.addItemMode=!1,this.updateTask()},deleteChecklist(){this.$emit("updateItem",{type:"checklists",val:{_id:this.checklistToEdit._id}})},updateTask(){this.$emit("updateItem",{type:"checklists",val:JSON.parse(JSON.stringify(this.checklistToEdit))})}},computed:{doneTodosPerecent(){const t=this.checklistToEdit.todos.length;if(!t)return 0;const e=this.checklistToEdit.todos.reduce((i,n)=>n.isDone?i+1:i,0);return parseInt(e/t*100)},isAnyTodoDone(){return this.checklistToEdit.todos.some(t=>t.isDone)},hideBtnTxt(){return this.isHideDone?`Show checked items (${this.checklistToEdit.todos.reduce((e,i)=>i.isDone?e+1:e,0)})`:"Hide checked items"}}},xr={key:0,class:"task-checklist"},Ur=o("section",{class:"block-title"},[o("span",{class:"icon checklist-icon"})],-1),Lr={class:"checklist-header-container"},Dr={class:"header-actions flex"},Or={class:"progress-bar"},Fr={class:"percentage"},Rr=["value"],Nr={class:"todos-container"},Gr={key:0,class:"todo-container"},$r=["onUpdate:modelValue"],Pr=["onUpdate:modelValue"],Jr={key:1},Zr={class:"actions"};function jr(t,e,i,n,r,s){const d=L("focus");return i.checklist?(a(),l("section",xr,[o("header",null,[Ur,o("section",Lr,[_(o("input",{type:"text",class:"checklist-title-input",onBlur:e[0]||(e[0]=(...c)=>s.updateTask&&s.updateTask(...c)),"onUpdate:modelValue":e[1]||(e[1]=c=>r.checklistToEdit.title=c)},null,544),[[S,r.checklistToEdit.title]]),o("section",Dr,[s.isAnyTodoDone?(a(),l("button",{key:0,onClick:e[2]||(e[2]=c=>r.isHideDone=!r.isHideDone),class:"hide-show-btn"},f(s.hideBtnTxt),1)):m("",!0),o("button",{onClick:e[3]||(e[3]=(...c)=>s.deleteChecklist&&s.deleteChecklist(...c))},"Delete")])])]),o("div",Or,[o("span",Fr,f(s.doneTodosPerecent)+"%",1),o("progress",{value:s.doneTodosPerecent,max:"100"},null,8,Rr)]),o("div",Nr,[(a(!0),l(I,null,B(r.checklistToEdit.todos,c=>(a(),l("div",{key:c._id},[!r.isHideDone||!c.isDone?(a(),l("div",Gr,[_(o("input",{type:"checkbox","onUpdate:modelValue":u=>c.isDone=u,onChange:e[4]||(e[4]=(...u)=>s.updateTask&&s.updateTask(...u))},null,40,$r),[[H,c.isDone]]),_(o("textarea",{spellcheck:"false",class:A({completed:c.isDone}),onBlur:e[5]||(e[5]=(...u)=>s.updateTask&&s.updateTask(...u)),"onUpdate:modelValue":u=>c.title=u,rows:"1"},null,42,Pr),[[S,c.title]])])):m("",!0)]))),128))]),r.addItemMode?(a(),l("section",Jr,[_(o("textarea",{"onUpdate:modelValue":e[7]||(e[7]=c=>r.newTodoTitle=c),placeholder:"Add an item",class:"add-todo-inp"},null,512),[[S,r.newTodoTitle],[d]]),o("section",Zr,[o("button",{class:"blue-btn",onClick:e[8]||(e[8]=(...c)=>s.addTodo&&s.addTodo(...c))},"Add"),o("i",{onClick:e[9]||(e[9]=c=>r.addItemMode=!1),class:"fa-solid fa-x"})])])):(a(),l("button",{key:0,onClick:e[6]||(e[6]=c=>r.addItemMode=!0),class:"add-todo-btn"},"Add an item"))])):m("",!0)}var Hr=g(Sr,[["render",jr]]);const Qr={props:{pp:String},created(){},methods:{setComment(){this.pp&&this.$emit("updateItem",this.pp,!1),this.$emit("addComment")}},components:{}},Yr=o("button",{class:"save"},"Save",-1),Vr=[Yr],zr=me('<div class="comment-actions flex"><span class="icon-attachment"></span><span class="icon-find-members"></span><span class="icon-emojis"></span><span class="title-icon"></span></div>',1);function qr(t,e,i,n,r,s){return a(),l("section",null,[o("div",{onClick:e[0]||(e[0]=(...d)=>s.setComment&&s.setComment(...d)),class:"comment-save"},Vr),zr])}var fe=g(Qr,[["render",qr]]);const Xr={name:"activities-list",props:{task:Object,user:Object,memberToAdd:Object,showDetails:Boolean},data(){return{isEditing:"",txt:[],lastAtIndex:0,currActivityId:""}},created(){},methods:{findMembers(t){this.$emit("findMembers",t)},closeComment(){this.isEditing&&(this.isEditing=!1),this.$emit("closeComment")},deleteItem(t){var e={_id:t};this.$emit("updateItem",{type:"comment",val:JSON.parse(JSON.stringify(e))})},updateItem(t,e){this.currActivityId=t;var i=JSON.parse(JSON.stringify(this.task)),n=i.activities.find(r=>r._id===t);n.isEditing=e,this.$emit("updateItem",{type:"comment",val:JSON.parse(JSON.stringify(n))}),this.txt=""}},computed:{board(){return this.$store.getters.currBoard},users(){return this.$store.getters.getAllUsers},activities(){const t=this.task.activities,e=this.board.activities;console.log("asdasdasd",this.users);let i=JSON.parse(JSON.stringify(e.filter(n=>(n==null?void 0:n.taskId)===this.task._id)));return t&&(i=i.concat(t).sort((n,r)=>r.createdAt-n.createdAt)),i=i.map(n=>(n.byMemberId&&(n.byMember=this.users.find(r=>r._id===n.byMemberId)),n)),i}},components:{commentActions:fe},watch:{memberToAdd(){this.isEditing&&this.updateItem(this.currActivityId,!0)}}},Wr={key:0,class:"comment-text"},Kr={class:"member"},en={key:2,class:"task-activity-txt"},tn=["onUpdate:modelValue","onInput"],sn={key:4,class:"comment-btns"},on=["onClick"],rn=["onClick"],nn={key:2},an=["onClick"];function ln(t,e,i,n,r,s){var T;const d=p("avatar"),c=p("timeago"),u=p("comment-actions"),h=L("click-outside");return a(),l("section",null,[(T=i.task.activities)!=null&&T.length?(a(),l("ul",Wr,[(a(!0),l(I,null,B(s.activities,b=>(a(),l("li",{key:b._id,class:A({open:b.isEditing})},[b.isComment||i.showDetails?(a(),C(d,{key:0,class:"activity-avatar",size:"32",name:b.byMember.fullname},null,8,["name"])):m("",!0),b.isComment||i.showDetails?(a(),l("div",{key:1,class:A({activity:b.isComment})},[o("span",Kr,f(b.byMember.username),1),k(c,{class:"time",datetime:b.createdAt},null,8,["datetime"])],2)):m("",!0),!b.isComment&&i.showDetails?(a(),l("div",en,f(b.txt),1)):m("",!0),b.isComment?(a(),l("div",{key:3,class:A(["try",{open:b.isEditing}])},[o("div",{class:A(["task-comment-txt",{open:b.isEditing}])},[_(o("input",{"onUpdate:modelValue":w=>b.txt=w,type:"text",onInput:w=>s.findMembers(b._id)},null,40,tn),[[S,b.txt],[h,s.closeComment]])],2),b.isEditing?(a(),C(u,{key:0,pp:b._id,popo:r.isEditing,class:A([{open:b.isEditing},"comments-main-container flex space-between"]),onUpdateItem:s.updateItem},null,8,["pp","popo","class","onUpdateItem"])):m("",!0)],2)):m("",!0),b.isComment?(a(),l("div",sn,[b.isEditing?(a(),l("button",{key:0,class:"close-comment-edit",onClick:w=>s.updateItem(b._id,!1)},null,8,on)):m("",!0),!b.isEditing&&i.user._id===b.byMember._id?(a(),l("a",{key:1,onClick:w=>(r.isEditing=!0,s.updateItem(b._id,!0))},"Edit",8,rn)):m("",!0),!b.isEditing&&i.user._id===b.byMember._id?(a(),l("span",nn,"-")):m("",!0),!b.isEditing&&i.user._id===b.byMember._id?(a(),l("a",{key:3,onClick:w=>s.deleteItem(b._id)},"Delete",8,an)):m("",!0)])):m("",!0)],2))),128))])):m("",!0)])}var dn=g(Xr,[["render",ln]]);const cn={props:["board"],data(){return{}},methods:{addMember({fullname:t,username:e,imgUrl:i,_id:n}){const r={fullname:t,username:e,imgUrl:i,_id:n};this.$emit("addTag",r)},computed:{currTask(){return this.$store.getters.currTask},currTaskMembersIds(){let t=this.currTask.members;return t?t.map(e=>e._id):[]}}}},un={key:0,class:"members-item"},mn=o("h3",{class:"header"},"Mentions...",-1),hn=["onClick"],pn={class:"member-container flex align-items justify-center"},gn={class:"avatar"},bn={class:"name"};function _n(t,e,i,n,r,s){const d=p("avatar");return i.board?(a(),l("section",un,[mn,o("ul",null,[(a(!0),l(I,null,B(i.board.members,c=>(a(),l("li",{key:c._id,class:"member find flex align-items space-between",onClick:R(u=>s.addMember(c),["stop"])},[o("div",pn,[o("div",gn,[k(d,{size:28,color:"white",name:c.fullname},null,8,["name"])]),o("span",bn,f(c.fullname),1)])],8,hn))),128))])])):m("",!0)}var kn=g(cn,[["render",_n]]);const fn={data(){return{taskToEdit:null,showSaveBtn:!1,popupData:null,actionType:null,isDescEditMode:!1,isComment:!1,isShowActivityDetails:!1,comment:"",isFindMembers:!1,lastAtIndex:0,memberToAdd:""}},created(){this.taskToEdit=JSON.parse(JSON.stringify(this.task)),this.isComment=!1},methods:{deleteMap(){this.taskToEdit.location="",this.onTaskEdit()},openComment(){this.isComment=!0,this.comment||(this.lastAtIndex=0)},addTag(t){this.memberToAdd=t,this.tagMembers()},tagMembers(t){if(this.isFindMembers&&(this.isFindMembers=!this.isFindMembers,this.isComment&&this.memberToAdd))return this.comment+=this.memberToAdd.fullname,this.memberToAdd="";var e;t?(e=this.task.activities.find(n=>n._id===t).txt,this.lastAtIndex=e.length-2):e=this.comment;var i=e.indexOf("@",this.lastAtIndex+1);i!==-1&&(this.lastAtIndex=i),(i!==-1&&e[i-1]===" "||e.length===1&&e==="@")&&(this.isFindMembers=!0)},closeComment(){this.isComment&&(this.lastAtIndex=0,this.isComment=!1,this.comments="")},addComment(){this.lastAtIndex=0;const t={type:"comment",item:{byMember:this.miniUser,createdAt:Date.now(),task:{_id:this.task._id,title:this.task.title},txt:this.comment,_id:J.makeId(),isComment:!0}},e=$.addActivity(`${this.miniUser.username} mentioned you`,this.miniUser._id,this.task._id,this.group._id,this.board._id);t.item.txt.split(" ").forEach(i=>{if(i[0]==="@"){const n=i.substring(1),r=this.board.members.find(s=>s.fullname.split(" ")[0]===n);r&&(e.toMemberId=r._id,e.isMention=!0,N.emit("notify user tag",e))}}),this.addItem(t),this.closeComment(),this.comment=""},setLocation(t){this.actionType=t,this.popupData={name:"Location",style:{top:"240px"}}},setDate(t){this.actionType=t,this.popupData={name:"Dates",style:{top:"180px"}}},updateCover(t){this.taskToEdit.cover=t,this.onTaskEdit()},setMembers(t){this.actionType=t,this.popupData={name:"Members",style:{top:"59px"}}},setLabels(t){this.actionType=t,this.popupData={name:"Labels",style:{top:"99px"}}},setAttachments(t){this.actionType=t,this.popupData={name:"Attachments",style:{top:"220px"}}},setChecklist(t){this.actionType=t,this.popupData={name:"Add checklist",style:{top:"140px"}}},setCover(t){this.actionType=t,this.popupData={name:"Cover",style:{top:"300px"}}},closePopup(){this.actionType=null,this.popupData=null},addItem(t){if(t.type==="attachment")this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(t.item),this.onTaskEdit();else if(t.type==="comment")this.taskToEdit.activities||(this.taskToEdit.activities=[]),this.taskToEdit.activities.unshift(t.item);else if(t.type==="dueDate")this.taskToEdit.dueDate=t.item,this.onTaskEdit(),this.closePopup();else if(t.type==="status")this.taskToEdit.status=t.item;else if(t.type==="location")this.taskToEdit.location=t.item,this.closePopup();else if(t.type==="checklist")this.taskToEdit.checklists||(this.taskToEdit.checklists=[]),this.taskToEdit.checklists.push(t.item),this.closePopup();else if(t.type==="members")if(this.taskToEdit.members||(this.taskToEdit.members=[]),this.taskToEdit.members.some(i=>i._id===t.item._id)){const i=this.taskToEdit.members.findIndex(n=>n._id===t.item._id);this.taskToEdit.members.splice(i,1)}else this.taskToEdit.members.push(t.item);else if(t.type==="labels")if(this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]),this.taskToEdit.labelIds.includes(t.item._id)){const i=this.taskToEdit.labelIds.findIndex(n=>n===t.item._id);var e=this.taskToEdit.labelIds[i];t.item.color===e.color&&t.item.title===e.title&&this.taskToEdit.labelIds.splice(i,1)}else this.taskToEdit.labelIds.push(t.item._id);this.onTaskEdit(t)},updateItem({type:t,val:e}){var i;if(t==="checklists"){const n=this.taskToEdit.checklists,r=n.findIndex(s=>s._id===e._id);e.title?n.splice(r,1,e):n.splice(r,1)}else if(t==="comment"){const n=this.taskToEdit.activities,r=n.findIndex(s=>s._id===e._id);(i=e.txt)!=null&&i.length?n.splice(r,1,e):n.splice(r,1)}else this.taskToEdit[t]=e;this.onTaskEdit()},onTaskEdit(t=null){this.$store.dispatch({type:"setTask",task:JSON.parse(JSON.stringify(this.taskToEdit)),action:t}),this.$store.commit({type:"setCurrTask",task:JSON.parse(JSON.stringify(this.taskToEdit))})},async updateLabels(t,e){var i;if((i=e.item)!=null&&i.isDelete)return this.removeLabel(t,e);try{await this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t}),this.addItem(e),this.closePopup()}catch(n){console.log("err",n)}},removeLabel(t,e){const i=this.taskToEdit.labelIds.findIndex(n=>n===e.item._id);this.taskToEdit.labelIds.splice(i,1),this.onTaskEdit(),this.closePopup(),this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t})},cancelDescEdit(){this.taskToEdit.description=this.task.description,this.isDescEditMode=!1},saveDescEdit(){this.isDescEditMode&&(this.onTaskEdit(),this.isDescEditMode=!1)},closeModal(){this.$emit("closeModal")},toggleActivityDetails(){this.isShowActivityDetails=!this.isShowActivityDetails}},computed:{board(){return this.$store.getters.currBoard},group(){return this.$store.getters.currGroup},task(){return JSON.parse(JSON.stringify(this.$store.getters.currTask))},currUser(){return this.$store.getters.user},coverStyle(){return{"background-color":this.taskToEdit.cover.color,"background-image":"url("+this.taskToEdit.cover.imgUrl+")"}},miniUser(){return this.$store.getters.miniUser}},components:{popupMain:ke,attachment:gr,taskComboList:Er,taskCheckList:Hr,contenteditable:Se,activitiesList:dn,commentActions:fe,findMembers:kn},unmounted(){var e,i;if(this.lastAtIndex=0,(i=(e=this.task)==null?void 0:e.activities)!=null&&i.length){var t=this.task.activities.map(n=>{if(n.isEditing)return n});t.forEach(n=>{n&&(n.isEditing=!1,this.updateItem({type:"comment",val:n}))})}this.$emit("cleanStore")}},vn={class:"task-details-modal"},yn={class:"header"},An=o("span",{class:"icon title-icon"},null,-1),Cn={class:"boad-title"},In={class:"task-detail-main"},Tn={class:"task-content"},wn={class:"task-description"},Bn=o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Description")],-1),Mn={class:"description-container"},En={key:0,class:"save-close-description"},Sn={key:1,class:"attachment-container"},xn=o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Attachments")],-1),Un={class:"attachment-content"},Ln={key:2,class:"task-location"},Dn=o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Location")],-1),On=[Dn],Fn={key:3,class:"location-container"},Rn={class:"activity-show-details"},Nn=o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Activity")],-1),Gn={class:"comment-text"},$n={class:"actions-btns-container"},Pn=o("h3",null,"Add To card",-1),Jn=o("span",{class:"icon-members"},null,-1),Zn=y(" Members "),jn=[Jn,Zn],Hn=o("span",{class:"icon-label"},null,-1),Qn=y(" Labels "),Yn=[Hn,Qn],Vn=o("span",{class:"icon-checklist"},null,-1),zn=y(" Checklist "),qn=[Vn,zn],Xn=o("span",{class:"icon-time"},null,-1),Wn=y(" Dates "),Kn=[Xn,Wn],ea=o("span",{class:"icon-attachment"},null,-1),ta=y(" Attachments "),sa=[ea,ta],oa=o("span",{class:"icon-location"},null,-1),ia=y(" Location "),ra=[oa,ia],na=o("span",{class:"icon-cover"},null,-1),aa=y(" Cover "),la=[na,aa],da=o("div",null,[o("h3",null,"Actions"),o("button",null,[o("span",{class:"icon-copy"}),y(" Copy ")]),o("button",null,[o("span",{class:"icon-share"}),y(" Share ")])],-1);function ca(t,e,i,n,r,s){var V;const d=p("task-combo-list"),c=p("contenteditable"),u=p("attachment"),h=p("GMapMarker"),T=p("GMapCluster"),b=p("GMapMap"),w=p("task-check-list"),U=p("avatar"),M=p("comment-actions"),E=p("activities-list"),D=p("popup-main"),j=p("find-members"),Y=L("click-outside");return a(),l("section",vn,[r.taskToEdit.cover?(a(),l("div",{key:0,style:x(s.coverStyle),class:"task-cover"},[o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...v)=>s.closeModal&&s.closeModal(...v))})],4)):m("",!0),o("div",yn,[r.taskToEdit.cover?m("",!0):(a(),l("span",{key:0,class:"icon-cancel",onClick:e[1]||(e[1]=(...v)=>s.closeModal&&s.closeModal(...v))})),An,_(o("input",{type:"text",onBlur:e[2]||(e[2]=(...v)=>s.onTaskEdit&&s.onTaskEdit(...v)),"onUpdate:modelValue":e[3]||(e[3]=v=>r.taskToEdit.title=v),class:"task-details-title"},null,544),[[S,r.taskToEdit.title]])]),o("p",Cn,"In list "+f(s.board.title),1),o("section",In,[o("div",Tn,[r.taskToEdit.members||r.taskToEdit.labelIds||r.taskToEdit.dueDate?(a(),C(d,{key:0,task:r.taskToEdit,onSetLabels:e[4]||(e[4]=v=>s.setLabels("labelsItem")),onSetDate:e[5]||(e[5]=v=>s.setDate("dateItem")),onSetMembers:e[6]||(e[6]=v=>s.setMembers("membersItem")),onAddItem:s.addItem},null,8,["task","onAddItem"])):m("",!0),o("div",wn,[Bn,_((a(),l("div",Mn,[k(c,{onClick:e[7]||(e[7]=v=>r.isDescEditMode=!0),tag:"div",contenteditable:"true",spellcheck:"false",modelValue:r.taskToEdit.description,"onUpdate:modelValue":e[8]||(e[8]=v=>r.taskToEdit.description=v),noHTML:!0,class:A(["description-textarea",{"desc-with-content":r.taskToEdit.description,focused:r.isDescEditMode}])},null,8,["modelValue","class"]),r.isDescEditMode?(a(),l("div",En,[o("button",{class:"save",onClick:e[9]||(e[9]=(...v)=>s.saveDescEdit&&s.saveDescEdit(...v))},"Save"),o("i",{class:"fa-solid fa-x",onClick:e[10]||(e[10]=(...v)=>s.cancelDescEdit&&s.cancelDescEdit(...v))})])):m("",!0)])),[[Y,s.saveDescEdit]])]),(V=r.taskToEdit.attachments)!=null&&V.length?(a(),l("div",Sn,[xn,o("div",Un,[k(u,{attachments:r.taskToEdit.attachments,onUpdateAttachments:s.updateItem},null,8,["attachments","onUpdateAttachments"])])])):m("",!0),s.task.location?(a(),l("div",Ln,On)):m("",!0),s.task.location?(a(),l("div",Fn,[k(b,{class:"maps",center:s.task.location,zoom:7,"map-type-id":"terrain",style:{width:"500px",height:"300px"}},{default:G(()=>[k(T,null,{default:G(()=>[k(h,{position:s.task.location},null,8,["position"])]),_:1})]),_:1},8,["center"]),o("a",{onClick:e[11]||(e[11]=(...v)=>s.deleteMap&&s.deleteMap(...v))},"Delete")])):m("",!0),(a(!0),l(I,null,B(r.taskToEdit.checklists,v=>(a(),C(w,{key:v._id,checklist:v,onUpdateItem:s.updateItem},null,8,["checklist","onUpdateItem"]))),128)),o("div",Rn,[Nn,o("button",{class:"show-details-btn",onClick:e[12]||(e[12]=(...v)=>s.toggleActivityDetails&&s.toggleActivityDetails(...v))},"Show Details")]),_((a(),l("div",{class:A([{open:r.isComment},"comment-text-container"])},[o("div",Gn,[k(U,{size:"32",name:s.currUser.fullname},null,8,["name"]),_(o("input",{class:A({open:r.isComment}),onClick:e[13]||(e[13]=(...v)=>s.openComment&&s.openComment(...v)),onInput:e[14]||(e[14]=v=>s.tagMembers(null)),placeholder:"Write a comment...",type:"text","onUpdate:modelValue":e[15]||(e[15]=v=>r.comment=v)},null,34),[[S,r.comment]]),r.isComment?(a(),C(M,{key:0,class:A([{open:r.isComment},"comments-main-container flex space-between"]),onAddComment:s.addComment,onCloseComment:s.closeComment},null,8,["class","onAddComment","onCloseComment"])):m("",!0)])],2)),[[Y,s.closeComment]]),k(E,{task:s.task,user:s.miniUser,showDetails:r.isShowActivityDetails,onUpdateItem:s.updateItem,onFindMembers:s.tagMembers,memberToAdd:r.memberToAdd},null,8,["task","user","showDetails","onUpdateItem","onFindMembers","memberToAdd"])]),o("div",$n,[o("div",null,[Pn,o("button",{onClick:e[16]||(e[16]=v=>s.setMembers("membersItem"))},jn),o("button",{onClick:e[17]||(e[17]=v=>s.setLabels("labelsItem"))},Yn),o("button",{onClick:e[18]||(e[18]=v=>s.setChecklist("checklistItem"))},qn),o("button",{onClick:e[19]||(e[19]=v=>s.setDate("dateItem"))},Kn),o("button",{onClick:e[20]||(e[20]=v=>s.setAttachments("attachmentItem"))},sa),o("button",{onClick:e[21]||(e[21]=v=>s.setLocation("locationItem"))},ra),o("button",{onClick:e[22]||(e[22]=v=>s.setCover("coverItem"))},la)]),da,r.actionType?(a(),C(D,{key:0,task:s.task,onClosePopup:s.closePopup,popupData:r.popupData,onUpdateCover:s.updateCover,cmp:r.actionType,onAddItem:s.addItem,onSetItem:t.setItem,onUpdateLabels:s.updateLabels},null,8,["task","onClosePopup","popupData","onUpdateCover","cmp","onAddItem","onSetItem","onUpdateLabels"])):m("",!0)]),r.isFindMembers?(a(),C(j,{key:0,board:s.board,class:"find-members",onAddTag:s.addTag},null,8,["board","onAddTag"])):m("",!0)])])}var ua=g(fn,[["render",ca]]);const ma={name:"group-edit-popup",props:{group:Object},data(){return{}},methods:{closePopup(){this.$emit("closePopup")},removeGroup(){this.$emit("removeGroup",this.group._id),this.$emit("closePopup")}}},ha={class:"group-edit-popup"},pa=o("p",null,"List actions",-1);function ga(t,e,i,n,r,s){return a(),l("section",ha,[o("header",null,[pa,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...d)=>s.closePopup&&s.closePopup(...d))})]),o("main",null,[o("p",{onClick:e[1]||(e[1]=(...d)=>s.removeGroup&&s.removeGroup(...d))},"Delete list...")])])}var ba=g(ma,[["render",ga]]);const _a={name:"board-group",emits:["columnChange","addGroup","removeTask","addTask","taskChange","editTask","cleanStore","editGroup","removeGroup"],props:{groups:{type:Array,required:!0},board:Object},data(){return{scene:{groups:this.groups},isTaskDetail:!1,isLabelsOpen:!1,isQuickEdit:!1,isGroupEdit:[]}},components:{Container:xe,Draggable:he,taskPreview:Ui,taskAdd:$i,addGroup:zi,taskDetailsModal:ua,groupEditPopup:ba},watch:{groups(t,e){this.scene={groups:t}}},methods:{cleanStore(){this.$emit("cleanStore",["Task","Group"])},openTask(t,e,i){this.isQuickEdit||(this.isTaskDetail=!0,this.$store.commit({type:"setCurrGroup",group:e}),this.$store.commit({type:"setCurrTask",task:i}))},addGroup(t){this.$emit("addGroup",t)},editGroupTitle(t,e,i){const n=t.target.value;if(!n)return t.target.value=e.title;const r=JSON.parse(JSON.stringify(e));r.title=n,this.$emit("editGroup",{groupIdx:i,newGroup:r})},toggleGroupEdit(t,e=!1){(typeof t=="object"||e)&&this.isGroupEdit.forEach((i,n)=>this.isGroupEdit[n]=!1),this.isGroupEdit[t]=e},removeGroup(t){this.$emit("removeGroup",t)},removeTask(t,e){const i={taskId:t,groupId:e};this.$emit("removeTask",i)},addTask(t,e){const i={title:t,groupId:e,members:[]};this.$emit("addTask",i)},editTask(t){this.$emit("editTask",t)},closeModal(){this.isTaskDetail=!1},toggleLabels(){this.isLabelsOpen=!this.isLabelsOpen},applyDrag(t,e){const{removedIndex:i,addedIndex:n,payload:r}=e;if(i===null&&n===null)return t;const s=[...t];let d=r;return i!==null&&(d=s.splice(i,1)[0]),n!==null&&s.splice(n,0,d),s},onGroupDrop(t){const e=Object.assign({},this.scene);e.groups=this.applyDrag(e.groups,t),this.scene=e,this.$emit("columnChange",this.scene.groups)},onTaskDrop(t,e){if(e.removedIndex!==null||e.addedIndex!==null){const i=Object.assign({},this.scene),n=i.groups.filter(d=>d._id===t)[0],r=i.groups.indexOf(n),s=Object.assign({},n);s.tasks=this.applyDrag(s.tasks,e),this.$emit("taskChange",{groupIdx:r,newGroup:s})}},getCardPayload(t){return e=>this.scene.groups.filter(i=>i._id===t)[0].tasks[e]},onQuickEdit(t){this.isQuickEdit=t},updateTask(t){this.groups.filter(e=>(e.tasks.some(i=>i._id===t._id),e._id)),this.$emit("editTask",t)}}},ka={class:"group-container"},fa={class:"group-title"},va=["value","onChange"],ya=["onClick"];function Aa(t,e,i,n,r,s){const d=p("group-edit-popup"),c=p("task-preview"),u=p("Container"),h=p("task-add"),T=p("Draggable"),b=p("add-group"),w=p("task-details-modal"),U=L("click-outside");return a(),l(I,null,[k(u,{"group-name":"cols",tag:"div",orientation:"horizontal","drag-handle-selector":".group-title","non-drag-area-selector":".group-edit-popup","drag-class":"dragging","drop-class":"dropping","animation-duration":0,onDrop:e[0]||(e[0]=M=>s.onGroupDrop(M))},{default:G(()=>[(a(!0),l(I,null,B(r.scene.groups,(M,E)=>(a(),C(T,{class:"",key:M._id},{default:G(()=>[o("section",ka,[o("section",fa,[o("textarea",{value:M.title,onChange:D=>s.editGroupTitle(D,M,E),spellcheck:"false",class:"group-title inline-input"},null,40,va),o("span",{class:"menu-icon",onClick:D=>s.toggleGroupEdit(E,!0)},null,8,ya),r.isGroupEdit[E]?_((a(),C(d,{key:0,class:"popup",onClosePopup:D=>s.toggleGroupEdit(E),onRemoveGroup:s.removeGroup,group:M},null,8,["onClosePopup","onRemoveGroup","group"])),[[U,s.toggleGroupEdit]]):m("",!0)]),k(u,{orientation:"vertical","group-name":"col-items","non-drag-area-selector":".on-quick-edit","get-child-payload":s.getCardPayload(M._id),"drop-placeholder":{className:"drag-placeholder-task"},"drag-class":"dragging","drop-class":"dropping","animation-duration":0,onDrop:D=>s.onTaskDrop(M._id,D)},{default:G(()=>[(a(!0),l(I,null,B(M.tasks,D=>(a(),C(c,{onUpdateTask:s.updateTask,onOpenTask:j=>s.openTask(i.board,M,D),onOnQuickEdit:s.onQuickEdit,onRemoveTask:j=>s.removeTask(j,M._id),onClick:R(j=>s.openTask(i.board,M,D),["stop"]),onToggleLabels:s.toggleLabels,key:D._id,task:D,labelStatus:r.isLabelsOpen},null,8,["onUpdateTask","onOpenTask","onOnQuickEdit","onRemoveTask","onClick","onToggleLabels","task","labelStatus"]))),128))]),_:2},1032,["get-child-payload","onDrop"]),k(h,{onAddTask:D=>s.addTask(D,M._id)},null,8,["onAddTask"])])]),_:2},1024))),128)),k(b,{onAdd:s.addGroup},null,8,["onAdd"])]),_:1}),o("div",{class:A(["overlay",{"open-overlay":r.isTaskDetail}])},[r.isTaskDetail?_((a(),C(w,{key:0,onCleanStore:s.cleanStore,onCloseModal:s.closeModal,onEditTask:s.editTask},null,8,["onCleanStore","onCloseModal","onEditTask"])),[[U,s.closeModal]]):m("",!0)],2)],64)}var Ca=g(_a,[["render",Aa]]);const Ia={name:"board-header-title",props:{board:Object,createdBy:String},data(){return{titleToEdit:""}},created(){this.titleToEdit=this.boardTitle},watch:{"$route.params.boardId":{async handler(t,e){this.titleToEdit=this.$store.getters.currBoard.title},deep:!0,immediate:!0}},methods:{editTitle(){if(!this.titleToEdit)return this.titleToEdit=this.boardTitle;!this.isEditAble||this.$emit("editTitle",this.titleToEdit)}},computed:{userId(){var t;return(t=this.$store.getters.miniUser)==null?void 0:t._id},isEditAble(){return this.createdBy===this.userId},inputSize(){const i=this.titleToEdit.length-2;return i<1?1:i>60?60:i},boardTitle(){var t;return(t=this.board)==null?void 0:t.title}}},Ta={class:"board-header-title"},wa=["size","disabled"];function Ba(t,e,i,n,r,s){return a(),l("section",Ta,[_(o("input",{type:"text",size:s.inputSize,"onUpdate:modelValue":e[0]||(e[0]=d=>r.titleToEdit=d),class:A(["inline-input",{editable:s.isEditAble}]),disabled:!s.isEditAble,onBlur:e[1]||(e[1]=(...d)=>s.editTitle&&s.editTitle(...d))},null,42,wa),[[S,r.titleToEdit]])])}var Ma=g(Ia,[["render",Ba]]);const Ea={name:"board-header-favorite",props:{favorite:Boolean},data(){return{isFavorite:this.favorite,isHovered:!1}},watch:{"$route.params.boardId":{handler(t,e){const i=this.$store.getters.user;this.isFavorite=i==null?void 0:i.favorites.some(n=>n===this.$route.params.boardId)},deep:!0,immediate:!0}},methods:{toggleFavorite(){this.isFavorite=!this.isFavorite,this.$emit("toggleFavorite",this.isFavorite)}},computed:{favoriteIcon(){return this.isFavorite?"fa-solid fa-star":"fa-regular fa-star"},starTxt(){const t=this.isFavorite?"unstar":"star",e=this.isFavorite?"removed from":"added to";return`Click to ${t} this board. It will be ${e} your starred list.`}}},Sa=["title"];function xa(t,e,i,n,r,s){return a(),l("section",{class:"board-header-favorite",onClick:e[0]||(e[0]=(...d)=>s.toggleFavorite&&s.toggleFavorite(...d)),title:s.starTxt},[o("i",{class:A(s.favoriteIcon)},null,2)],8,Sa)}var Ua=g(Ea,[["render",xa]]);const La={name:"members-preview",props:{board:Object},components:{}},Da={class:"members-preview"},Oa={key:0,class:"admin-badge",src:"https://a.trellocdn.com/prgb/dist/images/chevron.88a4454280d68a816b89.png"};function Fa(t,e,i,n,r,s){const d=p("avatar");return a(),l("section",Da,[(a(!0),l(I,null,B(i.board.members,c=>(a(),l("div",{class:"avatar-container",key:c._id},[k(d,{size:28,color:"white",name:c.fullname},null,8,["name"]),i.board.createdBy._id===c._id?(a(),l("img",Oa)):m("",!0)]))),128))])}var Ra=g(La,[["render",Fa]]);const Na={name:"invite-members",props:{board:Object},data(){return{appUsers:null,filterBy:{name:""}}},created(){this.appUsers=this.users},methods:{closeModal(){this.$emit("closeInviteModal")},addMember({fullname:t,_id:e,imgUrl:i}){const n={fullname:t,_id:e,imgUrl:i};let r=JSON.parse(JSON.stringify(this.board));r.members.push(n),this.$emit("addMember",r.members)}},computed:{users(){return this.$store.getters.getAllUsers},getRelevantUsers(){let t=JSON.parse(JSON.stringify(this.appUsers));const e=new RegExp(this.filterBy.name,"i");return t=t.filter(i=>e.test(i.fullname)),t.filter(i=>!this.board.members.some(n=>i._id===n._id))}}},Ga={class:"invite-members-modal"},$a=o("p",null,"Invite to board",-1),Pa=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),Ja=[Pa],Za=o("h4",null,"Add Member",-1),ja=["onClick"];function Ha(t,e,i,n,r,s){const d=p("avatar");return a(),l("section",Ga,[o("header",null,[$a,o("span",{onClick:e[0]||(e[0]=(...c)=>s.closeModal&&s.closeModal(...c))},Ja)]),o("main",null,[_(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>r.filterBy.name=c),placeholder:"Member name"},null,512),[[S,r.filterBy.name]]),Za,o("ul",null,[(a(!0),l(I,null,B(s.getRelevantUsers,(c,u)=>(a(),l("li",{key:u,onClick:h=>s.addMember(c)},[k(d,{size:"32",name:c.fullname},null,8,["name"]),o("p",null,f(c.fullname),1)],8,ja))),128))])])])}var Qa=g(Na,[["render",Ha]]);const Ya={methods:{setCmp(t){this.$emit("changeCmp",t)},async onUploadImg(t){this.isLoading=!0;const e=await re(t.target.files[0]);this.$emit("save",e.url),this.$emit("setBg",{type:"bgImg",val:e.url}),this.isLoading=!1}}},Va={class:"change-bg-menu"},za=o("span",null,"Images",-1),qa=o("span",null,"Colors",-1),Xa={class:"custom-bg"},Wa=o("h2",null,"Custom",-1),Ka=o("label",{for:"imgInput"},[o("div",{class:"add-bg"},[o("span",{class:"icon-plus"})])],-1);function el(t,e,i,n,r,s){return a(),l("section",Va,[o("section",null,[o("div",null,[o("div",{class:"img",onClick:e[0]||(e[0]=d=>s.setCmp("bgPhotos"))}),za]),o("div",null,[o("div",{class:"color",onClick:e[1]||(e[1]=d=>s.setCmp("colorPicker"))}),qa])]),o("div",Xa,[Wa,Ka,o("input",{hidden:"",type:"file",name:"img-input",id:"imgInput",onChange:e[2]||(e[2]=(...d)=>s.onUploadImg&&s.onUploadImg(...d))},null,32)])])}var tl=g(Ya,[["render",el]]);const sl={data(){return{randPics:null,keyword:""}},async created(){this.randPics=await Q.getRandomImages(20)},methods:{async setPics(){this.randPics=await Q.getImages(this.keyword,20)},setBgImg(t){this.$emit("setBg",{type:"bgImg",val:t})}}},ol={class:"background-photos"},il={key:0,class:"photos"},rl=["onClick"],nl=["src"];function al(t,e,i,n,r,s){const d=L("focus");return a(),l("section",ol,[_(o("input",{type:"text",class:"popup-inp","onUpdate:modelValue":e[0]||(e[0]=c=>r.keyword=c),placeholder:"Search photos",onChange:e[1]||(e[1]=(...c)=>s.setPics&&s.setPics(...c)),onKeydown:e[2]||(e[2]=W((...c)=>s.setPics&&s.setPics(...c),["enter"]))},null,544),[[d],[S,r.keyword]]),r.randPics?(a(),l("div",il,[(a(!0),l(I,null,B(r.randPics,c=>(a(),l("div",{key:c._id,onClick:u=>s.setBgImg(c.full)},[o("img",{src:c.thumb,alt:""},null,8,nl)],8,rl))),128))])):m("",!0)])}var ll=g(sl,[["render",al]]);const dl={props:{isOpen:Boolean,board:Object},data(){return{currSection:"Menu",boardUsers:null}},created(){},unmounted(){this.currSection="Menu"},methods:{closeMenu(){this.$emit("closeMenu"),this.currSection="Menu"},changeCmp(t){this.currSection=t},setBg(t,e="bgImg"){e==="bgColor"?this.$emit("setBg",{type:e,val:t}):this.$emit("setBg",t)},goBack(){this.currSection==="changeBg"&&(this.currSection="Menu"),this.currSection==="bgPhotos"&&(this.currSection="changeBg"),this.currSection==="colorPicker"&&(this.currSection="changeBg")},setBgColor(t){this.$emit("setBgColor")},getMember(t){return this.users.find(i=>i._id===t)}},computed:{boardBgStyle(){return{"background-color":this.board.style.bgColor,"background-image":"url("+this.board.style.bgImg+")"}},users(){return this.$store.getters.getAllUsers}},components:{changeBg:tl,bgPhotos:ll,colorPicker:K}},cl={key:1},ul={key:2},ml={key:3},hl={key:4},pl={key:0},gl={class:"about-board"},bl=o("div",null,[o("span",{class:"icon-trello"}),o("p",null,"About this board")],-1),_l=o("p",null,"Change background",-1),kl={key:4,class:"activities"},fl=o("div",{class:"logo"},[o("span",{class:"icon-activity"}),o("p",null,"Activity")],-1),vl={class:"activity-content"},yl={class:"member-name"};function Al(t,e,i,n,r,s){const d=p("change-bg"),c=p("bg-photos"),u=p("color-picker"),h=p("avatar"),T=p("timeago"),b=L("click-outside");return i.isOpen?_((a(),l("div",{key:0,class:A(["board-menu-modal",{open:i.isOpen}])},[o("header",null,[r.currSection!=="Menu"?(a(),l("span",{key:0,class:"icon-back",onClick:e[0]||(e[0]=(...w)=>s.goBack&&s.goBack(...w))})):m("",!0),r.currSection==="Menu"?(a(),l("h3",cl,"Menu")):m("",!0),r.currSection==="changeBg"?(a(),l("h3",ul,"Change background")):m("",!0),r.currSection==="bgPhotos"?(a(),l("h3",ml,"Photos by Unsplash")):m("",!0),r.currSection==="colorPicker"?(a(),l("h3",hl,"Colors")):m("",!0),o("span",{class:"icon-cancel",onClick:e[1]||(e[1]=(...w)=>s.closeMenu&&s.closeMenu(...w))})]),r.currSection==="Menu"?(a(),l("main",pl,[o("section",gl,[bl,o("div",{onClick:e[2]||(e[2]=w=>r.currSection="changeBg")},[o("span",{style:x(s.boardBgStyle),class:"bg-icon"},null,4),_l])])])):m("",!0),r.currSection==="changeBg"?(a(),C(d,{key:1,onSetBg:s.setBg,onChangeCmp:s.changeCmp},null,8,["onSetBg","onChangeCmp"])):m("",!0),r.currSection==="bgPhotos"?(a(),C(c,{key:2,onSetBg:s.setBg},null,8,["onSetBg"])):m("",!0),r.currSection==="colorPicker"?(a(),C(u,{key:3,class:"wide",onUpdateColor:s.setBg},null,8,["onUpdateColor"])):m("",!0),r.currSection==="Menu"?(a(),l("section",kl,[fl,o("ul",null,[(a(!0),l(I,null,B(i.board.activities,w=>(a(),l("li",{class:"activity",key:w._id},[o("div",null,[k(h,{size:"32",name:s.getMember(w.byMemberId).fullname},null,8,["name"])]),o("div",vl,[o("span",yl,f(s.getMember(w.byMemberId).fullname),1),o("span",null,f(w.txt),1),o("div",null,[k(T,{class:"time",datetime:w.createdAt},null,8,["datetime"])])])]))),128))])])):m("",!0)],2)),[[b,s.closeMenu]]):m("",!0)}var Cl=g(dl,[["render",Al]]);const Il={name:"close-filter",props:{board:Object,filter:Object},data(){return{dueDateOptions:[{_id:"1",txt:"No dates",classList:"icon-date",val:"no-dates"},{_id:"2",txt:"Overdue",classList:"icon-time red-bg",val:"overdue"},{_id:"3",txt:"Due in the next day",classList:"icon-time wait-bg",val:"next-day"}],filterBy:{title:"",labels:[],members:[],dueDate:[]}}},created(){this.filterBy=this.filter},methods:{closeFilter(){this.$emit("closeFilter")},setFilter(){console.log(this.filter),this.$emit("setFilter",de({},this.filterBy))}},components:{}},Tl={class:"board-filter"},wl=o("h3",null,"Filter",-1),Bl={class:"search-inp"},Ml=o("h4",null,"Keyword",-1),El=o("p",null,"Search cards, members, labels, and more.",-1),Sl={class:"members"},xl=o("h4",null,"Members",-1),Ul=["value","id"],Ll={class:"dates"},Dl=o("h4",null,"Due date",-1),Ol=["value"],Fl={class:"labels"},Rl=o("h4",null,"Labels",-1),Nl=o("span",{class:"icon-label"},null,-1),Gl=o("p",null,"No labels",-1),$l=["value","id"];function Pl(t,e,i,n,r,s){const d=p("avatar"),c=L("focus");return a(),l("section",Tl,[o("header",null,[t.currSection!=="Menu"?(a(),l("span",{key:0,class:"icon-back",onClick:e[0]||(e[0]=(...u)=>t.goBack&&t.goBack(...u))})):m("",!0),wl,o("span",{class:"icon-cancel",onClick:e[1]||(e[1]=(...u)=>s.closeFilter&&s.closeFilter(...u))})]),o("div",Bl,[Ml,_(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>r.filterBy.title=u),placeholder:"Enter a keyword...",onInput:e[3]||(e[3]=(...u)=>s.setFilter&&s.setFilter(...u))},null,544),[[c],[S,r.filterBy.title]]),El]),o("div",Sl,[xl,o("ul",null,[(a(!0),l(I,null,B(i.board.members,(u,h)=>(a(),l("li",{key:u._id},[_(o("input",{value:u._id,"onUpdate:modelValue":e[4]||(e[4]=T=>r.filterBy.members=T),onChange:e[5]||(e[5]=(...T)=>s.setFilter&&s.setFilter(...T)),type:"checkbox",id:u._id},null,40,Ul),[[H,r.filterBy.members]]),k(d,{size:"24",name:u.fullname},null,8,["name"]),o("p",null,f(u.fullname),1)]))),128))])]),o("div",Ll,[Dl,o("ul",null,[(a(!0),l(I,null,B(r.dueDateOptions,u=>(a(),l("li",{key:u._id},[o("label",null,[_(o("input",{onChange:e[6]||(e[6]=(...h)=>s.setFilter&&s.setFilter(...h)),"onUpdate:modelValue":e[7]||(e[7]=h=>r.filterBy.dueDate=h),type:"checkbox",value:u.val},null,40,Ol),[[H,r.filterBy.dueDate]]),o("span",{class:A(u.classList)},null,2),o("p",null,f(u.txt),1)])]))),128))])]),o("div",Fl,[Rl,o("ul",null,[o("li",null,[o("label",null,[_(o("input",{onChange:e[8]||(e[8]=(...u)=>s.setFilter&&s.setFilter(...u)),type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=u=>r.filterBy.labels=u),value:"none"},null,544),[[H,r.filterBy.labels]]),Nl,Gl])]),(a(!0),l(I,null,B(i.board.labels,u=>(a(),l("li",null,[o("label",null,[_(o("input",{value:u._id,"onUpdate:modelValue":e[10]||(e[10]=h=>r.filterBy.labels=h),onChange:e[11]||(e[11]=(...h)=>s.setFilter&&s.setFilter(...h)),type:"checkbox",id:u._id},null,40,$l),[[H,r.filterBy.labels]]),o("div",{class:"label",style:x({"background-color":u.color})},[o("p",null,f(u.title),1)],4)])]))),256))])])])}var ue=g(Il,[["render",Pl]]);const Jl={name:"board-header",emits:["editTitle","toggleFavorite"],props:{board:Object,filterBy:Object},data(){return{isInviteModal:!1,isMenuModal:!1,isFilterModal:!1}},components:{boardHeaderTitle:Ma,boardHeaderFavorite:Ua,membersPreview:Ra,inviteMembers:Qa,boardMenuModal:Cl,boardFilter:ue,BoardFilter:ue},methods:{editTitle(t){this.$emit("editTitle",t)},toggleFavorite(t){this.$emit("toggleFavorite",t)},closeModal(){this.isInviteModal=!1},closeFilterModal(){this.isFilterModal=!1},toggleBoardMenu(){this.isMenuModal=!this.isMenuModal},addMember(t){this.$emit("addMember",t)},setBg(t){this.$emit("setBg",t)},setFilter(t){this.$emit("setFilter",t)}},computed:{boardTitle(){var t;return(t=this.$store.getters.currBoard)==null?void 0:t.title},boardFavoriteStatus(){const t=JSON.parse(JSON.stringify(this.user));return t!=null&&t.favorites||(t.favorites=[]),t==null?void 0:t.favorites.includes(this.board._id)},boardCreatorId(){var t,e;return(e=(t=this.$store.getters.currBoard)==null?void 0:t.createdBy)==null?void 0:e._id},user(){return this.$store.getters.user}}},Zl={class:"board-header flex space-between"},jl={class:"menu-left-header"},Hl=o("button",{class:"btn"},[o("span",{class:"board-header-board-icon"}),y(" Board "),o("span",{class:"board-header-open-icon"})],-1),Ql={class:"invite-members-container",title:"Invite to board"},Yl=o("span",{class:"board-header-invite-icon"},null,-1),Vl=y(" Invite "),zl=[Yl,Vl],ql={class:"right-btns"},Xl=o("span",{class:"board-header-filter-icon"},null,-1),Wl=y("Filter "),Kl=[Xl,Wl],ed=o("span",{class:"board-header-menu-icon"},null,-1),td=y("Show menu "),sd=[ed,td];function od(t,e,i,n,r,s){const d=p("board-header-title"),c=p("board-header-favorite"),u=p("members-preview"),h=p("invite-members"),T=p("board-filter"),b=p("board-menu-modal"),w=L("click-outside");return a(),l("header",Zl,[o("section",jl,[Hl,k(d,{style:{color:"black"},onEditTitle:s.editTitle,board:i.board,createdBy:s.boardCreatorId},null,8,["onEditTitle","board","createdBy"]),k(c,{class:"board-header-invite btn",onToggleFavorite:s.toggleFavorite,favorite:s.boardFavoriteStatus},null,8,["onToggleFavorite","favorite"]),k(u,{board:i.board},null,8,["board"]),o("div",Ql,[o("button",{class:"btn",onClick:e[0]||(e[0]=U=>r.isInviteModal=!r.isInviteModal)},zl),r.isInviteModal?_((a(),C(h,{key:0,board:i.board,onCloseInviteModal:s.closeModal,onAddMember:s.addMember},null,8,["board","onCloseInviteModal","onAddMember"])),[[w,s.closeModal]]):m("",!0)])]),o("section",ql,[o("button",{class:"btn",onClick:e[1]||(e[1]=U=>r.isFilterModal=!r.isFilterModal)},Kl),o("button",{class:"btn show-menu",onClick:e[2]||(e[2]=(...U)=>s.toggleBoardMenu&&s.toggleBoardMenu(...U))},sd),r.isFilterModal?_((a(),C(T,{key:0,onSetFilter:s.setFilter,onCloseFilter:s.closeFilterModal,board:i.board,filter:i.filterBy},null,8,["onSetFilter","onCloseFilter","board","filter"])),[[w,s.closeFilterModal]]):m("",!0),k(b,{onSetBg:s.setBg,board:i.board,isOpen:r.isMenuModal,onCloseMenu:e[3]||(e[3]=U=>r.isMenuModal=!1)},null,8,["onSetBg","board","isOpen"])])])}var id=g(Jl,[["render",od]]);const rd={name:"board-details",components:{boardGroup:Ca,boardHeader:id},data(){return{filterBy:{title:"",labels:[],members:[],dueDate:[]}}},watch:{"$route.params.boardId":{immediate:!0,async handler(t,e){await this.$store.dispatch({type:"setCurrentBoard",boardId:t})},deep:!0}},async created(){await this.loadBoard(),(!this.boards||!this.boards.length)&&await this.$store.dispatch({type:"loadBoards"})},unmounted(){this.$store.commit({type:"setCurrentBoard",board:null})},methods:{async loadBoard(){try{const t=this.$route.params.boardId;await this.$store.dispatch({type:"setCurrentBoard",boardId:t}),this.$store.commit({type:"addRecentBoard",boardId:t}),this.board=null,await Ue()}catch(t){console.log("err",t)}},removeTask(t){this.$store.dispatch({type:"removeTask",task:t})},setTask({title:t,groupId:e}){var i={title:t};this.$store.dispatch({type:"setTask",groupId:e,task:i})},editTask(t){this.$store.dispatch({type:"setTask",task:t})},quickUpdateTask(){this.$store.dispatch({type:"setTask",task:editedTask})},addGroup(t){this.$store.dispatch({type:"addGroup",groupTitle:t})},editGroup({groupIdx:t,newGroup:e}){this.$store.dispatch({type:"setGroup",groupIdx:t,newGroup:e})},removeGroup(t){this.$store.dispatch({type:"removeGroup",groupId:t})},columnChange(t){this.$store.dispatch({type:"setGroups",groups:t})},taskChange({groupIdx:t,newGroup:e}){this.$store.dispatch({type:"setGroup",groupIdx:t,newGroup:e})},editBoardTitle(t){this.$store.dispatch({type:"setBoardPrefs",key:"title",val:t})},async toggleFavorite(t){const e=JSON.parse(JSON.stringify(this.user));e.favorites||(e.favorites=[]);const i=e.favorites.findIndex(n=>n===this.currBoard._id);t?e.favorites.push(this.currBoard._id):e.favorites.splice(i,1),await this.$store.dispatch({type:"updateUser",user:e})},cleanStore(t){t.forEach(e=>{const i={type:`setCurr${e}`};i[e.toLowerCase()]=null,this.$store.commit(i)})},async addMember(t){await this.$store.dispatch({type:"setBoardPrefs",key:"members",val:t})},async setBg(t){const e=JSON.parse(JSON.stringify(this.currBoard));e.style[t.type]=t.val,t.type==="bgColor"&&(e.style.bgImg=""),await this.$store.dispatch({type:"saveBoard",board:e}),await this.$store.dispatch({type:"setCurrentBoard",boardId:e._id})},setFilter(t){const e=JSON.parse(JSON.stringify(t));this.filterBy=e}},computed:{user(){return this.$store.getters.user},miniUser(){return this.$store.getters.miniUser},groups(){return this.$store.getters.boardGroups},currBoard(){return this.$store.getters.currBoard},boards(){return this.$store.getters.boards},groupsToDisplay(){let t=[];const e=JSON.parse(JSON.stringify(this.currBoard)),i=new RegExp(this.filterBy.title,"i");return t=e.groups.filter(n=>i.test(n.title)||n.tasks.some(r=>i.test(r.title))),this.filterBy.members.length&&(t=t.filter(n=>n.tasks.some(r=>{var s;return(s=r.members)==null?void 0:s.some(d=>this.filterBy.members.includes(d._id))})),t=t.map(n=>(n.tasks=n.tasks.filter(r=>{var s;return r.members||(r.members=[]),(s=r.members)==null?void 0:s.some(d=>this.filterBy.members.includes(d._id))}),n))),this.filterBy.labels.length&&(t=t.filter(n=>n.tasks.some(r=>{var s;return(s=r.labelIds)==null?void 0:s.some(d=>this.filterBy.labels.includes(d))})),t=t.map(n=>(n.tasks=n.tasks.filter(r=>{var s;return this.filterBy.labels.includes("none"),(s=r.labelIds)==null?void 0:s.some(d=>{if(d!=="none")return this.filterBy.labels.includes(d)})}),n))),this.filterBy.dueDate&&this.filterBy.dueDate==="overdue"&&(t=t.filter(n=>n.tasks.some(r=>r.status==="overdue"))),t}}},nd={key:0,class:"board-container"},ad={class:"group-container-scrollable"};function ld(t,e,i,n,r,s){const d=p("board-header"),c=p("board-group");return s.currBoard?(a(),l("section",nd,[k(d,{onSetBg:s.setBg,board:s.currBoard,onEditTitle:s.editBoardTitle,onAddMember:s.addMember,onToggleFavorite:s.toggleFavorite,onSetFilter:s.setFilter,filterBy:r.filterBy},null,8,["onSetBg","board","onEditTitle","onAddMember","onToggleFavorite","onSetFilter","filterBy"]),o("section",ad,[k(c,{onRemoveTask:s.removeTask,onAddTask:s.setTask,onEditTask:s.editTask,onTaskChange:s.taskChange,onColumnChange:s.columnChange,onAddGroup:s.addGroup,onEditGroup:s.editGroup,onRemoveGroup:s.removeGroup,onCleanStore:s.cleanStore,groups:s.groupsToDisplay,board:s.currBoard},null,8,["onRemoveTask","onAddTask","onEditTask","onTaskChange","onColumnChange","onAddGroup","onEditGroup","onRemoveGroup","onCleanStore","groups","board"])])])):m("",!0)}var dd=g(rd,[["render",ld]]);const cd={data(){return{board:"",task:null}},created(){var t=this.groups.find(e=>e._id===this.$route.params.groupId);this.task=t.tasks.find(e=>e._id===this.$route.params.taskId)},computed:{groups(){return this.$store.getters.boardGroups}}};function ud(t,e,i,n,r,s){return a(),l("h1",null,f(r.task.title),1)}var md=g(cd,[["render",ud]]);const hd={name:"login-signup",data(){return{user:{fullname:"",username:"",password:""},isLogin:!0}},created(){this.isLogin=this.$route.path==="/login"},methods:{async onLoginSignup(){try{const t=this.isLogin?"login":"signup";await this.$store.dispatch({type:t,cred:this.user}),this.$router.push("/board")}catch(t){console.log(t)}},async handleGoogleLogin(){try{const t=await this.$gAuth.signIn();if(!t)return;const e=t.getBasicProfile().getId(),i=t.getBasicProfile().getEmail(),n=t.getBasicProfile().getName(),r=t.getBasicProfile().getImageUrl(),s={username:i,fullname:n,password:e,imgUrl:r};try{await this.$store.dispatch({type:"login",cred:s})}catch{await this.$store.dispatch({type:"signup",cred:s})}this.$router.push("/board")}catch(t){console.log(t)}},toggleLoginSignup(){this.isLogin=!this.isLogin},setHomePage(t){this.$store.commit({type:"setHomePage",isHome:t})}},created(){this.setHomePage(!0)},unmounted(){this.setHomePage(!1)},computed:{loginSignupBtnTxt(){return this.isLogin?"Login":"Signup"},loginSignupLinkTxt(){return this.isLogin?"Sign up for an account":"Already have an account? Log in"}}},pd={class:"login-wrapper"},gd={class:"main-container"},bd=o("header",null,[o("span",{class:"icon-trello"}),o("h1",null,"Drello")],-1),_d={class:"login-container"},kd=o("h2",null,"Log in to Drello",-1),fd=o("div",{class:"login-option-sep"},"Or",-1),vd=o("span",{class:"google-icon"},null,-1),yd=o("span",{class:"btn-txt"},"Continue with Google",-1),Ad=[vd,yd],Cd=o("hr",null,null,-1);function Id(t,e,i,n,r,s){return a(),l("section",pd,[o("section",gd,[bd,o("main",_d,[kd,o("form",{onSubmit:e[5]||(e[5]=R(()=>{},["prevent"]))},[_(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>r.user.username=d),placeholder:"Enter Username"},null,512),[[S,r.user.username]]),r.isLogin?m("",!0):_((a(),l("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=d=>r.user.fullname=d),type:"text",placeholder:"Enter Full Name"},null,512)),[[S,r.user.fullname]]),_(o("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=d=>r.user.password=d),placeholder:"Enter Password"},null,512),[[S,r.user.password]]),o("button",{class:"login-btn",onClick:e[3]||(e[3]=(...d)=>s.onLoginSignup&&s.onLoginSignup(...d))},f(s.loginSignupBtnTxt),1),fd,o("button",{class:"login-with-google",onClick:e[4]||(e[4]=(...d)=>s.handleGoogleLogin&&s.handleGoogleLogin(...d))},Ad)],32),Cd,o("p",{onClick:e[6]||(e[6]=(...d)=>s.toggleLoginSignup&&s.toggleLoginSignup(...d)),class:"change-form-link"},f(s.loginSignupLinkTxt),1)])])])}var Td=g(hd,[["render",Id]]);const ve=Le({history:De(),routes:[{path:"/",name:"home",component:vt},{path:"/board",name:"board",component:Ht},{path:"/board/:boardId",name:"board-details",component:dd},{path:"/board/:boardId/:groupId/:taskId",name:"task-details",component:md},{path:"/login",name:"login-signup",component:Td,alias:"/signup"}]}),wd="/api/";var Bd=z.create({withCredentials:!0});const P={get(t,e){return X(t,"GET",e)},post(t,e){return X(t,"POST",e)},put(t,e){return X(t,"PUT",e)},delete(t,e){return X(t,"DELETE",e)}};async function X(t,e="GET",i=null){try{return(await Bd({url:`${wd}${t}`,method:e,data:i,params:e==="GET"?i:null})).data}catch(n){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,i),console.dir(n),n.response&&(n.response.status===401||n.response.status===500)&&ve.push("/login"),n}}const $={getBoards:Md,removeBoard:Sd,saveBoard:xd,getBoardById:Ed,getEmptyBoard:Dd,getEmptyGroup:Ud,addActivity:Ld};function Md(t){return P.get("board")}function Ed(t){if(t)return P.get(`board/${t}`)}function Sd(t){return P.delete(`board/${t}`)}function xd(t){return t._id?P.put(`board/${t._id}`,t):P.post("board",t)}function Ud(t="",e=[]){return{_id:J.makeId(),title:t,tasks:e}}function Ld(t,e,i,n,r){return{_id:J.makeId(),byMemberId:e,txt:t,taskId:i,groupId:n,boardId:r,createdAt:Date.now(),isReaden:!1}}function Dd(){return Promise.resolve({title:"",isFavorite:!1,createdBy:"",style:{bgColor:"#cacabb"},labels:[{color:"rgb(0, 121, 191)",title:"Day",_id:"l102"},{color:"rgb(210, 144, 52)",title:"Remarket",_id:"l103"},{color:"rgb(81, 152, 57)",title:"Demand Marketing",_id:"enT4D7oh"},{color:"rgb(176, 70, 50)",title:"Partners",_id:"rtbnYyfi"},{color:"rgb(137, 96, 158)",title:"Government",_id:"5leaLS2n"},{color:"rgb(205, 90, 145)",title:"Planning",_id:"NuwdhQ9L"}],members:[],groups:[{_id:J.makeId(),title:"New List",tasks:[]}],activities:[]})}var Od="/assets/board-preview-skeleton.14cda5dc635d1f13bc48.76c3902e.svg";const Fd={name:"create-board",data(){return{boardToAdd:null,randPics:null,bgImg:"",bgCurrColor:"#cacabb"}},async created(){this.boardToAdd=await $.getEmptyBoard(),this.randPics=await Q.getImages("mountains",4)},methods:{async addBoard(){const t=this.boardToAdd,e=await this.$store.dispatch({type:"saveBoard",board:t});this.$store.commit({type:"setCurrentBoard",board:e}),this.closeModal(),this.$router.push(`/board/${e._id}`)},closeModal(){this.$emit("closeCreateModal")},updateBgColor(t){this.bgCurrColor=t,this.boardToAdd.style.bgColor=t,this.bgImg="",this.boardToAdd.style.bgImg=""},updateBgImg(t,e){this.boardToAdd.style.bgImg=t,this.bgImg=e}},computed:{bgStyle(){var t;return{"background-color":this.boardToAdd.style.bgColor,"background-image":"url("+((t=this.boardToAdd.style)==null?void 0:t.bgImg)+")"}}},components:{colorPicker:K}},Rd={key:0,class:"create-board-modal"},Nd=o("p",null,"Create Board",-1),Gd=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),$d=[Gd],Pd=o("img",{src:Od,alt:"",role:"presentation"},null,-1),Jd=[Pd],Zd={class:"background-picker-container"},jd=o("p",null,"Background",-1),Hd={class:"cover-mini-photos"},Qd=["onClick"],Yd=["src"],Vd={key:0,class:"icon-check"},zd=y(" Board title "),qd=o("span",{class:"red-text"},"*",-1),Xd=["disabled"];function Wd(t,e,i,n,r,s){const d=p("color-picker"),c=L("click-outside");return r.boardToAdd?_((a(),l("section",Rd,[o("header",null,[Nd,o("span",{onClick:e[0]||(e[0]=(...u)=>s.closeModal&&s.closeModal(...u))},$d)]),o("div",{class:"create-board-preview",style:x(s.bgStyle)},Jd,4),o("div",Zd,[jd,o("div",Hd,[(a(!0),l(I,null,B(r.randPics,u=>(a(),l("div",{key:u._id,onClick:h=>s.updateBgImg(u.full,u._id)},[o("img",{src:u.thumb,class:A({"low-opacity ":r.bgImg===u._id})},null,10,Yd),r.bgImg===u._id?(a(),l("span",Vd)):m("",!0)],8,Qd))),128))]),k(d,{bgImg:r.bgImg,onUpdateColor:s.updateBgColor},null,8,["bgImg","onUpdateColor"])]),o("div",null,[o("label",null,[zd,qd,_(o("input",{type:"text",class:"board-title-inp","onUpdate:modelValue":e[1]||(e[1]=u=>r.boardToAdd.title=u),onKeydown:e[2]||(e[2]=W((...u)=>s.addBoard&&s.addBoard(...u),["enter"]))},null,544),[[S,r.boardToAdd.title]])])]),o("button",{disabled:!r.boardToAdd.title,class:"create-board-btn",onClick:e[3]||(e[3]=(...u)=>s.addBoard&&s.addBoard(...u))},"Create",8,Xd)])),[[c,s.closeModal]]):m("",!0)}var Kd=g(Fd,[["render",Wd]]);const ec={name:"user-modal",props:{user:Object},methods:{closeModal(){this.$emit("closeModal")},async logout(){await this.$store.dispatch({type:"logout"}),this.$router.push("/login"),this.closeModal()}}},tc={class:"user-modal"},sc=o("h4",null,"Account",-1),oc=o("p",null,"Logout",-1),ic=[oc];function rc(t,e,i,n,r,s){const d=p("avatar");return a(),l("section",tc,[o("header",null,[sc,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...c)=>s.closeModal&&s.closeModal(...c))})]),o("article",null,[k(d,{size:"40",name:i.user.fullname},null,8,["name"]),o("div",null,[o("p",null,f(i.user.fullname),1),o("span",null,f(i.user.username),1)])]),o("div",{class:"logout",onClick:e[1]||(e[1]=(...c)=>s.logout&&s.logout(...c))},ic)])}var nc=g(ec,[["render",rc]]);const ac={name:"board-serach",props:{filterBy:Object},data(){return{search:""}},created(){},methods:{goToBoard(t){this.$router.push(`/board/${t}`)}},computed:{boards(){return this.$store.getters.boards},boardToDisplay(){let t=JSON.parse(JSON.stringify(this.boards)),e;return this.search?e=new RegExp(this.search,"i"):e=new RegExp(this.filterBy.title,"i"),t=t.filter(i=>e.test(i.title)),t}}},lc={class:"board-search"},dc=o("header",null,[o("h4",null,"Available Boards")],-1),cc={class:"boards-list"},uc=["onClick"];function mc(t,e,i,n,r,s){return a(),l("section",lc,[dc,_(o("input",{type:"text",class:"board-search-inp","onUpdate:modelValue":e[0]||(e[0]=d=>r.search=d)},null,512),[[S,r.search]]),o("div",cc,[o("ul",null,[(a(!0),l(I,null,B(s.boardToDisplay,d=>(a(),l("li",{class:"board-display",key:d._id,onClick:c=>s.goToBoard(d._id)},[o("div",{class:"board-bg",style:x({"background-color":d.style.bgColor,"background-image":"url("+d.style.bgImg+")"})},null,4),o("p",null,f(d.title),1)],8,uc))),128))])])])}var hc=g(ac,[["render",mc]]);const pc={name:"recent-boards-popup",props:{user:Object},data(){return{recentBoards:[]}},async created(){await this.$store.dispatch({type:"loadBoards"}),this.recentBoards=JSON.parse(JSON.stringify(this.user.recentBoards)).map(t=>this.getBoard(t))},methods:{getBoard(t){return this.boards.find(i=>i._id===t)},goToBoard(t){this.$router.push(`/board/${t}`)},closePopup(){this.$emit("closePopup")}},computed:{boards(){return this.$store.getters.boards}}},gc={class:"recent-boards-popup"},bc=o("p",null,"Recent Boards",-1),_c=["onClick"];function kc(t,e,i,n,r,s){return a(),l("section",gc,[o("header",null,[bc,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...d)=>s.closePopup&&s.closePopup(...d))})]),o("main",null,[o("ul",null,[(a(!0),l(I,null,B(r.recentBoards,d=>(a(),l("li",{key:d._id,onClick:c=>s.goToBoard(d._id)},[o("div",{class:"board-bg",style:x({"background-color":d.style.bgColor,"background-image":"url("+d.style.bgImg+")"})},null,4),o("p",null,f(d.title),1)],8,_c))),128))])])])}var fc=g(pc,[["render",kc]]);const vc={name:"favorite-boards-popup",props:{user:Object},data(){return{favoriteBoards:[]}},methods:{getBoard(t){return this.boards.find(i=>i._id===t)},goToBoard(t){this.$router.push(`/board/${t}`)},closePopup(){this.$emit("closePopup")}},computed:{boards(){return this.$store.getters.boards},users(){return this.$store.getters.user},favBoards(){return this.user.favorites.map(t=>this.boards.filter(i=>i._id===t))}}},yc={class:"favorite-boards-popup"},Ac=o("p",null,"Favorite Boards",-1),Cc=["onClick"];function Ic(t,e,i,n,r,s){return a(),l("section",yc,[o("header",null,[Ac,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...d)=>s.closePopup&&s.closePopup(...d))})]),o("main",null,[o("ul",null,[(a(!0),l(I,null,B(s.favBoards.flat(),d=>(a(),l("li",{key:d._id,onClick:c=>s.goToBoard(d._id)},[o("div",{class:"board-bg",style:x({"background-color":d.style.bgColor,"background-image":"url("+d.style.bgImg+")"})},null,4),o("p",null,f(d.title),1)],8,Cc))),128))])])])}var Tc=g(vc,[["render",Ic]]);const wc={name:"more-popup",methods:{openBoards(t){t==="recent"?this.$emit("openRecent"):this.$emit("openStarred"),this.$emit("closeMoreModal")}}},Bc={class:"more-popup"},Mc=o("h4",null,"More",-1),Ec=o("p",null,"Recent Boards",-1),Sc=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M16.7071 12.7071L9.63606 19.7781C9.24554 20.1687 8.61237 20.1687 8.22185 19.7781C7.83132 19.3876 7.83132 18.7544 8.22185 18.3639L14.5858 12L8.22185 5.636C7.83132 5.24548 7.83132 4.61231 8.22185 4.22179C8.61237 3.83126 9.24554 3.83126 9.63606 4.22179L16.7071 11.2929C17.0977 11.6834 17.0977 12.3165 16.7071 12.7071Z",fill:"currentColor"})],-1),xc=[Ec,Sc],Uc=o("p",null,"Starred Boards",-1),Lc=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M16.7071 12.7071L9.63606 19.7781C9.24554 20.1687 8.61237 20.1687 8.22185 19.7781C7.83132 19.3876 7.83132 18.7544 8.22185 18.3639L14.5858 12L8.22185 5.636C7.83132 5.24548 7.83132 4.61231 8.22185 4.22179C8.61237 3.83126 9.24554 3.83126 9.63606 4.22179L16.7071 11.2929C17.0977 11.6834 17.0977 12.3165 16.7071 12.7071Z",fill:"currentColor"})],-1),Dc=[Uc,Lc];function Oc(t,e,i,n,r,s){return a(),l("section",Bc,[o("header",null,[Mc,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=d=>t.$emit("closeMoreModal"))})]),o("main",null,[o("ul",null,[o("li",{onClick:e[1]||(e[1]=d=>s.openBoards("recent"))},xc),o("li",{onClick:e[2]||(e[2]=d=>s.openBoards("starred"))},Dc)])])])}var Fc=g(wc,[["render",Oc]]),Rc="/assets/dog-sleep.eb2e0777.svg";const Nc={name:"notify-user",data(){return{filterBy:{isReaden:!0}}},async created(){},methods:{async toggleReaden(t){await this.$store.dispatch({type:"toggleActivity",activityId:t})},getUser(t){return console.log(this.users),this.users.find(i=>i._id===t).fullname},getBoard(t){return this.boards.find(i=>i._id===t)},async toggleAllActivities(){await this.$store.dispatch({type:"toggleAllActivities"})}},computed:{activities(){var t;return(t=this.$store.getters.user)==null?void 0:t.activities},isReaden(){var t;return(t=this.$store.getters.user)==null?void 0:t.activities.some(e=>!e.isReaden)},users(){return this.$store.getters.getAllUsers},boards(){return this.$store.getters.boards},activitiesToDisplay(){return this.filterBy.isReaden?this.activities.filter(t=>!t.isReaden):this.activities}}},Gc={key:0,class:"user-notification"},$c=o("p",null,"Notification",-1),Pc={class:"activity-actions"},Jc={key:0,class:"empty-notifications"},Zc=o("img",{src:Rc,alt:""},null,-1),jc=o("h2",null,"No unread notifications",-1),Hc=o("p",null,"Click View all to view all of your notifications",-1),Qc=[Zc,jc,Hc],Yc={key:1},Vc=["onClick"],zc={class:"notification-content"},qc={key:0},Xc={key:1},Wc={key:2},Kc={class:"user flex"},eu={class:"activity"},tu=o("div",{class:"icon"},[o("span",{class:"icon-add-member"})],-1),su={key:0},ou={key:1},iu=y("task"),ru={key:2};function nu(t,e,i,n,r,s){const d=p("avatar"),c=p("router-link"),u=p("timeago");return s.users.length&&s.boards.length?(a(),l("section",Gc,[o("header",null,[$c,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=h=>t.$emit("closeModal"))})]),o("div",Pc,[r.filterBy.isReaden?(a(),l("span",{key:0,onClick:e[1]||(e[1]=h=>r.filterBy.isReaden=!1)},"View All")):(a(),l("span",{key:1,onClick:e[2]||(e[2]=h=>r.filterBy.isReaden=!0)},"Filter by unread")),s.activities.some(h=>h.isReaden===!1)?(a(),l("span",{key:2,onClick:e[3]||(e[3]=(...h)=>s.toggleAllActivities&&s.toggleAllActivities(...h))},"Mark all as read")):m("",!0)]),s.activitiesToDisplay.length?m("",!0):(a(),l("div",Jc,Qc)),s.activities?(a(),l("ul",Yc,[(a(!0),l(I,null,B(s.activitiesToDisplay,(h,T)=>(a(),l("li",{key:T,class:A({"white-bg":h.isReaden})},[o("button",{onClick:b=>s.toggleReaden(h._id),class:A({"light-btn":h.isReaden})},null,10,Vc),o("div",zc,[o("header",{style:x({"background-color":s.getBoard(h.boardId).style.bgColor,"background-image":"url("+s.getBoard(h.boardId).style.bgImg+")"})},[o("div",null,[h.groupId===null?(a(),l("h4",qc,"Board Invitaion")):m("",!0),h.toMemberId&&h.groupId?(a(),l("h4",Xc,"Task Mention")):m("",!0),h.toMemberId?m("",!0):(a(),l("h4",Wc,"Task Added"))])],4),o("main",null,[o("div",Kc,[k(d,{size:"24",name:s.getUser(h.byMemberId)},null,8,["name"]),o("span",null,f(s.getUser(h.byMemberId)),1)]),o("div",eu,[tu,o("div",null,[h.groupId===null?(a(),l("p",su,[y(f(s.getUser(h.byMemberId))+" invited you to board ",1),k(c,{to:`/board/${h.boardId}`},{default:G(()=>[y(f(h.txt),1)]),_:2},1032,["to"])])):m("",!0),h.toMemberId&&h.groupId?(a(),l("p",ou,[y(f(s.getUser(h.byMemberId))+" added you to ",1),k(c,{to:`/board/${h.boardId}`},{default:G(()=>[iu]),_:2},1032,["to"])])):m("",!0),h.toMemberId?m("",!0):(a(),l("p",ru,[y(f(s.getUser(h.byMemberId))+" added a task in board ",1),k(c,{to:`/board/${h.boardId}`},{default:G(()=>[y(f(h.txt),1)]),_:2},1032,["to"])])),o("div",null,[k(u,{class:"time",datetime:h.createdAt},null,8,["datetime"])])])])])])],2))),128))])):m("",!0)])):m("",!0)}var au=g(Nc,[["render",nu]]);const lu={created(){},data(){return{search:"",isCreateBoard:!1,isInputFocused:!1,Search:Oe,isUserModal:!1,isBoardSearch:!1,isRecentBoards:!1,isFavoriteBoards:!1,isMoreModal:!1,isNotificationModal:!1,filterBy:{title:""}}},async created(){try{this.user&&await this.$store.dispatch({type:"loadBoards"})}catch(t){console.log(t)}},methods:{home(){this.$router.push("/board")},focusInput(){this.$refs.headerInput.focus(),this.isInputFocused=!0,this.toggleBoardSearch()},async logout(){await this.$store.dispatch({type:"logout"}),this.$router.push("/login")},toggleUserModal(){this.isUserModal=!this.isUserModal},toggleBoardSearch(){this.isBoardSearch=!this.isBoardSearch},toggleRecentBoards(){this.isRecentBoards=!this.isRecentBoards},toggleFavoriteBoards(){this.isFavoriteBoards=!this.isFavoriteBoards},toggleMoreModal(){this.isMoreModal=!this.isMoreModal},toggleNotificationsModal(){this.isNotificationModal=!this.isNotificationModal},toggleModal(t){console.log(t),this[t]=!this[t]}},computed:{user(){return this.$store.getters.user},isBoard(){return this.$store.getters.currBoard},boards(){return this.$store.getters.boards},isReaden(){var t,e;return(e=(t=this.$store.getters)==null?void 0:t.user)==null?void 0:e.activities.some(i=>!i.isReaden)}},components:{createBoard:Kd,Avatar:pe,userModal:nc,boardSearch:hc,recentBoardsPopup:fc,favoriteBoardsPopup:Tc,morePopup:Fc,userNotification:au}},du={class:"flex"},cu=o("span",{class:"menu-btn"},null,-1),uu=o("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"trello",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"trello-icon svg-inline--fa fa-trello fa-w-14 logo-img"},[o("path",{fill:"currentColor",d:"M392.3 32H56.1C25.1 32 0 57.1 0 88c-.1 0 0-4 0 336 0 30.9 25.1 56 56 56h336.2c30.8-.2 55.7-25.2 55.7-56V88c.1-30.8-24.8-55.8-55.6-56zM197 371.3c-.2 14.7-12.1 26.6-26.9 26.6H87.4c-14.8.1-26.9-11.8-27-26.6V117.1c0-14.8 12-26.9 26.9-26.9h82.9c14.8 0 26.9 12 26.9 26.9v254.2zm193.1-112c0 14.8-12 26.9-26.9 26.9h-81c-14.8 0-26.9-12-26.9-26.9V117.2c0-14.8 12-26.9 26.8-26.9h81.1c14.8 0 26.9 12 26.9 26.9v142.1z",class:""})],-1),mu=o("span",{class:"logo"},"Drello",-1),hu=[uu,mu],pu={class:"create-board-container flex align-items"},gu=o("p",null,"Create",-1),bu=o("span",{class:"icon-plus"},null,-1),_u=[gu,bu],ku=o("span",null,"Recent",-1),fu=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),vu=[ku,fu],yu=o("span",null,"Starred",-1),Au=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),Cu=[yu,Au],Iu=o("span",null,"More",-1),Tu=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),wu=[Iu,Tu],Bu={class:"secondery-container flex align-items"},Mu=o("span",{class:"icon-search flex"},null,-1),Eu=o("span",{class:"icon icon-bell"},null,-1),Su=[Eu],xu={class:"user"};function Uu(t,e,i,n,r,s){const d=p("createBoard"),c=p("recent-boards-popup"),u=p("more-popup"),h=p("favorite-boards-popup"),T=p("board-search"),b=p("user-notification"),w=p("avatar"),U=p("user-modal"),M=L("click-outside");return a(),l("header",{class:A(["main-header flex space-between",{"header-bg-color":s.isBoard}])},[o("div",du,[cu,o("section",{class:"header-logo flex align-items",onClick:e[0]||(e[0]=(...E)=>s.home&&s.home(...E))},hu),o("div",pu,[o("button",{class:A(["create-btn",{"light-btn-bg":s.isBoard}]),onClick:e[1]||(e[1]=E=>r.isCreateBoard=!r.isCreateBoard)},_u,2)]),r.isCreateBoard?(a(),C(d,{key:0,onCloseCreateModal:e[2]||(e[2]=E=>r.isCreateBoard=!1)})):m("",!0),o("div",{class:"header-btn hidden-btn-header",title:"Recent",onClick:e[3]||(e[3]=(...E)=>s.toggleRecentBoards&&s.toggleRecentBoards(...E))},vu),r.isRecentBoards?_((a(),C(c,{key:1,onClosePopup:s.toggleRecentBoards,boards:s.boards,user:s.user,class:"popup"},null,8,["onClosePopup","boards","user"])),[[M,s.toggleRecentBoards]]):m("",!0),o("div",{class:"header-btn hidden-btn-header",title:"Starred",onClick:e[4]||(e[4]=(...E)=>s.toggleFavoriteBoards&&s.toggleFavoriteBoards(...E))},Cu),o("div",{class:"header-btn more-btn",onClick:e[5]||(e[5]=(...E)=>s.toggleMoreModal&&s.toggleMoreModal(...E))},wu),r.isMoreModal?(a(),C(u,{key:2,onCloseMoreModal:s.toggleMoreModal,onOpenRecent:s.toggleRecentBoards,onOpenStarred:s.toggleFavoriteBoards},null,8,["onCloseMoreModal","onOpenRecent","onOpenStarred"])):m("",!0),r.isFavoriteBoards?_((a(),C(h,{key:3,onClosePopup:s.toggleFavoriteBoards,user:s.user,class:"popup"},null,8,["onClosePopup","user"])),[[M,s.toggleFavoriteBoards]]):m("",!0)]),o("section",Bu,[o("div",{class:A(["main-header-input flex",{focused:r.isInputFocused}]),onClick:e[9]||(e[9]=(...E)=>s.focusInput&&s.focusInput(...E))},[Mu,_(o("input",{"onUpdate:modelValue":e[6]||(e[6]=E=>r.filterBy.title=E),onBlur:e[7]||(e[7]=E=>{r.isInputFocused=!1}),ref:"headerInput",placeholder:"Search boards...",onClick:e[8]||(e[8]=(...E)=>s.focusInput&&s.focusInput(...E))},null,544),[[S,r.filterBy.title]]),r.isBoardSearch?_((a(),C(T,{key:0,filterBy:r.filterBy},null,8,["filterBy"])),[[M,s.toggleBoardSearch]]):m("",!0)],2),s.user?(a(),l("div",{key:0,class:A(["notification-btn",{"red-bg":s.isReaden}]),onClick:e[10]||(e[10]=(...E)=>s.toggleNotificationsModal&&s.toggleNotificationsModal(...E))},Su,2)):m("",!0),k(Fe,null,{default:G(()=>[r.isNotificationModal?_((a(),C(b,{key:0,onCloseModal:s.toggleNotificationsModal,class:"popup"},null,8,["onCloseModal"])),[[M,s.toggleNotificationsModal]]):m("",!0)]),_:1}),o("div",xu,[s.user?(a(),C(w,{key:0,onClick:s.toggleUserModal,size:"32",color:"white",name:s.user.fullname,class:"avatar-header"},null,8,["onClick","name"])):m("",!0),r.isUserModal?_((a(),C(U,{key:1,user:s.user,onCloseModal:s.toggleUserModal},null,8,["user","onCloseModal"])),[[M,s.toggleUserModal]]):m("",!0)])])],2)}var Lu=g(lu,[["render",Uu]]);const Du={name:"app",async created(){N.off("notify activity"),N.on("notify activity",this.notifyActivity),N.off("mention user"),N.on("mention user",this.notifyActivity);try{await this.$store.dispatch({type:"loadUsers"}),this.miniUser&&N.emit("set-user-socket",this.miniUser._id)}catch(t){console.log(t)}},methods:{getBoardById(t){return this.boards.find(e=>e._id===t)},getMemberById(t){return this.users.find(e=>e._id===t)},notify(t=null,e,i){t?ce({title:e,message:i,dangerouslyUseHTMLString:!0,type:"success"}):ce({title:e,message:i,dangerouslyUseHTMLString:!0,type:"info"})},async notifyActivity(t){console.log("activity",t);let e,i;const n=this.getMemberById(t.byMemberId);let r=this.getBoardById(t.boardId);r||(r=await $.getBoardById(t.boardId)),t.toMemberId?(t.groupId?t.isMention?(e="You've been mentioned",i=n.fullname+` just menitoned you task at<a class="notification-link" href=https://drello-app.herokuapp.com/#/board/${t.boardId}> board ${r.title} </a>`):(e="You've been added to a new task !",i=n.fullname+` just added you to a task at<a class="notification-link" href=https://drello-app.herokuapp.com/#/board/${t.boardId}> board ${r.title} </a>`):(e="You've been added to a new board !",i=n.fullname+` just added you to a new board <a class="notification-link" href=https://drello-app.herokuapp.com/#/board/${t.boardId}> board ${r.title} </a>`),F.getLoggedinUser()._id===t.toMemberId&&(this.notify(!0,e,i),this.$store.commit({type:"updateActivities",activity:t}))):t.byMemberId!==this.miniUser._id&&r.members.find(s=>s._id===this.miniUser._id)&&(e=t.txt,i=n.fullname+" just "+e+` to <a class="notification-link" href=https://drello-app.herokuapp.com/#/board/${t.boardId}> board ${r.title} </a>`,this.notify(null,e,i),this.$store.commit({type:"updateActivities",activity:t}))}},computed:{boards(){return this.$store.getters.boards},users(){return this.$store.getters.getAllUsers},miniUser(){return this.$store.getters.miniUser},currBoardStyle(){var t,e;return(e=(t=this.$store.getters.currBoard)==null?void 0:t.style)==null?void 0:e.bgColor},currBoard(){var t;return(t=this.$store.getters.currBoard)==null?void 0:t.style},boardStlye(){var t,e;return{"background-color":(t=this.currBoard)==null?void 0:t.bgColor,"background-image":"url("+((e=this.currBoard)==null?void 0:e.bgImg)+")"}},isHomePage(){return this.$store.getters.isHomePage}},components:{appHeader:Lu}};function Ou(t,e,i,n,r,s){const d=p("app-header"),c=p("router-view");return a(),l("div",{class:"wrapper",style:x(s.boardStlye)},[s.isHomePage?m("",!0):(a(),C(d,{key:0})),k(c)],4)}var Fu=g(Du,[["render",Ou]]),Ru={state:{boards:[],currentBoard:null,currentGroup:null,currentTask:null,openLabels:!1},getters:{openLabel({openLabels:t}){return t},boards({boards:t}){return t},boardsToShow({boards:t,filterBy:e}){return JSON.parse(JSON.stringify(t))},currBoard({currentBoard:t}){return t},boardGroups({currentBoard:t}){return t==null?void 0:t.groups},currGroup({currentGroup:t}){return t},currTask({currentTask:t}){return t}},mutations:{toggleLabel(t){t.openLabels=!t.openLabels},setBoards(t,{boards:e}){t.boards=e},saveBoard(t,{board:e}){const i=t.boards.findIndex(n=>n._id===e._id);i!==-1?t.boards.splice(i,1,e):t.boards.push(e)},updateBoard(t,{key:e,val:i}){t.currentBoard[e]=i},removeBoard(t,{boardId:e}){const i=t.boards.findIndex(n=>n._id===e);t.boards.splice(i,1)},setFilter(t,{filterBy:e}){t.filterBy=e},setCurrGroup(t,{group:e}){t.currentGroup=e},setCurrTask(t,{task:e}){t.currentTask=e},setSort(t,{sortBy:e}){t.sortBy=e},setCurrentBoard(t,{board:e}){t.currentBoard=e},addGroup(t,{group:e}){t.currentBoard.groups.push(e)},removeGroup(t,{groupId:e}){const i=t.currentBoard.groups.findIndex(d=>d._id===e),{_id:n,title:r}=t.currentBoard.groups[i];t.currentBoard.groups.splice(i,1);const s=$.addActivity("removed group",F.getLoggedinUser(),{type:"group",_id:n,title:r});t.currentBoard.activities.unshift(s)},setCurrGroups(t,{groups:e}){t.currentBoard.groups=e},setGroup(t,{groupIdx:e,newGroup:i}){t.currentBoard.groups.splice(e,1,i)},setTask(t,{groupId:e,task:i,action:n}){var T,b,w;let r,s;var d=t.currentTask;if(e&&(n={type:"addTask"}),n?s=`Edited ${n.type} in ${i.title}`:s=i._id?`Edited task ${i.title}`:`${t.currentBoard.title}`,(n==null?void 0:n.type)==="addTask"&&(s="added task "),t.currentGroup&&(e=t.currentGroup._id),e?r=t.currentBoard.groups.findIndex(U=>U._id===e):r=t.currentBoard.groups.findIndex(U=>U.tasks.findIndex(M=>M._id===i._id)!==-1),i._id){const U=t.currentBoard.groups[r].tasks.findIndex(M=>M._id===i._id);t.currentBoard.groups[r].tasks.splice(U,1,i)}else i._id=J.makeId(),t.currentBoard.groups[r].tasks.push(i);if((n==null?void 0:n.type)==="members"&&(((T=d==null?void 0:d.members)==null?void 0:T.length)||((b=d==null?void 0:d.members)==null?void 0:b.length)>((w=i==null?void 0:i.members)==null?void 0:w.length)))return;const c=t.currentBoard.groups[r],u=F.getLoggedinUser()._id,h=$.addActivity(s,u,d==null?void 0:d._id,c==null?void 0:c._id,t.currentBoard._id);(n==null?void 0:n.type)==="members"&&(h.toMemberId=n.item._id),t.currentBoard.activities.unshift(h),(n==null?void 0:n.type)&&(n.type==="addTask"||n.type==="members")&&N.emit("activity notify",{activity:h,boardMembers:t.currentBoard.members})},removeTask(t,{task:e}){const i=t.currentBoard.groups[e.groupIdx].tasks.findIndex(n=>n._id===e.taskId);t.currentBoard.groups[e.groupIdx].tasks[i],t.currentBoard.groups[e.groupIdx].tasks.splice(i,1)}},actions:{async loadBoards({commit:t,state:e}){try{const i=await $.getBoards(e.filterBy);t({type:"setBoards",boards:i}),N.off("board update"),N.on("board update",n=>{var s;const r=F.getLoggedinUser();n._id===((s=e.currentBoard)==null?void 0:s._id)?t({type:"setCurrentBoard",board:n}):n.members.find(d=>d._id===r._id)&&t({type:"saveBoard",board:n})})}catch(i){console.log(i)}},async saveBoard({getters:t,commit:e},{board:i,activity:n}){i._id||(i.createdBy=t.miniUser,i.members=[t.miniUser]);try{const r=JSON.parse(JSON.stringify(i));e({type:"saveBoard",board:r});const s=await $.saveBoard(i);return N.emit("set board",i),s}catch(r){console.log(r)}},async removeBoard({commit:t},{boardId:e}){try{await $.removeBoard(e),t({type:"removeBoard",boardId:e})}catch(i){console.log(i)}},async setCurrentBoard({commit:t},{boardId:e}){try{const i=await $.getBoardById(e);t({type:"setCurrentBoard",board:i})}catch(i){console.log(i)}},async setBoardPrefs({state:t,commit:e,dispatch:i},{key:n,val:r}){try{if(e({type:"updateBoard",key:n,val:r}),await i({type:"saveBoard",board:t.currentBoard}),n==="members"){const s=F.getLoggedinUser(),d=r[r.length-1],c=$.addActivity(t.currentBoard.title,s._id,null,null,t.currentBoard._id);c.toMemberId=d._id,console.log(2),N.emit("activity notify",{activity:c,boardMembers:t.currentBoard.members})}}catch(s){console.log(s)}},async addGroup({state:t,commit:e,dispatch:i},{groupTitle:n}){try{const r=$.getEmptyGroup(n);console.log(r),e({type:"addGroup",group:r}),await i({type:"saveBoard",board:t.currentBoard})}catch(r){console.log(r)}},async setGroups({state:t,commit:e,dispatch:i},{groups:n}){try{e({type:"setCurrGroups",groups:n}),await i({type:"saveBoard",board:t.currentBoard})}catch(r){console.log(r)}},async removeGroup({state:t,commit:e,dispatch:i},{groupId:n}){try{e({type:"removeGroup",groupId:n}),await i({type:"saveBoard",board:t.currentBoard})}catch(r){console.log(r)}},async setGroup({state:t,commit:e,dispatch:i},{groupIdx:n,newGroup:r}){try{e({type:"setGroup",groupIdx:n,newGroup:r}),await i({type:"saveBoard",board:t.currentBoard})}catch(s){console.log(s)}},async setTask({commit:t,state:e,dispatch:i},{groupId:n,task:r,action:s}){try{t({type:"setTask",groupId:n,task:r,action:s}),await i({type:"saveBoard",board:e.currentBoard})}catch(d){console.log(d)}},async removeTask({commit:t,state:e,dispatch:i},{task:n}){try{const r=e.currentBoard.groups.findIndex(s=>s._id===n.groupId);t({type:"removeTask",task:{groupIdx:r,taskId:n.taskId}}),await i({type:"saveBoard",board:e.currentBoard})}catch(r){console.log(r)}}}},Nu={state:{loggedinUser:F.getLoggedinUser(),allUsers:[]},getters:{user(t){return t.loggedinUser},getAllUsers(t){return t.allUsers},miniUser({loggedinUser:t}){return t?{_id:t._id,fullname:t.fullname,username:t.username,imgUrl:t.imgUrl}:void 0}},mutations:{setLoggedinUser(t,{user:e}){e?N.emit("set-user-socket",e._id):N.emit("unset-user-socket"),t.loggedinUser=e},setUsers(t,{users:e}){t.allUsers=e},addRecentBoard(t,{boardId:e}){const i=F.addRecentBoard(e);t.loggedinUser=i},setUser(t,{user:e}){t.loggedinUser=e},updateActivities(t,{activity:e}){t.loggedinUser.activities.unshift(e),F.saveLocalUser(t.loggedinUser)},toggleActivity(t,{activityId:e}){const i=t.loggedinUser.activities.findIndex(n=>n._id===e);t.loggedinUser.activities[i].isReaden=!t.loggedinUser.activities[i].isReaden,F.saveLocalUser(t.loggedinUser)},toggleAllActivities(t){t.loggedinUser.activities.forEach(e=>e.isReaden=!0),F.saveLocalUser(t.loggedinUser)}},actions:{async loadUsers({commit:t,state:e}){try{const i=await F.getUsers();t({type:"setUsers",users:i})}catch(i){throw console.log(i),i}},async login({commit:t},{cred:e}){try{const i=await F.login(e);t({type:"setLoggedinUser",user:i})}catch(i){throw console.log(i),i}},async signup({commit:t},{cred:e}){try{const i=await F.signup(e);t({type:"setLoggedinUser",user:i})}catch(i){throw console.log(i),i}},async logout({commit:t}){try{await F.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log(e),e}},async updateUser({commit:t},{user:e}){try{await F.update(e),t({type:"setUser",user:e})}catch(i){throw console.log(i),i}},async toggleActivity({commit:t,dispatch:e,state:i},{activityId:n}){try{t({type:"toggleActivity",activityId:n}),await e({type:"updateUser",user:i.loggedinUser})}catch(r){throw r}},async toggleAllActivities({state:t,commit:e,dispatch:i}){try{e({type:"toggleAllActivities"}),await i({type:"updateUser",user:t.loggedinUser})}catch(n){throw n}}}};const Gu=Re({strict:!0,state:{isHomePage:!1},getters:{isHomePage({isHomePage:t}){return t}},mutations:{setHomePage(t,{isHome:e}){t.isHomePage=e}},actions:{},modules:{boardStore:Ru,userStore:Nu}});const $u={mounted:t=>{t.focus()}},Z=Ne(Fu).component("avatar",pe);Z.directive("focus",$u);const Pu={clientId:"259143911327-0c53jftjilthpbel1ctuab58cef805bk.apps.googleusercontent.com",prompt:"consent"};Z.use(Ge,Pu);Z.use($e);Z.use(ve);Z.use(Gu);Z.use(Pe);Z.use(Je);Z.use(Ze,{load:{key:"AIzaSyDtacGFKDZu-p73ElA1OFnZCeT-jGafFHw",libraries:"places"}});Z.mount("#app");
