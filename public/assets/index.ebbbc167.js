var Ee=Object.defineProperty;var pe=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var ge=(t,e,i)=>e in t?Ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,be=(t,e)=>{for(var i in e||(e={}))Se.call(e,i)&&ge(t,i,e[i]);if(pe)for(var i of pe(e))xe.call(e,i)&&ge(t,i,e[i]);return t};import{_ as g,r as p,o as a,c as d,a as o,b as k,w as j,d as I,e as fe,t as v,f as F,n as x,g as m,F as T,h as M,i as w,U as Le,j as Ue,k as L,l as b,v as E,m as A,p as z,q as De,D as ve,s as K,u as Oe,x as Q,y as Fe,C as Re,z as Ne,A as Ge,B as $e,E as Pe,G as ye,H as _e,I as Je,J as Ze,K as je,L as Qe,M as Ye,N as He,O as Ve}from"./vendor.d3b653b7.js";const ze=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}};ze();const ee="auth",te="loggedinUser",O={login:We,signup:Ke,logout:et,getLoggedinUser:se,getUsers:qe,getUserById:Xe,getGuestUser:ot,addRecentBoard:tt,update:st,saveLocalUser:q};function qe(){return N.get("user")}async function Xe(t){return await N.get(`user/${t}`)}async function We(t){const e=await N.post(ee+"/login",t);if(e)return q(e)}async function Ke(t){const e=await N.post(ee+"/signup",t);return q(e)}function et(){return sessionStorage.removeItem(te),N.post(ee+"/logout")}function tt(t){const e=se();if(e.recentBoards.includes(t)){const i=e.recentBoards.findIndex(n=>n===t);e.recentBoards.splice(i,1)}return e.recentBoards.unshift(t),e.recentBoards=e.recentBoards.slice(0,5),q(e)}async function st(t){console.log(t);try{return t=await N.put(`user/${t._id}`,t),se()._id===t._id&&q(t),t}catch(e){console.log("Failed to update user",e)}}function ot(){return{fullname:"Guest",username:"guest",password:"guest"}}function q(t){return sessionStorage.setItem(te,JSON.stringify(t)),t}function se(){return JSON.parse(sessionStorage.getItem(te)||"null")}var it="data:image/png;base64,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",rt="/assets/hero.f5b958c8.png",nt="/assets/board.557c42ca.png",at="data:image/png;base64,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",lt="/assets/view.2368c9e9.svg",dt="/assets/card-back.208a67eb.svg";const ct={name:"home-page",methods:{async moveToBoards(){await this.$store.dispatch({type:"login",cred:O.getGuestUser()}),this.$router.push("/board")},setHomePage(t){this.$store.commit({type:"setHomePage",isHome:t})}},created(){this.setHomePage(!0)},unmounted(){this.setHomePage(!1)},computed:{isHomePage(){return this.$store.getters.isHomePage}},components:{}},ut={class:"home-container"},mt={class:"hero"},ht=o("div",{class:"logo"},[o("img",{src:it,width:"25px",height:"25px",alt:""}),o("h1",null,"Drello")],-1),pt={class:"auth-btns"},gt={class:"btn login"},bt=I("Log in"),_t={class:"btn signup"},kt=I("Sign up"),ft={class:"info-container info-1 home-layout"},vt=o("h1",null,"Smello helps teams move work forward.",-1),yt=o("p",null," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Trello. ",-1),At=o("img",{class:"hero-img",src:rt,alt:""},null,-1),Ct=fe('<main class="home-layout"><section class="info-container info-2"><h2>It\u2019s more than work. It\u2019s a way of working together.</h2><p> Start with a Trello board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place. </p></section><section class="info-container info-3"><img src="'+nt+'" class="board-img" alt="board"><p>Join over 1,000,000 teams worldwide that are using Trello to get more done.</p><img src="'+at+'" class="trello-partners"></section><section class="info-container info-4"><h2>Features to help your team succeed</h2><p> Powering a productive team means using a powerful tool (and plenty of snacks). From meetings and projects to events and goal setting, Trello\u2019s intuitive features give any team the ability to quickly set up and customize workflows for just about anything. </p></section><section class="info-container info-5"><img src="'+lt+'" alt="view"><section><h5>CHOOSE A VIEW</h5><h2>The board is just the beginning</h2><p> Lists and cards are the building blocks of organizing work on a Trello board. Grow from there with task assignments, timelines, productivity metrics, calendars, and more. </p></section></section><section class="info-container info-6"><section><h5>DIVE INTO THE DETAILS</h5><h2>Cards contain everything you need</h2><p> Trello cards are your portal to more organized work\u2014where every single part of your task can be managed, tracked, and shared with teammates. Open any card to uncover an ecosystem of checklists, due dates, attachments, conversations, and more. </p></section><img src="'+dt+'" alt="card-back"></section></main>',1);function Tt(t,e,i,n,r,s){const l=p("router-link");return a(),d("section",ut,[o("section",mt,[o("header",null,[ht,o("div",pt,[o("div",gt,[k(l,{to:"/login"},{default:j(()=>[bt]),_:1})]),o("div",_t,[k(l,{to:"/signup"},{default:j(()=>[kt]),_:1})])])]),o("section",ft,[o("section",null,[vt,yt,o("button",{class:"btn-primary",onClick:e[0]||(e[0]=(...c)=>s.moveToBoards&&s.moveToBoards(...c))},"Get Started")]),At])]),Ct])}var It=g(ct,[["render",Tt]]);const Bt={name:"workspace",data(){}},wt={class:"workspace-filter-container"};function Mt(t,e,i,n,r,s){return a(),d("section",wt)}var Et=g(Bt,[["render",Mt]]);const St={name:"board-preview",emits:["toggleFavorite"],props:{board:Object},methods:{toggleFavorite(t){this.$emit("toggleFavorite",t)}},computed:{boardStyle(){return{"background-color":this.board.style.bgColor?this.board.style.bgColor:"","background-image":this.board.style.bgImg?`url(${this.board.style.bgImg})`:""}},user(){return this.$store.getters.user}}},xt={class:"preview-content"},Lt={key:0,class:"fa-regular fa-star white-font"},Ut={key:1,class:"fa-solid fa-star"},Dt=o("div",{class:"small-overlay"},null,-1);function Ot(t,e,i,n,r,s){var l;return i.board?(a(),d("li",{key:0,style:x(s.boardStyle)},[o("div",xt,[o("h2",null,v(i.board.title),1),o("section",{class:"star",onClick:e[0]||(e[0]=F(c=>s.toggleFavorite(i.board._id),["stop"]))},[(l=s.user.favorites)!=null&&l.includes(i.board._id)?(a(),d("i",Ut)):(a(),d("i",Lt))])]),Dt],4)):m("",!0)}var Ft=g(St,[["render",Ot]]);const Rt={name:"board-list",emits:["toggleFavorite"],props:{boards:Array},data(){return{}},created(){},methods:{moveToBoard(t){this.$router.push(`/board/${t}`)},toggleFavorite(t){this.$emit("toggleFavorite",t)}},components:{boardPreview:Ft}},Nt={class:"board-list"};function Gt(t,e,i,n,r,s){const l=p("board-preview");return a(),d("ul",Nt,[(a(!0),d(T,null,M(i.boards,c=>(a(),w(l,{onToggleFavorite:s.toggleFavorite,board:c,key:c,onClick:u=>s.moveToBoard(c._id)},null,8,["onToggleFavorite","board","onClick"]))),128))])}var $t=g(Rt,[["render",Gt]]);const Pt={name:"workspace",async created(){await this.$store.dispatch({type:"loadBoards"})},methods:{async toggleFavorite(t){const e=JSON.parse(JSON.stringify(this.user));e.favorites||(e.favorites=[]);const i=e.favorites.findIndex(n=>(console.log(n),console.log(t),n===t));i===-1?e.favorites.push(t):e.favorites.splice(i,1),await this.$store.dispatch({type:"updateUser",user:e})}},computed:{user(){return this.$store.getters.user},boards(){return this.$store.getters.boards},starredBoards(){return this.boards.filter(t=>t.isFavorite)},otherBoards(){return this.boards.filter(t=>!t.isFavorite)},recentBoards(){return this.boards.length?this.user.recentBoards.map(t=>this.boards.find(e=>e._id===t)):[]},userFavoriteBoards(){var e;return this.user.favorites||(this.user.favorites=[]),((e=this.user)==null?void 0:e.favorites.map(i=>this.boards.filter(r=>r._id===i))).flat()}},components:{workspaceFilter:Et,boardList:$t}},Jt={class:"workspace-container main-layout"},Zt=o("h2",null,"Workspace",-1),jt=o("h3",null,[o("span",{class:"icon-member"}),I("Starred Boards")],-1),Qt={key:1},Yt=o("h3",null,[o("span",{class:"icon-time"}),I("Recent Boards")],-1),Ht=o("h3",null,[o("span",{class:"icon-members"}),I("All boards in this Workspace")],-1);function Vt(t,e,i,n,r,s){var c;const l=p("board-list");return a(),d("section",Jt,[Zt,jt,(c=s.user.favorites)!=null&&c.length?(a(),w(l,{key:0,onToggleFavorite:s.toggleFavorite,boards:s.userFavoriteBoards},null,8,["onToggleFavorite","boards"])):(a(),d("h2",Qt,"No favorite boards yet...")),Yt,k(l,{onToggleFavorite:s.toggleFavorite,boards:s.recentBoards},null,8,["onToggleFavorite","boards"]),Ht,k(l,{onToggleFavorite:s.toggleFavorite,boards:s.boards},null,8,["onToggleFavorite","boards"])])}var zt=g(Pt,[["render",Vt]]);const qt={components:{Datepicker:Le},data(){return{date:Ue(Date.now())}},methods:{updateStatus(){var t="";Date.parse(this.date)<Date.now()&&(t="overdue");const e={type:"status",item:t};this.$emit("addItem",e)},saveDueDate(){const t={type:"dueDate",item:Date.parse(this.date)};this.$emit("addItem",t),this.updateStatus()}}},Xt={class:"date-item"};function Wt(t,e,i,n,r,s){const l=p("Datepicker");return a(),d("section",Xt,[k(l,{class:"date-picker",modelValue:r.date,"onUpdate:modelValue":e[0]||(e[0]=c=>r.date=c),inline:"",autoApply:""},null,8,["modelValue"]),o("button",{onClick:e[1]||(e[1]=(...c)=>s.saveDueDate&&s.saveDueDate(...c)),class:"save"},"save")])}var Kt=g(qt,[["render",Wt]]);const es={name:"color-picker",props:{importedColors:Array,bgImg:String},data(){return{currColor:"",colors:[{color:"rgb(0, 121, 191)",title:""},{color:"rgb(210, 144, 52)",title:""},{color:"rgb(81, 152, 57)",title:""},{color:"rgb(176, 70, 50)",title:""},{color:"rgb(137, 96, 158)",title:""},{color:"rgb(205, 90, 145)",title:""},{color:"rgb(75, 191, 107)",title:""},{color:"rgb(0, 174, 204)",title:""},{color:"rgb(131, 140, 145)",title:""},{color:"#f5dd29",title:""}]}},methods:{updateColor(t){this.selectedColor=!0,this.currColor=t,this.$emit("updateColor",t,"bgColor")}}},ts={class:"color-picker"},ss=["title","onClick"],os={key:0,class:"icon-complete"};function is(t,e,i,n,r,s){return a(),d("section",ts,[(a(!0),d(T,null,M(r.colors,l=>(a(),d("div",{title:l.title,style:x({"background-color":l.color}),key:l.title,onClick:c=>s.updateColor(l.color)},[r.currColor===l.color&&!i.bgImg?(a(),d("span",os)):m("",!0)],12,ss))),128))])}var W=g(es,[["render",is]]);function rs(t=8){var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function oe(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}const $={makeId:rs,debounce:cs,getRandomInt:oe,getRandomColor:ls,getRandomWord:as,isDarkColor:ds,getLoremIpsum:ns,loadFromStorage:us,saveToStorage:ms,loadFromSessionStorage:hs,saveToSessionStorage:ps};function ns(t=5){const e=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"];let i="";for(;t>0;)i+=e[oe(0,e.length-1)]+" ",t--;return i.trim()}function as(t=5){let e=["Animal","Africa","Moscow","Ukraine","Space","Motorcycle","Yamaha","Life","Business","Nature","Colorful","Productivity","Gaming"],i=[];for(var n=0;n<t;n++){let r=oe(0,e.length-1);i.push(e[r]),e.splice(r,1)}return i}function ls(){for(var t="#",e=0;e<6;e++)t+=Math.floor(Math.random()*10);return t}function ds(t){t=t.substring(1);const e=parseInt(t,16),i=e>>16&255,n=e>>8&255,r=e>>0&255;var s=.2126*i+.7152*n+.0722*r;return s<100}function cs(t,e){let i;return function(...r){const s=()=>{clearTimeout(i),t(...r)};clearTimeout(i),i=setTimeout(s,e)}}function us(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}function ms(t,e){localStorage[t]=JSON.stringify(e)}function hs(t){var e=sessionStorage.getItem(t);return e?JSON.parse(e):null}function ps(t,e){sessionStorage[t]=JSON.stringify(e)}const gs={props:["board"],data(){return{filterBy:{title:""},isCreating:null,isEditing:null,title:"",color:"",currentLabelId:""}},computed:{getRelevantLabels(){let t=JSON.parse(JSON.stringify(this.boardLabels));const e=new RegExp(this.filterBy.title,"i");return t.filter(i=>e.test(i.title))},boardLabels(){return JSON.parse(JSON.stringify(this.board.labels))}},methods:{removeLabel(){var t=this.boardLabels.findIndex(i=>i._id===this.currentLabelId);this.boardLabels.splice(t,1);const e={type:"labels",item:{_id:this.currentLabelId,isDelete:!0}};this.$emit("updateLabels",this.boardLabels,e)},updateCurrData(t){this.isCreating=!0,this.isEditing=!0,this.currentLabelId=t._id,this.title=t.title,this.color=t.color},updateColor(t){this.color=t},setLabel(){if(!this.color)return;var t=this.currentLabelId||$.makeId();const e={type:"labels",item:{color:this.color,title:this.title,_id:t}};if(this.currentLabelId){var i=this.boardLabels.findIndex(r=>r._id===this.currentLabelId);this.boardLabels.splice(i,1,e.item)}else this.boardLabels.push(e.item);var n=this.boardLabels;this.$emit("updateLabels",n,e),this.currentLabelId=""},addLabel(t){const e={type:"labels",item:{_id:t}};this.$emit("addItem",e)}},components:{colorPicker:W}},bs={key:0,class:"labels-item"},_s=o("h3",null,"Labels",-1),ks=["onClick"],fs=["onClick"],vs={key:1},ys=o("h3",null,"Name",-1),As=o("h3",null,"Select a color",-1),Cs={class:"labels-actions flex space-between"};function Ts(t,e,i,n,r,s){const l=p("color-picker"),c=L("focus");return i.board&&!r.isCreating?(a(),d("div",bs,[b(o("input",{type:"text",placeholder:"Search labels...",class:"label-item-input","onUpdate:modelValue":e[0]||(e[0]=u=>r.filterBy.title=u)},null,512),[[c],[E,r.filterBy.title]]),_s,o("ul",null,[(a(!0),d(T,null,M(s.getRelevantLabels,u=>(a(),d("li",{class:"label",key:u._id},[o("div",{class:A(["label-hover",{"hover-marker":null}]),style:x({"background-color":u.color})},null,4),o("span",{onClick:h=>s.addLabel(u._id),style:x({"background-color":u.color}),class:"label-txt"},v(u.title),13,ks),o("span",{onClick:F(h=>(s.updateCurrData(u),(r.isCreating=!0)(r.isEditing=!0)),["stop"]),class:"edit-labels"},null,8,fs)]))),128))]),o("button",{onClick:e[1]||(e[1]=u=>(s.setLabel(),r.isCreating=!0)),class:"create-label-btn"},"Create a new label")])):(a(),d("section",vs,[ys,b(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>r.title=u),class:"label-item-input"},null,512),[[E,r.title],[c]]),As,k(l,{onUpdateColor:s.updateColor},null,8,["onUpdateColor"]),o("div",Cs,[o("button",{class:"save create flex",onClick:e[3]||(e[3]=u=>s.setLabel())},"Save"),r.isEditing?(a(),d("button",{key:0,class:"delete-label flex",onClick:e[4]||(e[4]=(...u)=>s.removeLabel&&s.removeLabel(...u))},"Delete")):m("",!0)])]))}var Is=g(gs,[["render",Ts]]);const Bs={props:{board:Object,task:Object},data(){return{filterBy:{name:""}}},methods:{addMember({fullname:t,username:e,imgUrl:i,_id:n}){const r={type:"members",item:{fullname:t,username:e,imgUrl:i,_id:n}};this.$emit("addItem",r)}},computed:{getRelevantUsers(){let t=JSON.parse(JSON.stringify(this.boardMembers));const e=new RegExp(this.filterBy.name,"i");return t.filter(i=>e.test(i.fullname))},boardMembers(){return this.board.members},currTask(){return this.task},currTaskMembersIds(){var e;let t=(e=this.currTask)==null?void 0:e.members;return t?t.map(i=>i._id):[]}}},ws={key:0,class:"members-item"},Ms=o("h3",null,"Board members",-1),Es=["onClick"],Ss={class:"member-container flex align-items justify-center"},xs={class:"avatar"},Ls={class:"name"},Us={key:0,class:"icon-complete"};function Ds(t,e,i,n,r,s){const l=p("avatar");return i.board?(a(),d("section",ws,[b(o("input",{type:"text",placeholder:"Search members",onInput:e[0]||(e[0]=(...c)=>t.findMembers&&t.findMembers(...c)),"onUpdate:modelValue":e[1]||(e[1]=c=>r.filterBy.name=c)},null,544),[[E,r.filterBy.name]]),Ms,o("ul",null,[(a(!0),d(T,null,M(s.getRelevantUsers,c=>(a(),d("li",{key:c._id,class:"member flex align-items space-between",onClick:F(u=>s.addMember(c),["stop"])},[o("div",Ss,[o("div",xs,[k(l,{size:32,color:"white",name:c.fullname},null,8,["name"])]),o("span",Ls,v(c.fullname),1)]),s.currTaskMembersIds.includes(c._id)?(a(),d("span",Us)):m("",!0)],8,Es))),128))])])):m("",!0)}var Os=g(Bs,[["render",Ds]]);const Fs={name:"checklist-popup",data(){return{checklistTitle:""}},methods:{addCheckList(){this.checklistTitle||(this.checklistTitle="Checklist");const t={_id:$.makeId(),title:this.checklistTitle,todos:[]};this.$emit("addItem",{type:"checklist",item:t})}}},Rs={class:"checklist-popup flex column"},Ns=o("label",{for:"checklist-input"},"Title",-1);function Gs(t,e,i,n,r,s){const l=L("focus");return a(),d("section",Rs,[Ns,b(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>r.checklistTitle=c),id:"checklist-input",placeholder:"Checklist"},null,512),[[l],[E,r.checklistTitle]]),o("button",{class:"save",onClick:e[1]||(e[1]=(...c)=>s.addCheckList&&s.addCheckList(...c))},"Add")])}var $s=g(Fs,[["render",Gs]]);const ie=async t=>{const e="ssrtedsh",n="https://api.cloudinary.com/v1_1/dkqvblbeq/image/upload",r=new FormData;r.append("file",t),r.append("upload_preset",e);try{return(await z.post(n,r)).data}catch(s){console.error("ERROR!",s)}};var Ae="/assets/loader.1cadbea4.svg";const Ps={name:"attachment-item",data(){return{isLoading:!1,isDragOver:!1,attachment:{createdAt:null,fileName:null,url:null,type:"image",id:$.makeId()},imgUrl:""}},methods:{handleFile(t){let e;t.type==="change"?e=t.target.files[0]:t.type==="drop"&&(e=t.dataTransfer.files[0]),this.onUploadImg(e)},async onUploadImg(t){this.isLoading=!0;const e=t.name,i=await ie(t);this.setAttachment(i.url,e);const n={type:"attachment",item:JSON.parse(JSON.stringify(this.attachment))};this.$emit("addItem",n),this.isLoading=!1,this.$emit("closePopup")},async AddAttachment(){const t=this.imgUrl.substring(this.imgUrl.lastIndexOf("/")+1);this.setAttachment(this.imgUrl,t);const e={type:"attachment",item:JSON.parse(JSON.stringify(this.attachment))};this.$emit("addItem",e),this.$emit("closePopup")},setAttachment(t,e){this.attachment.createdAt=Date.now(),this.attachment.url=t,this.attachment.fileName=e}}},Js={class:"attachment-item"},Zs=o("h3",null,"Choose an image or drag it here",-1),js=[Zs],Qs={key:1,src:Ae,alt:""},Ys=o("label",{class:"attach-link",for:"attach-link"},"Attach a link",-1);function Hs(t,e,i,n,r,s){const l=L("focus");return a(),d("div",Js,[r.isLoading?(a(),d("img",Qs)):(a(),d("label",{key:0,for:"imgUploader",onDrop:e[0]||(e[0]=F((...c)=>s.handleFile&&s.handleFile(...c),["prevent"])),onDragover:e[1]||(e[1]=F(()=>{},["prevent"])),class:"drag-container"},js,32)),o("input",{hidden:"",type:"file",name:"img-uploader",id:"imgUploader",onChange:e[2]||(e[2]=(...c)=>s.handleFile&&s.handleFile(...c))},null,32),Ys,b(o("input",{"onUpdate:modelValue":e[3]||(e[3]=c=>r.imgUrl=c),type:"text",name:"",id:"attach-link"},null,512),[[E,r.imgUrl],[l]]),o("button",{onClick:e[4]||(e[4]=(...c)=>s.AddAttachment&&s.AddAttachment(...c))},"Attach")])}var Vs=g(Ps,[["render",Hs]]);const Ce="Qe7xHRYFZ00Y7XpC8InL9Ffu0R6915MivLGckFh94wQ",Y={getImages:zs,getRandomImages:qs};async function zs(t,e=12){const i=`https://api.unsplash.com/search/photos?query=${t}&per_page=${e}&client_id=${Ce}`,n=await z.get(i);let{results:r}=n.data;return r=r.map(s=>({_id:s.id,full:s.urls.full,thumb:s.urls.thumb,sm:s.urls.small})),r}async function qs(t=12){const e=`https://api.unsplash.com/photos/random/?client_id=${Ce}&count=${t}`;let n=(await z.get(e)).data;return n=n.map(r=>({_id:r.id,full:r.urls.full,thumb:r.urls.thumb,sm:r.urls.small})),n}const Xs={name:"search-photo-item",props:["coverToEdit"],data(){return{keyword:"",suggSearches:$.getRandomWord(9),randPics:null}},async created(){this.randPics=await Y.getRandomImages(12)},methods:{async setPics(){this.randPics=await Y.getImages(this.keyword,12)},setImgUrl(t){this.$emit("setImgUrl",t)}}},Ws={class:"search-photo-container"},Ks=o("h4",null,"Suggested searches",-1),eo={class:"suggested-searches"},to=["onClick"],so=o("h4",null,"Top photos",-1),oo={class:"cover-mini-photos"},io=["onClick"],ro=["src"];function no(t,e,i,n,r,s){const l=L("focus");return a(),d("section",Ws,[b(o("input",{class:"inline-input",type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>r.keyword=c),placeholder:"Search for unsplash photos",onChange:e[1]||(e[1]=(...c)=>s.setPics&&s.setPics(...c))},null,544),[[l],[E,r.keyword]]),Ks,o("div",eo,[(a(!0),d(T,null,M(r.suggSearches,c=>(a(),d("button",{key:c,onClick:u=>(r.keyword=c,s.setPics())},v(c),9,to))),128))]),so,o("div",oo,[(a(!0),d(T,null,M(r.randPics,c=>(a(),d("div",{key:c._id,onClick:u=>s.setImgUrl(c.sm),class:A({"selected-type":c.sm===i.coverToEdit.imgUrl})},[o("img",{src:c.thumb,alt:""},null,8,ro)],10,io))),128))])])}var ao=g(Xs,[["render",no]]),lo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAApwAAAE1CAMAAAB9bsAsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+VpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmVkYTJiM2ZhYywgMjAyMS8xMS8xNy0xNzoyMzoxOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjMuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAzLTI1VDIyOjAzOjU2KzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMy0yNVQyMjowOSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMy0yNVQyMjowOSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDcwRUY5NTRBQzZGMTFFQ0I5MTlDRTcwNkFFRTJGODAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDcwRUY5NTVBQzZGMTFFQ0I5MTlDRTcwNkFFRTJGODAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNzBFRjk1MkFDNkYxMUVDQjkxOUNFNzA2QUVFMkY4MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNzBFRjk1M0FDNkYxMUVDQjkxOUNFNzA2QUVFMkY4MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvpfOHAAAABCUExURf///2t3jHyHmsfM1KqwvJqisW14jaivvHJ9ksbK0+jq7Y+YqLS6xH2Imvr6+6Gptt3g5JafrZyksu7v8oSOn/////HWvoAAAAAWdFJOU////////////////////////////wAB0sDkAAAEC0lEQVR42uzdXXKbMBhAUf8Dxo5jx93/VtvXTpPGAn2SAucsgMzIdxAQITa/oFEbQ4A4QZyIE8SJOEGcIE7ECeJEnCBOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeJEnCBOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeIEcSJOECfiBHEiThAniBNxgjgRJ4gTxIk4QZyIE8QJ4kScIE7ECeIEcSJOECfiBHGCOBEniBNxgjgRpyFAnCBOxAniRJwgThAn4gRxIk4QJ4gTcYI4ESeIE8SJOEGciBPECeJEnCBOxAniBHEiThAn4gRxIk4QJ4gTcYI4ESeIE8SJOEGciBPECeJEnCBOxAniBHEiThAnS40TAAAAAAAAAAAAAAAAAAAAAAAAgJXZH3enLWRz2h33edLcGUzy22XI82AYiXHQJkutc28EiTNvZne9SeR1pxMnizx1Hg0fkY5mdZY4r3v2TqiTOFlinKZ1mp3W3RDR7A2RR0mE2nsIzwJndadO2j1xWvhBIMuSWGybFhsTdL2ZaS281zTIKttrGgAAAAAAAAAAAAAAAMDSecHNi2atpunVYK/oNsqmCjY30CbqTJzT/XJr8DNndteb67judOLEqTMj226vxNGsjnk9H8/eV+IkTsRpWmcF07obIjdEHiXhUZJ5naXM6k6dTpwWflCVZUlo02Jj0q43f/haeK9pLJTvAQEAAAAAAAArdB668dpvt/117Iaz8aCZMi/Pv/+r/7zokxa8Pz5bdfJ4NzJU9nH7alHU7cPoUNPQf71krx+MD/V0/19R2hkhKnm7f7fe+f5mlKjS5vj9avxRndRwf+VdkbtxornrTded1LtPf/U9O/fsFPbRvxpn73knZd1ef0X5ZrQo6T3lBXr/yaSkR0qcD+NFOee0vUesUaKcS1qcFyNGMc+0OJ9GjEZndfM65QypcU59ED93C8SvN9qLOzJ1dak/5bT/YebZPPazLUrjjkxtY+rPOE75K9m23T6UOzLVXVN/xGvNNv9pKO7I1Nen/ob9hDk97IMicUemAem/YfrfyPqxgl2ZI7OOODN/I2tf4sisZFrP/GHWY4kjs5IbosyfINqVODIreZSU+fNDpxJHpgUFHsLn/ihTiSPTggL/vhQn0xRY+CFOJopfMidOJopfbCxOyszrZ3FSTvgLbuJkqvBXg8XJZNGbKoiTyaK3oxEn0wVv5OXfl8wQuwWihR/MEbp5rCVzzBG67bbFxsyrM/KDBV7TIPS6c86W215wY+49e9xHsrwazNznnXGfF7SpAnPFfZjVdjTMFvdJaxt5kaHPoRuvf64/++vYDTY8BAAAAAAAAAAAAAAAADab3wIMAPg/Oue/wQWyAAAAAElFTkSuQmCC",co="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUYAAACcCAYAAAADBQINAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABW1pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmVkYTJiM2ZhYywgMjAyMS8xMS8xNy0xNzoyMzoxOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjMuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTAzLTI1VDIzOjAwOjQyKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wMy0yNVQyMzo1MjowOSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wMy0yNVQyMzo1MjowOSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzA1NTc3M0RBQzdEMTFFQ0I3NTc5NzU3MDFGMEY3N0UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzA1NTc3M0VBQzdEMTFFQ0I3NTc5NzU3MDFGMEY3N0UiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MGY0YTM1OC1mMGZhLTYzNGItYThhMy04ODdkY2NkY2NiODYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQwZjRhMzU4LWYwZmEtNjM0Yi1hOGEzLTg4N2RjY2RjY2I4NiIgc3RFdnQ6d2hlbj0iMjAyMi0wMy0yNVQyMzowMDo0MiswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MGY0YTM1OC1mMGZhLTYzNGItYThhMy04ODdkY2NkY2NiODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDBmNGEzNTgtZjBmYS02MzRiLWE4YTMtODg3ZGNjZGNjYjg2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+YVoGqwAAApVJREFUeNrs3b8uQ2Ecx+EeKW7ALUhsJjs3YDMx2EkMXUwGMXQRS+/AZLBYRcINmCV2F+Hf8W3SRtLEoudtT3ie5Be1HM37pp+8StuqrusOAN8WLAGAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAAgjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIIIwDCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgggjADCCCCMAMIIIIwAwgiAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCCOAMAIII4AwAggjgDACCKMlABBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQRgCEEeBn3WkvcHh8Pr65l7m0pEBBr5n1zNPwm0G/174TY6K4NLp5kLmwZ0Bhi5mbzNZEg1p1YvzM7A/vX2bFngGFVZnVzMmwXzkx3rbuxJg79Z4vR5k1+wXM0GZmp9TF/fEFQBgBhBFg5mE8y9xbSmCGHjJXbQ7jdWY382ivgMLqzHPmNHNX6od0G7rOS2Yj82HfgILeMtud0T94l1LVdW2pARr+VRpAGAGEEUAYAYQRAGEEEEYAYQQQRgBhBGhekx+G5bWFMCeDfq+yCi05MSaKy6II85fHYj3xmGQKU7+JxHhDACdHJ0YAYQQQRgBh/CXPaUALeH6xfSdGGwKi+Gf4aAOAQidGAGEEEEYAYQQQRgCEEUAYAYQRQBgBhBFAGAGEEUAYAYQRQBgBhBFAGAGEEUAYAYQR4D/4EmAA1eI9768s56cAAAAASUVORK5CYII=";const uo={name:"cover-item",data(){return{isLoading:!1,coverToEdit:{color:null,imgUrl:null,type:null},randPics:null,photoSearch:!1}},async created(){var t,e,i,n,r,s,l,c,u,h,C;this.randPics=await Y.getRandomImages(6),this.coverToEdit.color=(e=(t=this.currTask)==null?void 0:t.cover)!=null&&e.color?(i=this.currTask)==null?void 0:i.cover.color:"#cfd3da",this.coverToEdit.imgUrl=(r=(n=this.currTask)==null?void 0:n.cover)!=null&&r.imgUrl?(l=(s=this.currTask)==null?void 0:s.cover)==null?void 0:l.imgUrl:"",this.coverToEdit.type=(u=(c=this.currTask)==null?void 0:c.cover)!=null&&u.type?(C=(h=this.currTask)==null?void 0:h.cover)==null?void 0:C.type:"header"},methods:{async onUploadImg(t){this.isLoading=!0;const e=t.target.files[0],i=await ie(e);this.coverToEdit.imgUrl=i.url,this.isLoading=!1,this.updateCover()},setCoverType(t){this.coverToEdit.type=t,this.updateCover()},updateColor(t){this.coverToEdit.color=t,this.updateCover()},updateCover(){this.$emit("updateCover",this.coverToEdit)},setImgUrl(t){this.coverToEdit.imgUrl=t,this.updateCover()}},computed:{currColor(){},currTask(){return this.$store.getters.currTask},coverPreviewStyle(){return{"background-color":this.coverToEdit.color,"background-image":"url("+this.coverToEdit.imgUrl+")"}}},components:{colorPicker:W,searchPhoto:ao}},mo={key:1,class:"cover-item"},ho={class:"cover-preview"},po=o("h4",null,"Size",-1),go={class:"demo-images"},bo=o("img",{src:lo,alt:""},null,-1),_o=[bo],ko=o("img",{src:co,alt:""},null,-1),fo=[ko],vo=o("button",null,"Remove Cover",-1),yo={class:"color-picker-container"},Ao=o("h4",null,"Colors",-1),Co={class:"cover-attachments"},To=o("h4",null,"Attachments",-1),Io={key:0,class:"upload-img"},Bo=I(" Upload a cover image "),wo={key:1,class:"loader-svg"},Mo=o("img",{src:Ae,alt:""},null,-1),Eo=[Mo],So=o("h4",null,"Photos from Unsplash",-1),xo={class:"cover-mini-photos"},Lo=["onClick"],Uo=["src"];function Do(t,e,i,n,r,s){const l=p("color-picker"),c=p("search-photo");return a(),d(T,null,[r.photoSearch?(a(),d("span",{key:0,class:"icon-back cover-popup",onClick:e[0]||(e[0]=u=>r.photoSearch=!1)})):m("",!0),r.photoSearch?(a(),w(c,{key:2,coverToEdit:r.coverToEdit,onSetImgUrl:s.setImgUrl},null,8,["coverToEdit","onSetImgUrl"])):(a(),d("section",mo,[o("div",ho,[po,o("div",go,[o("div",{class:A(["demo-img",{"selected-type":r.coverToEdit.type==="header"}]),style:x(s.coverPreviewStyle),onClick:e[1]||(e[1]=u=>s.setCoverType("header"))},_o,6),o("div",{class:A(["demo-img",{"selected-type":r.coverToEdit.type==="inline"}]),style:x(s.coverPreviewStyle),onClick:e[2]||(e[2]=u=>s.setCoverType("inline"))},fo,6)]),vo]),o("div",yo,[Ao,k(l,{onUpdateColor:s.updateColor},null,8,["onUpdateColor"])]),o("div",Co,[To,r.isLoading?m("",!0):(a(),d("label",Io,[Bo,o("input",{type:"file",onChange:e[3]||(e[3]=(...u)=>s.onUploadImg&&s.onUploadImg(...u)),hidden:""},null,32)])),r.isLoading?(a(),d("div",wo,Eo)):m("",!0)]),So,o("div",xo,[(a(!0),d(T,null,M(r.randPics,u=>(a(),d("div",{key:u._id,onClick:h=>s.setImgUrl(u.sm),class:A({"selected-type":u.sm===r.coverToEdit.imgUrl})},[o("img",{src:u.thumb,alt:""},null,8,Uo)],10,Lo))),128)),o("button",{onClick:e[4]||(e[4]=u=>r.photoSearch=!0)},"Search for photos")])]))],64)}var Oo=g(uo,[["render",Do]]);const Fo={data(){return{autocomplete:"",center:{lat:32.109333,lng:34.855499}}},mounted(){this.autocomplete=new google.maps.places.Autocomplete(this.$refs.autocomplete,{types:["establishment"],componentRestrictions:{country:["IL"]},fields:["place._id","geometry","name"]}),this.autocomplete.addListener("place_changed",this.onPlaceChanged)},methods:{onPlaceChanged(){this.onSearch()},onPanTo(t=35.6895,e=139.6917){const i={type:"location",item:{lat:t,lng:e}};this.$emit("addItem",i)},geocode(t){z.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,key:"AIzaSyCv9mke4qM6dFwfae-VsXNlKlW2Mnk4kBk"}}).then(e=>e.data.results[0].geometry.location).then(e=>this.onPanTo(e.lat,e.lng))},onSearch(){this.geocode(this.$refs.autocomplete.value)}},components:{}},Ro={class:"location-input",type:"text",placeholder:"Search..",ref:"autocomplete"};function No(t,e,i,n,r,s){return a(),d("div",null,[o("input",Ro,null,512)])}var Go=g(Fo,[["render",No]]);const $o={name:"pop-up-main",props:{popupData:Object,action:String,task:Object,actionType:""},mounted(){this.$emit("popupHeight",this.$refs.popup.clientHeight)},methods:{updateCover(t){this.$emit("updateCover",t)},updateLabels(t,e){this.$emit("updateLabels",t,e)},closePopup(){this.$emit("closePopup")},addItem(t){this.$emit("addItem",t)},removeItem(){}},computed:{currBoard(){return this.$store.getters.currBoard}},components:{labelsItem:Is,checklistItem:$s,attachmentItem:Vs,coverItem:Oo,dateItem:Kt,membersItem:Os,locationItem:Go}},Po=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),Jo=[Po];function Zo(t,e,i,n,r,s){const l=L("click-outside");return b((a(),d("div",{ref:"popup",class:"pop-up-main",style:x(i.popupData.style)},[o("header",null,[o("p",null,v(i.popupData.name),1),o("span",{onClick:e[0]||(e[0]=c=>t.$emit("closePopup"))},Jo)]),o("main",null,[(a(),w(De(i.action),{onAddItem:s.addItem,board:s.currBoard,onUpdateLabels:s.updateLabels,onClosePopup:s.closePopup,onUpdateCover:s.updateCover,task:i.task},null,8,["onAddItem","board","onUpdateLabels","onClosePopup","onUpdateCover","task"]))])],4)),[[l,s.closePopup]])}var Te=g($o,[["render",Zo]]);const jo={name:"quick-edit",props:{task:Object},data(){return{actionType:"",popupData:null,taskToEdit:null,popupHeight:null}},created(){this.taskToEdit=JSON.parse(JSON.stringify(this.task))},mounted(){this.$refs.editLabels.getBoundingClientRect()},methods:{openTask(){this.$emit("openTask")},setPopupHeight(t){this.popupHeight=t},setCmp(t,e){this.actionType=t,this.popupData=e},updateLabels(t,e){},updateCover(t){this.taskToEdit.cover=t,this.$emit("addItem","_",this.taskToEdit)},addItem(t){if(t.type==="labels")if(this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]),this.taskToEdit.labelIds.includes(t.item._id)){const e=this.taskToEdit.labelIds.findIndex(i=>i===t.item._id);this.taskToEdit.labelIds.splice(e,1)}else this.taskToEdit.labelIds.push(t.item._id);if(t.type==="members")if(this.taskToEdit.members||(this.taskToEdit.members=[]),this.taskToEdit.members.some(e=>e._id===t.item._id)){const e=this.taskToEdit.members.findIndex(i=>i._id===t.item._id);this.taskToEdit.members.splice(e,1)}else this.taskToEdit.members.push(t.item);t.type==="dueDate"&&(this.taskToEdit.dueDate||(this.taskToEdit.dueDate=[]),this.taskToEdit.dueDate=t.item),this.$emit("addItem","_",this.taskToEdit)},async updateLabels(t,e){try{await this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t}),this.addItem(e)}catch{}}},computed:{labelsStyle(){let t=this.$refs.editLabels.getBoundingClientRect().bottom;const e=this.$refs.editLabels.getBoundingClientRect().x;return window.innerHeight-t-this.popupHeight<0&&(t=this.popupHeight+(window.innerHeight-t-this.popupHeight)),{top:t+"px",left:e+"px",position:"fixed"}},membersStyle(){const t=this.$refs.editMembers.getBoundingClientRect().bottom,e=this.$refs.editMembers.getBoundingClientRect().x;return{top:t+"px",left:e+"px",position:"fixed"}}},components:{popupMain:Te}},Qo={class:"quick-edit"},Yo=o("span",{class:"icon-board"},null,-1),Ho=I("Open card "),Vo=[Yo,Ho],zo=o("span",{class:"icon-label"},null,-1),qo=I("Edit Labels "),Xo=[zo,qo],Wo=o("span",{class:"icon-members"},null,-1),Ko=I("Change members "),ei=[Wo,Ko],ti=o("span",{class:"icon-cover"},null,-1),si=I("Change cover "),oi=[ti,si],ii=o("span",{class:"icon-time"},null,-1),ri=I("Edit Dates "),ni=[ii,ri],ai=o("span",{class:"icon-cancel"},null,-1),li=I(" Remove "),di=[ai,li];function ci(t,e,i,n,r,s){const l=p("popup-main");return a(),d("section",Qo,[o("div",{class:"btn",onClick:e[0]||(e[0]=(...c)=>s.openTask&&s.openTask(...c))},Vo),o("div",{ref:"editLabels",class:"btn",onClick:e[1]||(e[1]=c=>s.setCmp("labelsItem",{name:"Labels",style:s.labelsStyle}))},Xo,512),o("div",{ref:"editMembers",class:"btn",onClick:e[2]||(e[2]=c=>s.setCmp("membersItem",{name:"Members",style:s.labelsStyle}))},ei,512),o("div",{class:"btn",onClick:e[3]||(e[3]=c=>s.setCmp("coverItem",{name:"Members",style:s.labelsStyle}))},oi),o("div",{class:"btn",onClick:e[4]||(e[4]=c=>s.setCmp("dateItem",{name:"Dates",style:s.labelsStyle}))},ni),o("div",{class:"btn",onClick:e[5]||(e[5]=F(c=>t.$emit("removeTask"),["stop"]))},di),r.actionType?(a(),w(l,{key:0,ref:"popup",task:i.task,popupData:r.popupData,action:r.actionType,onAddItem:s.addItem,onUpdateLabels:s.updateLabels,onClosePopup:e[6]||(e[6]=c=>r.actionType=""),onUpdateCover:s.updateCover,onPopupHeight:s.setPopupHeight},null,8,["task","popupData","action","onAddItem","onUpdateLabels","onUpdateCover","onPopupHeight"])):m("",!0)])}var ui=g(jo,[["render",ci]]);const mi={name:"task-preview",props:{task:{type:Object,required:!0},labelStatus:Boolean},data(){return{editIcon:!1,isQuickEdit:!1,taskCopy:null,displayLabels:!1}},mounted(){},created(){this.taskCopy=JSON.parse(JSON.stringify(this.task))},components:{Draggable:ve,quickEdit:ui},methods:{toggleStatus(){var t=JSON.parse(JSON.stringify(this.task));t.status===""||!t.status?t.status="completed":t.status==="completed"?Date.now()>t.dueDate?t.status="overdue":t.status="":t.status==="overdue"&&(t.status="completed"),this.updateTask(t)},toggleLabel(){this.$store.commit({type:"toggleLabel"})},removeTask(){this.$emit("removeTask",this.task._id),this.$emit("onQuickEdit",!1)},toggleLabels(){this.$emit("toggleLabels")},quickEdit(){this.$emit("onQuickEdit",!0),this.isQuickEdit=!0},closeQuickEdit(){this.$emit("onQuickEdit",!1),this.isQuickEdit=!1},updateTask(t=this.taskCopy){this.$emit("updateTask",JSON.parse(JSON.stringify(t))),this.taskCopy=JSON.parse(JSON.stringify(this.task))},openTask(){this.closeQuickEdit(),this.$emit("openTask")},toggleLabels(){this.$emit("toggleLabels"),this.displayLabels?this.displayLabels=!this.displayLabels:setTimeout(()=>{this.displayLabels=!this.displayLabels},400)}},computed:{board(){return this.$store.getters.currBoard},labels(){var t;return(t=this.task.labelIds)!=null&&t.length?this.task.labelIds.map(e=>this.board.labels.find(i=>i._id===e)):!1},date(){return K(this.task.dueDate).format("lll").split(",")[0]},tasksDone(){return this.task.checklists.reduce((e,{todos:i})=>e+i.reduce((n,r)=>r.isDone?n+1:n,0),0)},numOfTodos(){return this.task.checklists.reduce((t,{todos:e})=>t+e.length,0)},coverStyle(){var t,e;if(((t=this.task.cover)==null?void 0:t.color)&&!this.task.cover.imgUrl)return{"background-color":this.task.cover.color};if((e=this.task.cover)!=null&&e.imgUrl)return{"background-image":"url("+this.task.cover.imgUrl+")",height:"260px"}},taskStyle(){var t;if(((t=this.task.cover)==null?void 0:t.type)==="inline")return{"background-color":this.task.cover.color,"font-weight":500,"font-size":"16px","padding-top":"30px","background-image":"url("+this.task.cover.imgUrl+")","min-height":this.task.cover.imgUrl?"250px":"",color:"#fff","padding-top":this.task.cover.imgUrl?"215px":"30px"}},numOfComments(){var t;return(t=this.task.activities)!=null&&t.length?this.task.activities.reduce((e,i)=>i.isComment?e+1:e,0):0},quickEditPos(){const t=this.$refs.tasky.getBoundingClientRect().y,e=this.$refs.tasky.getBoundingClientRect().right;return{top:t+"px",left:e+"px"}}}},hi={class:"task-preview-container"},pi={key:1,class:"dark-wrap"},gi={key:3,class:"preview-icon labels"},bi={key:6,class:"icons"},_i={key:0,class:"clock-icon"},ki={key:1,class:"icon-checklist"},fi={key:2,class:"icon-emptyBox"},vi={key:1,class:"preview-icon"},yi=o("span",{class:"icon-description"},null,-1),Ai=[yi],Ci={key:2,class:"preview-icon"},Ti=o("span",{class:"icon-chat"},null,-1),Ii={key:3,class:"preview-icon"},Bi=o("span",{class:"icon-location"},null,-1),wi=[Bi],Mi={key:4,class:"preview-icon"},Ei=o("span",{class:"icon-attachment"},null,-1),Si=o("span",{class:"icon-checklist"},null,-1),xi={key:1,class:"preview-icon members"};function Li(t,e,i,n,r,s){const l=p("avatar"),c=p("quick-edit"),u=p("Draggable");return i.task?(a(),w(u,{key:0},{default:j(()=>{var h,C,_,B,S,f,P,U,Z,H,V,y,re,ne,ae,le,de,ce,ue,me,he;return[o("div",hi,[o("section",{class:A(["task-preview",{"on-quick-edit":r.isQuickEdit}]),style:x(s.taskStyle),onMouseover:e[5]||(e[5]=D=>r.editIcon=!0),onMouseleave:e[6]||(e[6]=D=>r.editIcon=!1),ref:"tasky"},[r.editIcon?(a(),d("span",{key:0,class:"icon-edit",onClick:e[0]||(e[0]=F((...D)=>s.quickEdit&&s.quickEdit(...D),["stop"]))})):m("",!0),((h=this.task.cover)==null?void 0:h.imgUrl)&&this.task.cover.type==="inline"?(a(),d("div",pi)):m("",!0),((C=i.task.cover)==null?void 0:C.type)==="header"?(a(),d("div",{key:2,class:"task-preview-cover",style:x(s.coverStyle)},null,4)):m("",!0),s.labels&&((_=this.task.cover)==null?void 0:_.type)!=="inline"?(a(),d("div",gi,[(a(!0),d(T,null,M(s.labels,(D,we)=>(a(),d("div",{key:we,onClick:e[1]||(e[1]=F((...Me)=>s.toggleLabels&&s.toggleLabels(...Me),["stop"])),class:A(["label",{openLabel:i.labelStatus}]),style:x({"background-color":D.color})},v(D.title),7))),128))])):m("",!0),r.isQuickEdit?m("",!0):(a(),d("p",{key:4,class:A(["title",{"pos-absolute":((B=this.task.cover)==null?void 0:B.type)==="inline"&&((S=this.task.cover)==null?void 0:S.imgUrl)}])},v(i.task.title),3)),r.isQuickEdit?b((a(),d("textarea",{key:5,"onUpdate:modelValue":e[2]||(e[2]=D=>r.taskCopy.title=D),onChange:e[3]||(e[3]=(...D)=>s.updateTask&&s.updateTask(...D)),name:"",id:"",cols:"30",rows:"10"},null,544)),[[E,r.taskCopy.title]]):m("",!0),((f=i.task.status)==null?void 0:f.length)||s.numOfComments||((P=i.task.attachments)==null?void 0:P.length)||((U=i.task.checklists)==null?void 0:U.length)&&s.numOfTodos||((Z=i.task.members)==null?void 0:Z.length)?(a(),d("div",bi,[((H=this.task.cover)==null?void 0:H.type)!=="inline"?(a(),d("div",{key:0,class:A(["icon-container flex",{"p-b-10":((V=i.task.status)==null?void 0:V.length)||((y=i.task.attachments)==null?void 0:y.length)||((re=i.task.checklists)==null?void 0:re.length)&&s.numOfTodos||((ne=i.task.members)==null?void 0:ne.length)}])},[i.task.dueDate?(a(),d("div",{key:0,class:"duedate",onClick:e[4]||(e[4]=F((...D)=>s.toggleStatus&&s.toggleStatus(...D),["stop"]))},[o("span",{class:A(["preview-icon date",{completed:i.task.status==="completed",overdue:i.task.status==="overdue"}]),style:{"font-size":12+"px"}},[(ae=i.task.status)!=null&&ae.length?(a(),d("span",_i)):m("",!0),((le=i.task)==null?void 0:le.status)==="completed"?(a(),d("span",ki)):m("",!0),((de=i.task)==null?void 0:de.status)==="overdue"?(a(),d("span",fi)):m("",!0),I(" "+v(s.date),1)],2)])):m("",!0),i.task.description?(a(),d("div",vi,Ai)):m("",!0),s.numOfComments?(a(),d("div",Ci,[Ti,o("p",null,v(s.numOfComments),1)])):m("",!0),i.task.location?(a(),d("div",Ii,wi)):m("",!0),(ce=i.task.attachments)!=null&&ce.length?(a(),d("div",Mi,[Ei,o("p",null,v((ue=i.task.attachments)==null?void 0:ue.length),1)])):m("",!0),((me=i.task.checklists)==null?void 0:me.length)&&s.numOfTodos?(a(),d("div",{key:5,class:A(["preview-icon",{completed:s.tasksDone===s.numOfTodos}])},[Si,o("p",null,v(s.tasksDone)+" / "+v(s.numOfTodos),1)],2)):m("",!0)],2)):m("",!0),(he=i.task.members)!=null&&he.length?(a(),d("div",xi,[(a(!0),d(T,null,M(i.task.members,D=>(a(),d("div",{key:D._id,class:"member"},[k(l,{size:28,color:"white",name:D.fullname},null,8,["name"])]))),128))])):m("",!0)])):m("",!0)],38),r.isQuickEdit?(a(),w(c,{key:0,onRemoveTask:s.removeTask,onAddItem:s.updateTask,task:i.task,onOpenTask:s.openTask,style:x(s.quickEditPos),class:A({"on-quick-edit":r.isQuickEdit})},null,8,["onRemoveTask","onAddItem","task","onOpenTask","style","class"])):m("",!0)]),o("div",{class:A(["overlay",{"open-overlay":r.isQuickEdit}]),onClick:e[7]||(e[7]=F((...D)=>s.closeQuickEdit&&s.closeQuickEdit(...D),["stop"]))},null,2)]}),_:1})):m("",!0)}var Ui=g(mi,[["render",Li]]);const Di={data(){return{isCreating:null,title:""}},methods:{addTask(){!this.title||(this.$emit("addTask",this.title),this.isCreating=null,this.title="")}}},Oi={key:0,class:"task-add open"},Fi={class:"add-task-btns"},Ri=o("span",{class:"plus-icon"},null,-1),Ni=o("span",{class:"add-task-txt"},"Add a card",-1),Gi=[Ri,Ni];function $i(t,e,i,n,r,s){const l=L("focus");return r.isCreating?(a(),d("section",Oi,[b(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=c=>r.title=c),type:"textarea",placeholder:"Enter a title for this card...",class:"inline-input"},null,512),[[l],[E,r.title]]),o("section",Fi,[o("button",{onClick:e[1]||(e[1]=(...c)=>s.addTask&&s.addTask(...c)),class:"add-card-btn"},"Add card"),o("span",{class:"icon-cancel",onClick:e[2]||(e[2]=c=>r.isCreating=!1)})])])):(a(),d("section",{key:1,onClick:e[3]||(e[3]=c=>r.isCreating=!0),class:"task-add"},Gi))}var Pi=g(Di,[["render",$i]]);const Ji={name:"add-group",data(){return{isFocused:!1,groupTitle:""}},methods:{addGroup(){!this.groupTitle||(this.$emit("add",this.groupTitle),this.groupTitle="")},close(){this.isFocused=!1}}},Zi={key:0,class:"add-group-btn"},ji=o("span",{class:"icon-plus"},null,-1),Qi=I(" Add another list "),Yi=[ji,Qi],Hi={key:1,class:"group-add-input-container"},Vi={class:"add-group-btns"};function zi(t,e,i,n,r,s){const l=L("focus"),c=L("click-outside");return b((a(),d("section",{class:A(["add-group",{editable:r.isFocused}]),onClick:e[3]||(e[3]=u=>r.isFocused=!0)},[r.isFocused?(a(),d("section",Hi,[b(o("input",{type:"text",class:"inline-input","onUpdate:modelValue":e[0]||(e[0]=u=>r.groupTitle=u),placeholder:"Enter list title..."},null,512),[[E,r.groupTitle],[l]]),o("section",Vi,[o("button",{onClick:e[1]||(e[1]=(...u)=>s.addGroup&&s.addGroup(...u)),class:"add-group-btn"},"Add list"),o("span",{class:"icon-cancel",onClick:e[2]||(e[2]=F((...u)=>s.close&&s.close(...u),["stop"]))})])])):(a(),d("span",Zi,Yi))],2)),[[c,s.close]])}var qi=g(Ji,[["render",zi]]);const Xi="",R=Wi();R.setup();function Wi(){var t=null;return{async setup(){t=Oe(Xi)},on(i,n){t.on(i,n)},off(i,n=null){!t||(n?t.off(i,n):t.removeAllListeners(i))},emit(i,n){t.emit(i,n)},terminate(){t=null}}}const Ki={name:"attachment-preview",props:{attachment:Object},methods:{removeAttachment(t){this.$emit("removeAttachment",t)}},computed:{createdAt(){return K(this.attachment.createdAt).startOf("hour").fromNow()}}},er={class:"attachment-item"},tr={class:"image-container"},sr=["src"],or={class:"attachment-details"},ir={class:"main-actions"},rr=I(" Added "),nr=o("span",{class:"attachment-action"},"Comment",-1),ar=I(" - "),lr=I(" - "),dr=o("span",{class:"attachment-action"},"Edit",-1),cr=o("div",null,[o("span",{class:"attachment-action"},"Make Cover")],-1);function ur(t,e,i,n,r,s){return a(),d("li",er,[o("div",tr,[o("img",{src:i.attachment.url,alt:""},null,8,sr)]),o("div",or,[o("h4",null,v(i.attachment.fileName),1),o("div",ir,[rr,o("span",null,v(s.createdAt)+" -",1),nr,ar,o("span",{class:"attachment-action",onClick:e[0]||(e[0]=F(l=>s.removeAttachment(i.attachment.id),["stop"]))},"Delete"),lr,dr]),cr])])}var mr=g(Ki,[["render",ur]]);const hr={name:"attachment",props:{attachments:Array},data(){return{}},methods:{removeAttachment(t){const e=this.attachments.findIndex(i=>t===i.id);this.attachments.splice(e,1),this.updateAttachments(JSON.parse(JSON.stringify(this.attachments)))},updateAttachments(t){this.$emit("updateAttachments",{type:"attachments",val:t})}},components:{attachmentPreview:mr}},pr={class:"attachments-container"};function gr(t,e,i,n,r,s){const l=p("attachmentPreview");return a(),d("section",pr,[o("ul",null,[(a(!0),d(T,null,M(i.attachments,c=>(a(),w(l,{onRemoveAttachment:s.removeAttachment,attachment:c,key:c.id},null,8,["onRemoveAttachment","attachment"]))),128))])])}var br=g(hr,[["render",gr]]);const _r={props:{task:Object},data(){return{dateStatus:!1}},created(){this.status==="completed"&&(this.dateStatus=!0)},methods:{updateStatus(){var t="";this.dateStatus?t="completed":this.dueDate<Date.now()&&(t="overdue");const e={type:"status",item:t};this.$emit("addItem",e)},setLabels(){this.$emit("setLabels")},setDate(){this.$emit("setDate"),this.updateStatus()},setMembers(){this.$emit("setMembers")}},computed:{status(){if(this.currStatus==="completed")return"completed";if(this.dueDate<Date.now())return"overdue"},currStatus(){return this.task.status},dueDate(){return this.task.dueDate},members(){return this.task.members},labelIds(){return this.task.labelIds},boardLabels(){return this.$store.getters.currBoard.labels},taskLabels(){var t;if(!!((t=this.labelIds)!=null&&t.length))return this.labelIds.map(e=>this.boardLabels.find(i=>i._id===e))},date(){return K(this.dueDate).format("lll")}},watch:{dueDate(){this.updateStatus()}}},kr={class:"task-combo-list flex wrap"},fr={key:0,class:"members flex column"},vr=o("h3",null,"Members",-1),yr={class:"flex"},Ar={key:1,class:"labels flex column"},Cr=o("h3",null,"Labels",-1),Tr={class:"flex label"},Ir={key:2,class:"due-date"},Br=o("h3",null,"Due date",-1),wr={class:"due-date flex"},Mr=o("span",{class:"open-icon"},null,-1);function Er(t,e,i,n,r,s){var c,u;const l=p("avatar");return a(),d("section",kr,[(c=s.members)!=null&&c.length?(a(),d("section",fr,[vr,o("section",yr,[(a(!0),d(T,null,M(s.members,h=>(a(),d("div",{key:h._id},[k(l,{size:"32",color:"white",name:h.fullname,class:"avatar"},null,8,["name"])]))),128)),o("span",{onClick:e[0]||(e[0]=(...h)=>s.setMembers&&s.setMembers(...h)),class:"combo-add-icon"})])])):m("",!0),(u=s.taskLabels)!=null&&u.length?(a(),d("section",Ar,[Cr,o("section",Tr,[(a(!0),d(T,null,M(s.taskLabels,(h,C)=>(a(),d("div",{key:C},[h?(a(),d("span",{key:0,style:x({"background-color":h.color})},v(h.title),5)):m("",!0)]))),128)),o("div",{class:"combo-add-icon label",onClick:e[1]||(e[1]=(...h)=>s.setLabels&&s.setLabels(...h))})])])):m("",!0),s.dueDate?(a(),d("section",Ir,[Br,o("section",wr,[b(o("input",{type:"checkbox",class:"date-checkbox","onUpdate:modelValue":e[2]||(e[2]=h=>r.dateStatus=h),onChange:e[3]||(e[3]=(...h)=>s.updateStatus&&s.updateStatus(...h))},null,544),[[Q,r.dateStatus]]),o("div",{class:"title",onClick:e[4]||(e[4]=(...h)=>s.setDate&&s.setDate(...h))},[I(v(s.date)+" ",1),o("span",{class:A(["status",{completed:s.status==="completed",overdue:s.status==="overdue"}])},v(s.status),3),Mr])])])):m("",!0)])}var Sr=g(_r,[["render",Er]]);const xr={name:"task-checklist",props:{checklist:Object},data(){return{checklistToEdit:null,newTodoTitle:"",addItemMode:!1,isHideDone:!1}},created(){this.checklistToEdit=JSON.parse(JSON.stringify(this.checklist))},methods:{addTodo(){if(!this.newTodoTitle)return;const t={_id:$.makeId(),title:this.newTodoTitle,isDone:!1};this.checklistToEdit.todos.push(t),this.newTodoTitle="",this.addItemMode=!1,this.updateTask()},deleteChecklist(){this.$emit("updateItem",{type:"checklists",val:{_id:this.checklistToEdit._id}})},updateTask(){this.$emit("updateItem",{type:"checklists",val:JSON.parse(JSON.stringify(this.checklistToEdit))})}},computed:{doneTodosPerecent(){const t=this.checklistToEdit.todos.length;if(!t)return 0;const e=this.checklistToEdit.todos.reduce((i,n)=>n.isDone?i+1:i,0);return parseInt(e/t*100)},isAnyTodoDone(){return this.checklistToEdit.todos.some(t=>t.isDone)},hideBtnTxt(){return this.isHideDone?`Show checked items (${this.checklistToEdit.todos.reduce((e,i)=>i.isDone?e+1:e,0)})`:"Hide checked items"}}},Lr={key:0,class:"task-checklist"},Ur=o("section",{class:"block-title"},[o("span",{class:"icon checklist-icon"})],-1),Dr={class:"checklist-header-container"},Or={class:"header-actions flex"},Fr={class:"progress-bar"},Rr={class:"percentage"},Nr=["value"],Gr={class:"todos-container"},$r={key:0,class:"todo-container"},Pr=["onUpdate:modelValue"],Jr=["onUpdate:modelValue"],Zr={key:1},jr={class:"actions"};function Qr(t,e,i,n,r,s){const l=L("focus");return i.checklist?(a(),d("section",Lr,[o("header",null,[Ur,o("section",Dr,[b(o("input",{type:"text",class:"checklist-title-input",onBlur:e[0]||(e[0]=(...c)=>s.updateTask&&s.updateTask(...c)),"onUpdate:modelValue":e[1]||(e[1]=c=>r.checklistToEdit.title=c)},null,544),[[E,r.checklistToEdit.title]]),o("section",Or,[s.isAnyTodoDone?(a(),d("button",{key:0,onClick:e[2]||(e[2]=c=>r.isHideDone=!r.isHideDone),class:"hide-show-btn"},v(s.hideBtnTxt),1)):m("",!0),o("button",{onClick:e[3]||(e[3]=(...c)=>s.deleteChecklist&&s.deleteChecklist(...c))},"Delete")])])]),o("div",Fr,[o("span",Rr,v(s.doneTodosPerecent)+"%",1),o("progress",{value:s.doneTodosPerecent,max:"100"},null,8,Nr)]),o("div",Gr,[(a(!0),d(T,null,M(r.checklistToEdit.todos,c=>(a(),d("div",{key:c._id},[!r.isHideDone||!c.isDone?(a(),d("div",$r,[b(o("input",{type:"checkbox","onUpdate:modelValue":u=>c.isDone=u,onChange:e[4]||(e[4]=(...u)=>s.updateTask&&s.updateTask(...u))},null,40,Pr),[[Q,c.isDone]]),b(o("textarea",{spellcheck:"false",class:A({completed:c.isDone}),onBlur:e[5]||(e[5]=(...u)=>s.updateTask&&s.updateTask(...u)),"onUpdate:modelValue":u=>c.title=u,rows:"1"},null,42,Jr),[[E,c.title]])])):m("",!0)]))),128))]),r.addItemMode?(a(),d("section",Zr,[b(o("textarea",{"onUpdate:modelValue":e[7]||(e[7]=c=>r.newTodoTitle=c),placeholder:"Add an item",class:"add-todo-inp"},null,512),[[E,r.newTodoTitle],[l]]),o("section",jr,[o("button",{class:"blue-btn",onClick:e[8]||(e[8]=(...c)=>s.addTodo&&s.addTodo(...c))},"Add"),o("i",{onClick:e[9]||(e[9]=c=>r.addItemMode=!1),class:"fa-solid fa-x"})])])):(a(),d("button",{key:0,onClick:e[6]||(e[6]=c=>r.addItemMode=!0),class:"add-todo-btn"},"Add an item"))])):m("",!0)}var Yr=g(xr,[["render",Qr]]);const Hr={props:{pp:String},created(){},methods:{setComment(){this.pp&&this.$emit("updateItem",this.pp,!1),this.$emit("addComment")}},components:{}},Vr=o("button",{class:"save"},"Save",-1),zr=[Vr],qr=fe('<div class="comment-actions flex"><span class="icon-attachment"></span><span class="icon-find-members"></span><span class="icon-emojis"></span><span class="title-icon"></span></div>',1);function Xr(t,e,i,n,r,s){return a(),d("section",null,[o("div",{onClick:e[0]||(e[0]=(...l)=>s.setComment&&s.setComment(...l)),class:"comment-save"},zr),qr])}var Ie=g(Hr,[["render",Xr]]);const Wr={name:"activities-list",props:{task:Object,user:Object,memberToAdd:Object},data(){return{isEditing:"",txt:[],lastAtIndex:0,currActivityId:""}},methods:{findMembers(t){this.$emit("findMembers",t)},closeComment(){this.isEditing&&(this.isEditing=!1),this.$emit("closeComment")},deleteItem(t){var e={_id:t};this.$emit("updateItem",{type:"comment",val:JSON.parse(JSON.stringify(e))})},updateItem(t,e){this.currActivityId=t;var i=JSON.parse(JSON.stringify(this.task)),n=i.activities.find(r=>r._id===t);n.isEditing=e,this.$emit("updateItem",{type:"comment",val:JSON.parse(JSON.stringify(n))}),this.txt=""}},components:{commentActions:Ie},watch:{memberToAdd(){this.isEditing&&this.updateItem(this.currActivityId,!0)}}},Kr={key:0,class:"comment-text"},en={class:"member"},tn=["onUpdate:modelValue","onInput"],sn={class:"comment-btns"},on=["onClick"],rn=["onClick"],nn={key:2},an=["onClick"];function ln(t,e,i,n,r,s){var C;const l=p("avatar"),c=p("timeago"),u=p("comment-actions"),h=L("click-outside");return a(),d("section",null,[(C=i.task.activities)!=null&&C.length?(a(),d("ul",Kr,[(a(!0),d(T,null,M(i.task.activities,_=>(a(),d("li",{key:_._id,class:A({open:_.isEditing})},[k(l,{class:"activity-avatar",size:"32",name:_.byMember.fullname},null,8,["name"]),o("div",{class:A({activity:_.isComment})},[o("span",en,v(_.byMember.username),1),k(c,{class:"time",datetime:_.createdAt},null,8,["datetime"])],2),o("div",{class:A(["try",{open:_.isEditing}])},[o("div",{class:A(["task-activity-txt",{open:_.isEditing}])},[b(o("input",{"onUpdate:modelValue":B=>_.txt=B,type:"text",onInput:B=>s.findMembers(_._id)},null,40,tn),[[E,_.txt],[h,s.closeComment]])],2),_.isEditing?(a(),w(u,{key:0,pp:_._id,popo:r.isEditing,class:A([{open:_.isEditing},"comments-main-container flex space-between"]),onUpdateItem:s.updateItem},null,8,["pp","popo","class","onUpdateItem"])):m("",!0)],2),o("div",sn,[_.isEditing?(a(),d("button",{key:0,class:"close-comment-edit",onClick:B=>s.updateItem(_._id,!1)},null,8,on)):m("",!0),!_.isEditing&&i.user._id===_.byMember._id?(a(),d("a",{key:1,onClick:B=>(r.isEditing=!0,s.updateItem(_._id,!0))},"Edit",8,rn)):m("",!0),!_.isEditing&&i.user._id===_.byMember._id?(a(),d("span",nn,"-")):m("",!0),!_.isEditing&&i.user._id===_.byMember._id?(a(),d("a",{key:3,onClick:B=>s.deleteItem(_._id)},"Delete",8,an)):m("",!0)])],2))),128))])):m("",!0)])}var dn=g(Wr,[["render",ln]]);const cn={props:["board"],data(){return{}},methods:{addMember({fullname:t,username:e,imgUrl:i,_id:n}){const r={fullname:t,username:e,imgUrl:i,_id:n};this.$emit("addTag",r)},computed:{currTask(){return this.$store.getters.currTask},currTaskMembersIds(){let t=this.currTask.members;return t?t.map(e=>e._id):[]}}}},un={key:0,class:"members-item"},mn=o("h3",{class:"header"},"Mentions...",-1),hn=["onClick"],pn={class:"member-container flex align-items justify-center"},gn={class:"avatar"},bn={class:"name"};function _n(t,e,i,n,r,s){const l=p("avatar");return i.board?(a(),d("section",un,[mn,o("ul",null,[(a(!0),d(T,null,M(i.board.members,c=>(a(),d("li",{key:c._id,class:"member find flex align-items space-between",onClick:F(u=>s.addMember(c),["stop"])},[o("div",pn,[o("div",gn,[k(l,{size:28,color:"white",name:c.fullname},null,8,["name"])]),o("span",bn,v(c.fullname),1)])],8,hn))),128))])])):m("",!0)}var kn=g(cn,[["render",_n]]);const fn={data(){return{taskToEdit:null,showSaveBtn:!1,popupData:null,actionType:null,isDescEditMode:!1,isComment:!1,comment:"",isFindMembers:!1,lastAtIndex:0,memberToAdd:""}},created(){this.taskToEdit=JSON.parse(JSON.stringify(this.task)),this.isComment=!1},methods:{deleteMap(){this.taskToEdit.location="",this.onTaskEdit()},openComment(){this.isComment=!0,this.comment||(this.lastAtIndex=0)},addTag(t){this.memberToAdd=t,this.tagMembers()},tagMembers(t){if(this.isFindMembers&&(this.isFindMembers=!this.isFindMembers,this.isComment&&this.memberToAdd))return this.comment+=this.memberToAdd.fullname,this.memberToAdd="";var e;t?(e=this.task.activities.find(n=>n._id===t).txt,this.lastAtIndex=e.length-2):e=this.comment;var i=e.indexOf("@",this.lastAtIndex+1);i!==-1&&(this.lastAtIndex=i),(i!==-1&&e[i-1]===" "||e.length===1&&e==="@")&&(this.isFindMembers=!0)},closeComment(){this.isComment&&(this.lastAtIndex=0,this.isComment=!1,this.comments="")},addComment(){this.lastAtIndex=0;const t={type:"comment",item:{byMember:this.miniUser,createdAt:Date.now(),task:{_id:this.task._id,title:this.task.title},txt:this.comment,_id:$.makeId(),isComment:!0}},e={by:this.miniUser,createdAt:Date.now(),txt:`${this.miniUser.username} tagged you`};t.item.txt.split(" ").forEach(i=>{if(i[0]==="@"){const n=i.substring(1),r=this.board.members.find(s=>s.username===n);r&&(e.to=r,R.emit("notify user tag",e))}}),this.addItem(t),this.closeComment(),this.comment=""},setLocation(t){this.actionType=t,this.popupData={name:"Location",style:{top:"240px"}}},setDate(t){this.actionType=t,this.popupData={name:"Dates",style:{top:"180px"}}},updateCover(t){this.taskToEdit.cover=t,this.onTaskEdit()},setMembers(t){this.actionType=t,this.popupData={name:"Members",style:{top:"59px"}}},setLabels(t){this.actionType=t,this.popupData={name:"Labels",style:{top:"99px"}}},setAttachments(t){this.actionType=t,this.popupData={name:"Attachments",style:{top:"220px"}}},setChecklist(t){this.actionType=t,this.popupData={name:"Add checklist",style:{top:"140px"}}},setCover(t){this.actionType=t,this.popupData={name:"Cover",style:{top:"300px"}}},closePopup(){this.actionType=null,this.popupData=null},addItem(t){if(t.type==="attachment")this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(t.item),this.onTaskEdit();else if(t.type==="comment")this.taskToEdit.activities||(this.taskToEdit.activities=[]),this.taskToEdit.activities.unshift(t.item);else if(t.type==="dueDate")this.taskToEdit.dueDate=t.item,this.onTaskEdit(),this.closePopup();else if(t.type==="status")this.taskToEdit.status=t.item;else if(t.type==="location")this.taskToEdit.location=t.item,this.closePopup();else if(t.type==="checklist")this.taskToEdit.checklists||(this.taskToEdit.checklists=[]),this.taskToEdit.checklists.push(t.item),this.closePopup();else if(t.type==="members")if(this.taskToEdit.members||(this.taskToEdit.members=[]),this.taskToEdit.members.some(i=>i._id===t.item._id)){const i=this.taskToEdit.members.findIndex(n=>n._id===t.item._id);this.taskToEdit.members.splice(i,1)}else this.taskToEdit.members.push(t.item);else if(t.type==="labels")if(this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]),this.taskToEdit.labelIds.includes(t.item._id)){const i=this.taskToEdit.labelIds.findIndex(n=>n===t.item._id);var e=this.taskToEdit.labelIds[i];t.item.color===e.color&&t.item.title===e.title&&this.taskToEdit.labelIds.splice(i,1)}else this.taskToEdit.labelIds.push(t.item._id);this.onTaskEdit(t)},updateItem({type:t,val:e}){var i;if(t==="checklists"){const n=this.taskToEdit.checklists,r=n.findIndex(s=>s._id===e._id);e.title?n.splice(r,1,e):n.splice(r,1)}else if(t==="comment"){const n=this.taskToEdit.activities,r=n.findIndex(s=>s._id===e._id);(i=e.txt)!=null&&i.length?n.splice(r,1,e):n.splice(r,1)}else this.taskToEdit[t]=e;this.onTaskEdit()},onTaskEdit(t=null){this.$store.dispatch({type:"setTask",task:JSON.parse(JSON.stringify(this.taskToEdit)),action:t}),this.$store.commit({type:"setCurrTask",task:JSON.parse(JSON.stringify(this.taskToEdit))})},async updateLabels(t,e){var i;if((i=e.item)!=null&&i.isDelete)return this.removeLabel(t,e);try{await this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t}),this.addItem(e),this.closePopup()}catch(n){console.log("err",n)}},removeLabel(t,e){const i=this.taskToEdit.labelIds.findIndex(n=>n===e.item._id);this.taskToEdit.labelIds.splice(i,1),this.onTaskEdit(),this.closePopup(),this.$store.dispatch({type:"setBoardPrefs",key:"labels",val:t})},cancelDescEdit(){this.taskToEdit.description=this.task.description,this.isDescEditMode=!1},saveDescEdit(){this.isDescEditMode&&(this.onTaskEdit(),this.isDescEditMode=!1)},closeModal(){this.$emit("closeModal")}},computed:{board(){return this.$store.getters.currBoard},group(){return this.$store.getters.currGroup},task(){return JSON.parse(JSON.stringify(this.$store.getters.currTask))},currUser(){return this.$store.getters.user},coverStyle(){return{"background-color":this.taskToEdit.cover.color,"background-image":"url("+this.taskToEdit.cover.imgUrl+")"}},miniUser(){return this.$store.getters.miniUser}},components:{popupMain:Te,attachment:br,taskComboList:Sr,taskCheckList:Yr,contenteditable:Fe,activitiesList:dn,commentActions:Ie,findMembers:kn},unmounted(){var e,i;if(this.lastAtIndex=0,(i=(e=this.task)==null?void 0:e.activities)!=null&&i.length){var t=this.task.activities.map(n=>{if(n.isEditing)return n});t.forEach(n=>{n&&(n.isEditing=!1,this.updateItem({type:"comment",val:n}))})}this.$emit("cleanStore")}},vn={class:"task-details-modal"},yn={class:"header"},An=o("span",{class:"icon title-icon"},null,-1),Cn={class:"boad-title"},Tn={class:"task-detail-main"},In={class:"task-content"},Bn={class:"task-description"},wn=o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Description")],-1),Mn={class:"description-container"},En={key:0,class:"save-close-description"},Sn={key:1,class:"attachment-container"},xn=o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Attachments")],-1),Ln={class:"attachment-content"},Un={key:2,class:"location-container"},Dn=o("div",{class:"activity-show-details"},[o("div",{class:"block-title"},[o("span",{class:"icon"}),o("h3",null,"Activity")]),o("button",{class:"show-details-btn"},"Show Details")],-1),On={class:"comment-text"},Fn={class:"actions-btns-container"},Rn=o("h3",null,"Add To card",-1),Nn=o("span",{class:"icon-members"},null,-1),Gn=I(" Members "),$n=[Nn,Gn],Pn=o("span",{class:"icon-label"},null,-1),Jn=I(" Labels "),Zn=[Pn,Jn],jn=o("span",{class:"icon-checklist"},null,-1),Qn=I(" Checklist "),Yn=[jn,Qn],Hn=o("span",{class:"icon-time"},null,-1),Vn=I(" Dates "),zn=[Hn,Vn],qn=o("span",{class:"icon-attachment"},null,-1),Xn=I(" Attachments "),Wn=[qn,Xn],Kn=o("span",{class:"icon-location"},null,-1),ea=I(" Location "),ta=[Kn,ea],sa=o("span",{class:"icon-cover"},null,-1),oa=I(" Cover "),ia=[sa,oa],ra=o("div",null,[o("h3",null,"Actions"),o("button",null,[o("span",{class:"icon-copy"}),I(" Copy ")]),o("button",null,[o("span",{class:"icon-share"}),I(" Share ")])],-1);function na(t,e,i,n,r,s){var V;const l=p("task-combo-list"),c=p("contenteditable"),u=p("attachment"),h=p("GMapMarker"),C=p("GMapCluster"),_=p("GMapMap"),B=p("task-check-list"),S=p("avatar"),f=p("comment-actions"),P=p("activities-list"),U=p("popup-main"),Z=p("find-members"),H=L("click-outside");return a(),d("section",vn,[r.taskToEdit.cover?(a(),d("div",{key:0,style:x(s.coverStyle),class:"task-cover"},[o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...y)=>s.closeModal&&s.closeModal(...y))})],4)):m("",!0),o("div",yn,[r.taskToEdit.cover?m("",!0):(a(),d("span",{key:0,class:"icon-cancel",onClick:e[1]||(e[1]=(...y)=>s.closeModal&&s.closeModal(...y))})),An,b(o("input",{type:"text",onBlur:e[2]||(e[2]=(...y)=>s.onTaskEdit&&s.onTaskEdit(...y)),"onUpdate:modelValue":e[3]||(e[3]=y=>r.taskToEdit.title=y),class:"task-details-title"},null,544),[[E,r.taskToEdit.title]])]),o("p",Cn,"In list "+v(s.board.title),1),o("section",Tn,[o("div",In,[r.taskToEdit.members||r.taskToEdit.labelIds||r.taskToEdit.dueDate?(a(),w(l,{key:0,task:r.taskToEdit,onSetLabels:e[4]||(e[4]=y=>s.setLabels("labelsItem")),onSetDate:e[5]||(e[5]=y=>s.setDate("dateItem")),onSetMembers:e[6]||(e[6]=y=>s.setMembers("membersItem")),onAddItem:s.addItem},null,8,["task","onAddItem"])):m("",!0),o("div",Bn,[wn,b((a(),d("div",Mn,[k(c,{onClick:e[7]||(e[7]=y=>r.isDescEditMode=!0),tag:"div",contenteditable:"true",spellcheck:"false",modelValue:r.taskToEdit.description,"onUpdate:modelValue":e[8]||(e[8]=y=>r.taskToEdit.description=y),noHTML:!0,class:A(["description-textarea",{"desc-with-content":r.taskToEdit.description,focused:r.isDescEditMode}])},null,8,["modelValue","class"]),r.isDescEditMode?(a(),d("div",En,[o("button",{class:"save",onClick:e[9]||(e[9]=(...y)=>s.saveDescEdit&&s.saveDescEdit(...y))},"Save"),o("i",{class:"fa-solid fa-x",onClick:e[10]||(e[10]=(...y)=>s.cancelDescEdit&&s.cancelDescEdit(...y))})])):m("",!0)])),[[H,s.saveDescEdit]])]),(V=r.taskToEdit.attachments)!=null&&V.length?(a(),d("div",Sn,[xn,o("div",Ln,[k(u,{attachments:r.taskToEdit.attachments,onUpdateAttachments:s.updateItem},null,8,["attachments","onUpdateAttachments"])])])):m("",!0),s.task.location?(a(),d("div",Un,[k(_,{class:"maps",center:s.task.location,zoom:7,"map-type-id":"terrain",style:{width:"500px",height:"300px"}},{default:j(()=>[k(C,null,{default:j(()=>[k(h,{position:s.task.location},null,8,["position"])]),_:1})]),_:1},8,["center"]),o("a",{onClick:e[11]||(e[11]=(...y)=>s.deleteMap&&s.deleteMap(...y))},"Delete")])):m("",!0),(a(!0),d(T,null,M(r.taskToEdit.checklists,y=>(a(),w(B,{key:y._id,checklist:y,onUpdateItem:s.updateItem},null,8,["checklist","onUpdateItem"]))),128)),Dn,b((a(),d("div",{class:A([{open:r.isComment},"comment-text-container"])},[o("div",On,[k(S,{size:"32",name:s.currUser.fullname},null,8,["name"]),b(o("input",{class:A({open:r.isComment}),onClick:e[12]||(e[12]=(...y)=>s.openComment&&s.openComment(...y)),onInput:e[13]||(e[13]=y=>s.tagMembers(null)),placeholder:"Write a comment...",type:"text","onUpdate:modelValue":e[14]||(e[14]=y=>r.comment=y)},null,34),[[E,r.comment]]),r.isComment?(a(),w(f,{key:0,class:A([{open:r.isComment},"comments-main-container flex space-between"]),onAddComment:s.addComment,onCloseComment:s.closeComment},null,8,["class","onAddComment","onCloseComment"])):m("",!0)])],2)),[[H,s.closeComment]]),k(P,{task:s.task,user:s.miniUser,onUpdateItem:s.updateItem,onFindMembers:s.tagMembers,memberToAdd:r.memberToAdd},null,8,["task","user","onUpdateItem","onFindMembers","memberToAdd"])]),o("div",Fn,[o("div",null,[Rn,o("button",{onClick:e[15]||(e[15]=y=>s.setMembers("membersItem"))},$n),o("button",{onClick:e[16]||(e[16]=y=>s.setLabels("labelsItem"))},Zn),o("button",{onClick:e[17]||(e[17]=y=>s.setChecklist("checklistItem"))},Yn),o("button",{onClick:e[18]||(e[18]=y=>s.setDate("dateItem"))},zn),o("button",{onClick:e[19]||(e[19]=y=>s.setAttachments("attachmentItem"))},Wn),o("button",{onClick:e[20]||(e[20]=y=>s.setLocation("locationItem"))},ta),o("button",{onClick:e[21]||(e[21]=y=>s.setCover("coverItem"))},ia)]),ra,r.actionType?(a(),w(U,{key:0,task:s.task,onClosePopup:s.closePopup,popupData:r.popupData,onUpdateCover:s.updateCover,action:r.actionType,onAddItem:s.addItem,onSetItem:t.setItem,onUpdateLabels:s.updateLabels},null,8,["task","onClosePopup","popupData","onUpdateCover","action","onAddItem","onSetItem","onUpdateLabels"])):m("",!0)]),r.isFindMembers?(a(),w(Z,{key:0,board:s.board,class:"find-members",onAddTag:s.addTag},null,8,["board","onAddTag"])):m("",!0)])])}var aa=g(fn,[["render",na]]);const la={name:"group-edit-popup",props:{group:Object},data(){return{}},methods:{closePopup(){this.$emit("closePopup")},removeGroup(){this.$emit("removeGroup",this.group._id),this.$emit("closePopup")}}},da={class:"group-edit-popup"},ca=o("p",null,"List actions",-1);function ua(t,e,i,n,r,s){return a(),d("section",da,[o("header",null,[ca,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...l)=>s.closePopup&&s.closePopup(...l))})]),o("main",null,[o("p",{onClick:e[1]||(e[1]=(...l)=>s.removeGroup&&s.removeGroup(...l))},"Delete list...")])])}var ma=g(la,[["render",ua]]);const ha={name:"board-group",emits:["columnChange","addGroup","removeTask","addTask","taskChange","editTask","cleanStore","editGroup","removeGroup"],props:{groups:{type:Array,required:!0},board:Object},data(){return{scene:{groups:this.groups},isTaskDetail:!1,isLabelsOpen:!1,isQuickEdit:!1,isGroupEdit:[]}},components:{Container:Re,Draggable:ve,taskPreview:Ui,taskAdd:Pi,addGroup:qi,taskDetailsModal:aa,groupEditPopup:ma},watch:{groups(t,e){this.scene={groups:t}}},methods:{cleanStore(){this.$emit("cleanStore",["Task","Group"])},openTask(t,e,i){this.isQuickEdit||(this.isTaskDetail=!0,this.$store.commit({type:"setCurrGroup",group:e}),this.$store.commit({type:"setCurrTask",task:i}))},addGroup(t){this.$emit("addGroup",t)},editGroupTitle(t,e,i){const n=t.target.value;if(!n)return t.target.value=e.title;const r=JSON.parse(JSON.stringify(e));r.title=n,this.$emit("editGroup",{groupIdx:i,newGroup:r})},toggleGroupEdit(t,e=!1){(typeof t=="object"||e)&&this.isGroupEdit.forEach((i,n)=>this.isGroupEdit[n]=!1),this.isGroupEdit[t]=e},removeGroup(t){this.$emit("removeGroup",t)},removeTask(t,e){const i={taskId:t,groupId:e};this.$emit("removeTask",i)},addTask(t,e){const i={title:t,groupId:e,members:[]};this.$emit("addTask",i)},editTask(t){this.$emit("editTask",t)},closeModal(){this.isTaskDetail=!1},toggleLabels(){this.isLabelsOpen=!this.isLabelsOpen},applyDrag(t,e){const{removedIndex:i,addedIndex:n,payload:r}=e;if(i===null&&n===null)return t;const s=[...t];let l=r;return i!==null&&(l=s.splice(i,1)[0]),n!==null&&s.splice(n,0,l),s},onGroupDrop(t){const e=Object.assign({},this.scene);e.groups=this.applyDrag(e.groups,t),this.scene=e,this.$emit("columnChange",this.scene.groups)},onTaskDrop(t,e){if(e.removedIndex!==null||e.addedIndex!==null){const i=Object.assign({},this.scene),n=i.groups.filter(l=>l._id===t)[0],r=i.groups.indexOf(n),s=Object.assign({},n);s.tasks=this.applyDrag(s.tasks,e),this.$emit("taskChange",{groupIdx:r,newGroup:s})}},getCardPayload(t){return e=>this.scene.groups.filter(i=>i._id===t)[0].tasks[e]},onQuickEdit(t){this.isQuickEdit=t},updateTask(t){this.groups.filter(e=>(e.tasks.some(i=>i._id===t._id),e._id)),this.$emit("editTask",t)}}},pa={class:"group-container"},ga={class:"group-title"},ba=["value","onChange"],_a=["onClick"];function ka(t,e,i,n,r,s){const l=p("group-edit-popup"),c=p("task-preview"),u=p("Container"),h=p("task-add"),C=p("Draggable"),_=p("add-group"),B=p("task-details-modal"),S=L("click-outside");return a(),d(T,null,[k(u,{"group-name":"cols",tag:"div",orientation:"horizontal","drag-handle-selector":".group-title","non-drag-area-selector":".group-edit-popup","drag-class":"dragging","drop-class":"dropping","animation-duration":0,onDrop:e[0]||(e[0]=f=>s.onGroupDrop(f))},{default:j(()=>[(a(!0),d(T,null,M(r.scene.groups,(f,P)=>(a(),w(C,{class:"",key:f._id},{default:j(()=>[o("section",pa,[o("section",ga,[o("textarea",{value:f.title,onChange:U=>s.editGroupTitle(U,f,P),spellcheck:"false",class:"group-title inline-input"},null,40,ba),o("span",{class:"menu-icon",onClick:U=>s.toggleGroupEdit(P,!0)},null,8,_a),r.isGroupEdit[P]?b((a(),w(l,{key:0,class:"popup",onClosePopup:U=>s.toggleGroupEdit(P),onRemoveGroup:s.removeGroup,group:f},null,8,["onClosePopup","onRemoveGroup","group"])),[[S,s.toggleGroupEdit]]):m("",!0)]),k(u,{orientation:"vertical","group-name":"col-items","non-drag-area-selector":".on-quick-edit","get-child-payload":s.getCardPayload(f._id),"drop-placeholder":{className:"drag-placeholder-task"},"drag-class":"dragging","drop-class":"dropping","animation-duration":0,onDrop:U=>s.onTaskDrop(f._id,U)},{default:j(()=>[(a(!0),d(T,null,M(f.tasks,U=>(a(),w(c,{onUpdateTask:s.updateTask,onOpenTask:Z=>s.openTask(i.board,f,U),onOnQuickEdit:s.onQuickEdit,onRemoveTask:Z=>s.removeTask(Z,f._id),onClick:F(Z=>s.openTask(i.board,f,U),["stop"]),onToggleLabels:s.toggleLabels,key:U._id,task:U,labelStatus:r.isLabelsOpen},null,8,["onUpdateTask","onOpenTask","onOnQuickEdit","onRemoveTask","onClick","onToggleLabels","task","labelStatus"]))),128))]),_:2},1032,["get-child-payload","onDrop"]),k(h,{onAddTask:U=>s.addTask(U,f._id)},null,8,["onAddTask"])])]),_:2},1024))),128)),k(_,{onAdd:s.addGroup},null,8,["onAdd"])]),_:1}),o("div",{class:A(["overlay",{"open-overlay":r.isTaskDetail}])},[r.isTaskDetail?b((a(),w(B,{key:0,onCleanStore:s.cleanStore,onCloseModal:s.closeModal,onEditTask:s.editTask},null,8,["onCleanStore","onCloseModal","onEditTask"])),[[S,s.closeModal]]):m("",!0)],2)],64)}var fa=g(ha,[["render",ka]]);const va={name:"board-header-title",props:{board:Object,createdBy:String},data(){return{titleToEdit:""}},created(){this.titleToEdit=this.boardTitle},watch:{"$route.params.boardId":{async handler(t,e){this.titleToEdit=this.$store.getters.currBoard.title},deep:!0,immediate:!0}},methods:{editTitle(){if(!this.titleToEdit)return this.titleToEdit=this.boardTitle;!this.isEditAble||this.$emit("editTitle",this.titleToEdit)}},computed:{userId(){var t;return(t=this.$store.getters.miniUser)==null?void 0:t._id},isEditAble(){return this.createdBy===this.userId},inputSize(){const i=this.titleToEdit.length-2;return i<1?1:i>60?60:i},boardTitle(){var t;return(t=this.board)==null?void 0:t.title}}},ya={class:"board-header-title"},Aa=["size","disabled"];function Ca(t,e,i,n,r,s){return a(),d("section",ya,[b(o("input",{type:"text",size:s.inputSize,"onUpdate:modelValue":e[0]||(e[0]=l=>r.titleToEdit=l),class:A(["inline-input",{editable:s.isEditAble}]),disabled:!s.isEditAble,onBlur:e[1]||(e[1]=(...l)=>s.editTitle&&s.editTitle(...l))},null,42,Aa),[[E,r.titleToEdit]])])}var Ta=g(va,[["render",Ca]]);const Ia={name:"board-header-favorite",props:{favorite:Boolean},data(){return{isFavorite:this.favorite,isHovered:!1}},watch:{"$route.params.boardId":{handler(t,e){const i=this.$store.getters.user;this.isFavorite=i==null?void 0:i.favorites.some(n=>n===this.$route.params.boardId)},deep:!0,immediate:!0}},methods:{toggleFavorite(){this.isFavorite=!this.isFavorite,this.$emit("toggleFavorite",this.isFavorite)}},computed:{favoriteIcon(){return this.isFavorite?"fa-solid fa-star":"fa-regular fa-star"}}};function Ba(t,e,i,n,r,s){return a(),d("section",{class:"board-header-favorite",onClick:e[0]||(e[0]=(...l)=>s.toggleFavorite&&s.toggleFavorite(...l))},[o("i",{class:A(s.favoriteIcon)},null,2)])}var wa=g(Ia,[["render",Ba]]);const Ma={name:"members-preview",props:{board:Object},components:{}},Ea={class:"members-preview"},Sa={key:0,class:"admin-badge",src:"https://a.trellocdn.com/prgb/dist/images/chevron.88a4454280d68a816b89.png"};function xa(t,e,i,n,r,s){const l=p("avatar");return a(),d("section",Ea,[(a(!0),d(T,null,M(i.board.members,c=>(a(),d("div",{class:"avatar-container",key:c._id},[k(l,{size:28,color:"white",name:c.fullname},null,8,["name"]),i.board.createdBy._id===c._id?(a(),d("img",Sa)):m("",!0)]))),128))])}var La=g(Ma,[["render",xa]]);const Ua={name:"invite-members",props:{board:Object},data(){return{appUsers:null,filterBy:{name:""}}},created(){this.appUsers=this.users},methods:{closeModal(){this.$emit("closeInviteModal")},addMember({fullname:t,_id:e,imgUrl:i}){const n={fullname:t,_id:e,imgUrl:i};let r=JSON.parse(JSON.stringify(this.board));r.members.push(n),this.$emit("addMember",r.members)}},computed:{users(){return this.$store.getters.getAllUsers},getRelevantUsers(){let t=JSON.parse(JSON.stringify(this.appUsers));const e=new RegExp(this.filterBy.name,"i");return t=t.filter(i=>e.test(i.fullname)),t.filter(i=>!this.board.members.some(n=>i._id===n._id))}}},Da={class:"invite-members-modal"},Oa=o("p",null,"Invite to board",-1),Fa=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),Ra=[Fa],Na=o("h4",null,"Add Member",-1),Ga=["onClick"];function $a(t,e,i,n,r,s){const l=p("avatar");return a(),d("section",Da,[o("header",null,[Oa,o("span",{onClick:e[0]||(e[0]=(...c)=>s.closeModal&&s.closeModal(...c))},Ra)]),o("main",null,[b(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>r.filterBy.name=c),placeholder:"Member name"},null,512),[[E,r.filterBy.name]]),Na,o("ul",null,[(a(!0),d(T,null,M(s.getRelevantUsers,(c,u)=>(a(),d("li",{key:u,onClick:h=>s.addMember(c)},[k(l,{size:"32",name:c.fullname},null,8,["name"]),o("p",null,v(c.fullname),1)],8,Ga))),128))])])])}var Pa=g(Ua,[["render",$a]]);const Ja={methods:{setCmp(t){this.$emit("changeCmp",t)},async onUploadImg(t){this.isLoading=!0;const e=await ie(t.target.files[0]);this.$emit("save",e.url),this.$emit("setBg",{type:"bgImg",val:e.url}),this.isLoading=!1}}},Za={class:"change-bg-menu"},ja=o("span",null,"Images",-1),Qa=o("span",null,"Colors",-1),Ya={class:"custom-bg"},Ha=o("h2",null,"Custom",-1),Va=o("label",{for:"imgInput"},[o("div",{class:"add-bg"},[o("span",{class:"icon-plus"})])],-1);function za(t,e,i,n,r,s){return a(),d("section",Za,[o("section",null,[o("div",null,[o("div",{class:"img",onClick:e[0]||(e[0]=l=>s.setCmp("bgPhotos"))}),ja]),o("div",null,[o("div",{class:"color",onClick:e[1]||(e[1]=l=>s.setCmp("colorPicker"))}),Qa])]),o("div",Ya,[Ha,Va,o("input",{hidden:"",type:"file",name:"img-input",id:"imgInput",onChange:e[2]||(e[2]=(...l)=>s.onUploadImg&&s.onUploadImg(...l))},null,32)])])}var qa=g(Ja,[["render",za]]);const Xa={data(){return{randPics:null,keyword:""}},async created(){this.randPics=await Y.getRandomImages(20)},methods:{async setPics(){this.randPics=await Y.getImages(this.keyword,20)},setBgImg(t){this.$emit("setBg",{type:"bgImg",val:t})}}},Wa={class:"background-photos"},Ka={key:0,class:"photos"},el=["onClick"],tl=["src"];function sl(t,e,i,n,r,s){const l=L("focus");return a(),d("section",Wa,[b(o("input",{type:"text",class:"popup-inp","onUpdate:modelValue":e[0]||(e[0]=c=>r.keyword=c),placeholder:"Search photos",onChange:e[1]||(e[1]=(...c)=>s.setPics&&s.setPics(...c))},null,544),[[l],[E,r.keyword]]),r.randPics?(a(),d("div",Ka,[(a(!0),d(T,null,M(r.randPics,c=>(a(),d("div",{key:c._id,onClick:u=>s.setBgImg(c.full)},[o("img",{src:c.thumb,alt:""},null,8,tl)],8,el))),128))])):m("",!0)])}var ol=g(Xa,[["render",sl]]);const il={props:{isOpen:Boolean,board:Object},data(){return{currSection:"Menu",boardUsers:null}},created(){this.board.activities},unmounted(){this.currSection="Menu"},methods:{closeMenu(){this.$emit("closeMenu"),this.currSection="Menu"},changeCmp(t){this.currSection=t},setBg(t,e="bgImg"){e==="bgColor"?this.$emit("setBg",{type:e,val:t}):this.$emit("setBg",t)},goBack(){this.currSection==="changeBg"&&(this.currSection="Menu"),this.currSection==="bgPhotos"&&(this.currSection="changeBg"),this.currSection==="colorPicker"&&(this.currSection="changeBg")},setBgColor(t){this.$emit("setBgColor")},getMember(t){return this.users.find(i=>i._id===t)}},computed:{boardBgStyle(){return{"background-color":this.board.style.bgColor,"background-image":"url("+this.board.style.bgImg+")"}},users(){return this.$store.getters.getAllUsers}},components:{changeBg:qa,bgPhotos:ol,colorPicker:W}},rl={key:1},nl={key:2},al={key:3},ll={key:4},dl={key:0},cl={class:"about-board"},ul=o("div",null,[o("span",{class:"icon-trello"}),o("p",null,"About this board")],-1),ml=o("p",null,"Change background",-1),hl={key:4,class:"activities"},pl=o("div",{class:"logo"},[o("span",{class:"icon-activity"}),o("p",null,"Activity")],-1),gl={class:"activity-content"},bl={class:"member-name"};function _l(t,e,i,n,r,s){const l=p("change-bg"),c=p("bg-photos"),u=p("color-picker"),h=p("avatar"),C=p("timeago"),_=L("click-outside");return i.isOpen?b((a(),d("div",{key:0,class:A(["board-menu-modal",{open:i.isOpen}])},[o("header",null,[r.currSection!=="Menu"?(a(),d("span",{key:0,class:"icon-back",onClick:e[0]||(e[0]=(...B)=>s.goBack&&s.goBack(...B))})):m("",!0),r.currSection==="Menu"?(a(),d("h3",rl,"Menu")):m("",!0),r.currSection==="changeBg"?(a(),d("h3",nl,"Change background")):m("",!0),r.currSection==="bgPhotos"?(a(),d("h3",al,"Photos by Unsplash")):m("",!0),r.currSection==="colorPicker"?(a(),d("h3",ll,"Colors")):m("",!0),o("span",{class:"icon-cancel",onClick:e[1]||(e[1]=(...B)=>s.closeMenu&&s.closeMenu(...B))})]),r.currSection==="Menu"?(a(),d("main",dl,[o("section",cl,[ul,o("div",{onClick:e[2]||(e[2]=B=>r.currSection="changeBg")},[o("span",{style:x(s.boardBgStyle),class:"bg-icon"},null,4),ml])])])):m("",!0),r.currSection==="changeBg"?(a(),w(l,{key:1,onSetBg:s.setBg,onChangeCmp:s.changeCmp},null,8,["onSetBg","onChangeCmp"])):m("",!0),r.currSection==="bgPhotos"?(a(),w(c,{key:2,onSetBg:s.setBg},null,8,["onSetBg"])):m("",!0),r.currSection==="colorPicker"?(a(),w(u,{key:3,class:"wide",onUpdateColor:s.setBg},null,8,["onUpdateColor"])):m("",!0),r.currSection==="Menu"?(a(),d("section",hl,[pl,o("ul",null,[(a(!0),d(T,null,M(i.board.activities,B=>(a(),d("li",{class:"activity",key:B._id},[o("div",null,[k(h,{size:"32",name:s.getMember(B.byMemberId).fullname},null,8,["name"])]),o("div",gl,[o("span",bl,v(s.getMember(B.byMemberId).fullname),1),o("span",null,v(B.txt),1),o("div",null,[k(C,{class:"time",datetime:B.createdAt},null,8,["datetime"])])])]))),128))])])):m("",!0)],2)),[[_,s.closeMenu]]):m("",!0)}var kl=g(il,[["render",_l]]);const fl={name:"notify-user",data(){return{}},async created(){},methods:{async toggleReaden(t){await this.$store.dispatch({type:"toggleActivity",activityId:t})}},computed:{activities(){var t,e;return console.log("user",this.$store.getters.user),console.log("activities",(t=this.$store.getters.user)==null?void 0:t.activities),(e=this.$store.getters.user)==null?void 0:e.activities},isReaden(){var t;return(t=this.$store.getters.user)==null?void 0:t.activities.some(e=>!e.isReaden)}}},vl={class:"board-filter"},yl=o("span",null,"Dvir Avraham",-1),Al=["onClick"];function Cl(t,e,i,n,r,s){const l=p("avatar");return a(),d("section",vl,[s.activities?(a(),d("ul",{key:0,class:A({"red-bg":s.isReaden})},[(a(!0),d(T,null,M(s.activities,(c,u)=>(a(),d("li",{key:u},[k(l,{size:"24",name:"D A"}),yl,o("div",null,v(c.txt),1),o("div",null,v(c.createdAt),1),o("button",{onClick:h=>s.toggleReaden(c._id),class:A({"green-bg":!c.isReaden})},"check readen",10,Al)]))),128))],2)):m("",!0)])}var Tl=g(fl,[["render",Cl]]);const Il={name:"close-filter",props:{board:Object,filter:Object},data(){return{dueDateOptions:[{_id:"1",txt:"No dates",classList:"icon-date",val:"no-dates"},{_id:"2",txt:"Overdue",classList:"icon-time red-bg",val:"overdue"},{_id:"3",txt:"Due in the next day",classList:"icon-time wait-bg",val:"next-day"}],filterBy:{title:"",labels:[],members:[],dueDate:[]}}},created(){this.filterBy=this.filter},methods:{closeFilter(){this.$emit("closeFilter")},setFilter(){console.log(this.filter),this.$emit("setFilter",be({},this.filterBy))}},components:{userNotification:Tl}},Bl={class:"board-filter"},wl=o("h3",null,"Filter",-1),Ml={class:"search-inp"},El=o("h4",null,"Keyword",-1),Sl=o("p",null,"Search cards, members, labels, and more.",-1),xl={class:"members"},Ll=o("h4",null,"Members",-1),Ul=["value","id"],Dl={class:"dates"},Ol=o("h4",null,"Due date",-1),Fl=["value"],Rl={class:"labels"},Nl=o("h4",null,"Labels",-1),Gl=o("span",{class:"icon-label"},null,-1),$l=o("p",null,"No labels",-1),Pl=["value","id"];function Jl(t,e,i,n,r,s){const l=p("user-notification"),c=p("avatar"),u=L("focus");return a(),d("section",Bl,[k(l),o("header",null,[t.currSection!=="Menu"?(a(),d("span",{key:0,class:"icon-back",onClick:e[0]||(e[0]=(...h)=>t.goBack&&t.goBack(...h))})):m("",!0),wl,o("span",{class:"icon-cancel",onClick:e[1]||(e[1]=(...h)=>s.closeFilter&&s.closeFilter(...h))})]),o("div",Ml,[El,b(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=h=>r.filterBy.title=h),placeholder:"Enter a keyword...",onInput:e[3]||(e[3]=(...h)=>s.setFilter&&s.setFilter(...h))},null,544),[[u],[E,r.filterBy.title]]),Sl]),o("div",xl,[Ll,o("ul",null,[(a(!0),d(T,null,M(i.board.members,(h,C)=>(a(),d("li",{key:h._id},[b(o("input",{value:h._id,"onUpdate:modelValue":e[4]||(e[4]=_=>r.filterBy.members=_),onChange:e[5]||(e[5]=(..._)=>s.setFilter&&s.setFilter(..._)),type:"checkbox",id:h._id},null,40,Ul),[[Q,r.filterBy.members]]),k(c,{size:"24",name:h.fullname},null,8,["name"]),o("p",null,v(h.fullname),1)]))),128))])]),o("div",Dl,[Ol,o("ul",null,[(a(!0),d(T,null,M(r.dueDateOptions,h=>(a(),d("li",{key:h._id},[o("label",null,[b(o("input",{onChange:e[6]||(e[6]=(...C)=>s.setFilter&&s.setFilter(...C)),"onUpdate:modelValue":e[7]||(e[7]=C=>r.filterBy.dueDate=C),type:"checkbox",value:h.val},null,40,Fl),[[Q,r.filterBy.dueDate]]),o("span",{class:A(h.classList)},null,2),o("p",null,v(h.txt),1)])]))),128))])]),o("div",Rl,[Nl,o("ul",null,[o("li",null,[o("label",null,[b(o("input",{onChange:e[8]||(e[8]=(...h)=>s.setFilter&&s.setFilter(...h)),type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=h=>r.filterBy.labels=h),value:"none"},null,544),[[Q,r.filterBy.labels]]),Gl,$l])]),(a(!0),d(T,null,M(i.board.labels,h=>(a(),d("li",null,[o("label",null,[b(o("input",{value:h._id,"onUpdate:modelValue":e[10]||(e[10]=C=>r.filterBy.labels=C),onChange:e[11]||(e[11]=(...C)=>s.setFilter&&s.setFilter(...C)),type:"checkbox",id:h._id},null,40,Pl),[[Q,r.filterBy.labels]]),o("div",{class:"label",style:x({"background-color":h.color})},[o("p",null,v(h.title),1)],4)])]))),256))])])])}var ke=g(Il,[["render",Jl]]);const Zl={name:"board-header",emits:["editTitle","toggleFavorite"],props:{board:Object,filterBy:Object},data(){return{isInviteModal:!1,isMenuModal:!1,isFilterModal:!1}},components:{boardHeaderTitle:Ta,boardHeaderFavorite:wa,membersPreview:La,inviteMembers:Pa,boardMenuModal:kl,boardFilter:ke,BoardFilter:ke},methods:{editTitle(t){this.$emit("editTitle",t)},toggleFavorite(t){this.$emit("toggleFavorite",t)},closeModal(){this.isInviteModal=!1},closeFilterModal(){this.isFilterModal=!1},toggleBoardMenu(){this.isMenuModal=!this.isMenuModal},addMember(t){this.$emit("addMember",t)},setBg(t){this.$emit("setBg",t)},setFilter(t){this.$emit("setFilter",t)}},computed:{boardTitle(){var t;return(t=this.$store.getters.currBoard)==null?void 0:t.title},boardFavoriteStatus(){const t=JSON.parse(JSON.stringify(this.user));return t!=null&&t.favorites||(t.favorites=[]),t==null?void 0:t.favorites.includes(this.board._id)},boardCreatorId(){var t,e;return(e=(t=this.$store.getters.currBoard)==null?void 0:t.createdBy)==null?void 0:e._id},user(){return this.$store.getters.user}}},jl={class:"board-header flex space-between"},Ql={class:"menu-left-header"},Yl=o("button",{class:"btn"},[o("span",{class:"board-header-board-icon"}),I(" Board "),o("span",{class:"board-header-open-icon"})],-1),Hl={class:"invite-members-container"},Vl=o("span",{class:"board-header-invite-icon"},null,-1),zl=I(" Invite "),ql=[Vl,zl],Xl={class:"right-btns"},Wl=o("span",{class:"board-header-filter-icon"},null,-1),Kl=I("Filter "),ed=[Wl,Kl],td=o("span",{class:"board-header-menu-icon"},null,-1),sd=I("Show menu "),od=[td,sd];function id(t,e,i,n,r,s){const l=p("board-header-title"),c=p("board-header-favorite"),u=p("members-preview"),h=p("invite-members"),C=p("board-filter"),_=p("board-menu-modal"),B=L("click-outside");return a(),d("header",jl,[o("section",Ql,[Yl,k(l,{style:{color:"black"},onEditTitle:s.editTitle,board:i.board,createdBy:s.boardCreatorId},null,8,["onEditTitle","board","createdBy"]),k(c,{class:"board-header-invite btn",onToggleFavorite:s.toggleFavorite,favorite:s.boardFavoriteStatus},null,8,["onToggleFavorite","favorite"]),k(u,{board:i.board},null,8,["board"]),o("div",Hl,[o("button",{class:"btn",onClick:e[0]||(e[0]=S=>r.isInviteModal=!r.isInviteModal)},ql),r.isInviteModal?b((a(),w(h,{key:0,board:i.board,onCloseInviteModal:s.closeModal,onAddMember:s.addMember},null,8,["board","onCloseInviteModal","onAddMember"])),[[B,s.closeModal]]):m("",!0)])]),o("section",Xl,[o("button",{class:"btn",onClick:e[1]||(e[1]=S=>r.isFilterModal=!r.isFilterModal)},ed),o("button",{class:"btn show-menu",onClick:e[2]||(e[2]=(...S)=>s.toggleBoardMenu&&s.toggleBoardMenu(...S))},od),r.isFilterModal?b((a(),w(C,{key:0,onSetFilter:s.setFilter,onCloseFilter:s.closeFilterModal,board:i.board,filter:i.filterBy},null,8,["onSetFilter","onCloseFilter","board","filter"])),[[B,s.closeFilterModal]]):m("",!0),k(_,{onSetBg:s.setBg,board:i.board,isOpen:r.isMenuModal,onCloseMenu:e[3]||(e[3]=S=>r.isMenuModal=!1)},null,8,["onSetBg","board","isOpen"])])])}var rd=g(Zl,[["render",id]]);const nd={name:"board-details",components:{boardGroup:fa,boardHeader:rd},data(){return{filterBy:{title:"",labels:[],members:[],dueDate:[]}}},watch:{"$route.params.boardId":{immediate:!0,async handler(t,e){await this.$store.dispatch({type:"setCurrentBoard",boardId:t})},deep:!0}},async created(){await this.loadBoard(),(!this.boards||!this.boards.length)&&await this.$store.dispatch({type:"loadBoards"})},unmounted(){this.$store.commit({type:"setCurrentBoard",board:null})},methods:{async loadBoard(){try{const t=this.$route.params.boardId;await this.$store.dispatch({type:"setCurrentBoard",boardId:t}),this.$store.commit({type:"addRecentBoard",boardId:t}),this.board=null,await Ne()}catch(t){console.log("err",t)}},removeTask(t){this.$store.dispatch({type:"removeTask",task:t})},setTask({title:t,groupId:e}){var i={title:t};this.$store.dispatch({type:"setTask",groupId:e,task:i})},editTask(t){this.$store.dispatch({type:"setTask",task:t})},quickUpdateTask(){this.$store.dispatch({type:"setTask",task:editedTask})},addGroup(t){this.$store.dispatch({type:"addGroup",groupTitle:t})},editGroup({groupIdx:t,newGroup:e}){this.$store.dispatch({type:"setGroup",groupIdx:t,newGroup:e})},removeGroup(t){this.$store.dispatch({type:"removeGroup",groupId:t})},columnChange(t){this.$store.dispatch({type:"setGroups",groups:t})},taskChange({groupIdx:t,newGroup:e}){this.$store.dispatch({type:"setGroup",groupIdx:t,newGroup:e})},editBoardTitle(t){this.$store.dispatch({type:"setBoardPrefs",key:"title",val:t})},async toggleFavorite(t){const e=JSON.parse(JSON.stringify(this.user));e.favorites||(e.favorites=[]);const i=e.favorites.findIndex(n=>n===this.currBoard._id);t?e.favorites.push(this.currBoard._id):e.favorites.splice(i,1),await this.$store.dispatch({type:"updateUser",user:e})},cleanStore(t){t.forEach(e=>{const i={type:`setCurr${e}`};i[e.toLowerCase()]=null,this.$store.commit(i)})},async addMember(t){await this.$store.dispatch({type:"setBoardPrefs",key:"members",val:t})},async setBg(t){const e=JSON.parse(JSON.stringify(this.currBoard));e.style[t.type]=t.val,t.type==="bgColor"&&(e.style.bgImg=""),await this.$store.dispatch({type:"saveBoard",board:e}),await this.$store.dispatch({type:"setCurrentBoard",boardId:e._id})},setFilter(t){const e=JSON.parse(JSON.stringify(t));this.filterBy=e}},computed:{user(){return this.$store.getters.user},miniUser(){return this.$store.getters.miniUser},groups(){return this.$store.getters.boardGroups},currBoard(){return this.$store.getters.currBoard},boards(){return this.$store.getters.boards},groupsToDisplay(){let t=[];const e=JSON.parse(JSON.stringify(this.currBoard)),i=new RegExp(this.filterBy.title,"i");return t=e.groups.filter(n=>i.test(n.title)||n.tasks.some(r=>i.test(r.title))),this.filterBy.members.length&&(t=t.filter(n=>n.tasks.some(r=>{var s;return(s=r.members)==null?void 0:s.some(l=>this.filterBy.members.includes(l._id))})),t=t.map(n=>(n.tasks=n.tasks.filter(r=>{var s;return r.members||(r.members=[]),(s=r.members)==null?void 0:s.some(l=>this.filterBy.members.includes(l._id))}),n))),this.filterBy.labels.length&&(t=t.filter(n=>n.tasks.some(r=>{var s;return(s=r.labelIds)==null?void 0:s.some(l=>this.filterBy.labels.includes(l))})),t=t.map(n=>(n.tasks=n.tasks.filter(r=>{var s;return this.filterBy.labels.includes("none"),(s=r.labelIds)==null?void 0:s.some(l=>{if(l!=="none")return this.filterBy.labels.includes(l)})}),n))),this.filterBy.dueDate&&this.filterBy.dueDate==="overdue"&&(t=t.filter(n=>n.tasks.some(r=>r.status==="overdue"))),t}}},ad={key:0,class:"board-container"},ld={class:"group-container-scrollable"};function dd(t,e,i,n,r,s){const l=p("board-header"),c=p("board-group");return s.currBoard?(a(),d("section",ad,[k(l,{onSetBg:s.setBg,board:s.currBoard,onEditTitle:s.editBoardTitle,onAddMember:s.addMember,onToggleFavorite:s.toggleFavorite,onSetFilter:s.setFilter,filterBy:r.filterBy},null,8,["onSetBg","board","onEditTitle","onAddMember","onToggleFavorite","onSetFilter","filterBy"]),o("section",ld,[k(c,{onRemoveTask:s.removeTask,onAddTask:s.setTask,onEditTask:s.editTask,onTaskChange:s.taskChange,onColumnChange:s.columnChange,onAddGroup:s.addGroup,onEditGroup:s.editGroup,onRemoveGroup:s.removeGroup,onCleanStore:s.cleanStore,groups:s.groupsToDisplay,board:s.currBoard},null,8,["onRemoveTask","onAddTask","onEditTask","onTaskChange","onColumnChange","onAddGroup","onEditGroup","onRemoveGroup","onCleanStore","groups","board"])])])):m("",!0)}var cd=g(nd,[["render",dd]]);const ud={data(){return{board:"",task:null}},created(){var t=this.groups.find(e=>e._id===this.$route.params.groupId);this.task=t.tasks.find(e=>e._id===this.$route.params.taskId)},computed:{groups(){return this.$store.getters.boardGroups}}};function md(t,e,i,n,r,s){return a(),d("h1",null,v(r.task.title),1)}var hd=g(ud,[["render",md]]);const pd={name:"login-signup",data(){return{user:{fullname:"",username:"",password:""},isLogin:!0}},created(){this.isLogin=this.$route.path==="/login"},methods:{async onLoginSignup(){try{const t=this.isLogin?"login":"signup";await this.$store.dispatch({type:t,cred:this.user}),this.$router.push("/board")}catch(t){console.log(t)}},async handleGoogleLogin(){try{const t=await this.$gAuth.signIn();if(!t)return;const e=t.getBasicProfile().getId(),i=t.getBasicProfile().getEmail(),n=t.getBasicProfile().getName(),r=t.getBasicProfile().getImageUrl(),s={username:i,fullname:n,password:e,imgUrl:r};try{await this.$store.dispatch({type:"login",cred:s})}catch{await this.$store.dispatch({type:"signup",cred:s})}this.$router.push("/board")}catch(t){console.log(t)}},toggleLoginSignup(){this.isLogin=!this.isLogin}},computed:{loginSignupBtnTxt(){return this.isLogin?"Login":"Signup"},loginSignupLinkTxt(){return this.isLogin?"Sign up for an account":"Already have an account? Log in"}}},gd={class:"login-wrapper"},bd={class:"main-container"},_d=o("header",null,[o("span",{class:"icon-trello"}),o("h1",null,"Drello")],-1),kd={class:"login-container"},fd=o("h2",null,"Log in to Drello",-1),vd=o("div",{class:"login-option-sep"},"Or",-1),yd=o("span",{class:"google-icon"},null,-1),Ad=o("span",{class:"btn-txt"},"Continue with Google",-1),Cd=[yd,Ad],Td=o("hr",null,null,-1);function Id(t,e,i,n,r,s){return a(),d("section",gd,[o("section",bd,[_d,o("main",kd,[fd,o("form",{onSubmit:e[5]||(e[5]=F(()=>{},["prevent"]))},[b(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>r.user.username=l),placeholder:"Enter Username"},null,512),[[E,r.user.username]]),r.isLogin?m("",!0):b((a(),d("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=l=>r.user.fullname=l),type:"text",placeholder:"Enter Full Name"},null,512)),[[E,r.user.fullname]]),b(o("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=l=>r.user.password=l),placeholder:"Enter password"},null,512),[[E,r.user.password]]),o("button",{class:"login-btn",onClick:e[3]||(e[3]=(...l)=>s.onLoginSignup&&s.onLoginSignup(...l))},v(s.loginSignupBtnTxt),1),vd,o("button",{class:"login-with-google",onClick:e[4]||(e[4]=(...l)=>s.handleGoogleLogin&&s.handleGoogleLogin(...l))},Cd)],32),Td,o("p",{onClick:e[6]||(e[6]=(...l)=>s.toggleLoginSignup&&s.toggleLoginSignup(...l)),class:"change-form-link"},v(s.loginSignupLinkTxt),1)])])])}var Bd=g(pd,[["render",Id]]);const Be=Ge({history:$e(),routes:[{path:"/",name:"home",component:It},{path:"/board",name:"board",component:zt},{path:"/board/:boardId",name:"board-details",component:cd},{path:"/board/:boardId/:groupId/:taskId",name:"task-details",component:hd},{path:"/login",name:"login-signup",component:Bd,alias:"/signup"}]}),wd="/api/";var Md=z.create({withCredentials:!0});const N={get(t,e){return X(t,"GET",e)},post(t,e){return X(t,"POST",e)},put(t,e){return X(t,"PUT",e)},delete(t,e){return X(t,"DELETE",e)}};async function X(t,e="GET",i=null){try{return(await Md({url:`${wd}${t}`,method:e,data:i,params:e==="GET"?i:null})).data}catch(n){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,i),console.dir(n),n.response&&(n.response.status===401||n.response.status===500)&&Be.push("/login"),n}}const G={getBoards:Ed,removeBoard:xd,saveBoard:Ld,getBoardById:Sd,getEmptyBoard:Od,getEmptyGroup:Ud,addActivity:Dd};function Ed(t){return N.get("board")}function Sd(t){if(t)return N.get(`board/${t}`)}function xd(t){return N.delete(`board/${t}`)}function Ld(t){return t._id?N.put(`board/${t._id}`,t):N.post("board",t)}function Ud(t="",e=[]){return{_id:$.makeId(),title:t,tasks:e}}function Dd(t,e,i,n,r){return{_id:$.makeId(),byMemberId:e,txt:t,taskId:i,groupId:n,boardId:r,createdAt:Date.now(),isReaden:!1}}function Od(){return Promise.resolve({title:"",isFavorite:!1,createdBy:"",style:{bgColor:"#cacabb"},labels:[{color:"rgb(0, 121, 191)",title:"Day",_id:"l102"},{color:"rgb(210, 144, 52)",title:"Remarket",_id:"l103"},{color:"rgb(81, 152, 57)",title:"Demand Marketing",_id:"enT4D7oh"},{color:"rgb(176, 70, 50)",title:"Partners",_id:"rtbnYyfi"},{color:"rgb(137, 96, 158)",title:"Government",_id:"5leaLS2n"},{color:"rgb(205, 90, 145)",title:"Planning",_id:"NuwdhQ9L"}],members:[],groups:[{_id:$.makeId(),title:"New List",tasks:[]}],activities:[]})}var Fd="/assets/board-preview-skeleton.14cda5dc635d1f13bc48.76c3902e.svg";const Rd={name:"create-board",data(){return{boardToAdd:null,randPics:null,bgImg:"",bgCurrColor:"#cacabb"}},async created(){this.boardToAdd=await G.getEmptyBoard(),this.randPics=await Y.getImages("mountains",4)},methods:{async addBoard(){const t=this.boardToAdd,e=await this.$store.dispatch({type:"saveBoard",board:t});this.$store.commit({type:"setCurrentBoard",board:e}),this.closeModal(),this.$router.push(`/board/${e._id}`)},closeModal(){this.$emit("closeCreateModal")},updateBgColor(t){this.bgCurrColor=t,this.boardToAdd.style.bgColor=t,this.bgImg="",this.boardToAdd.style.bgImg=""},updateBgImg(t,e){this.boardToAdd.style.bgImg=t,this.bgImg=e}},computed:{bgStyle(){var t;return{"background-color":this.boardToAdd.style.bgColor,"background-image":"url("+((t=this.boardToAdd.style)==null?void 0:t.bgImg)+")"}}},components:{colorPicker:W}},Nd={key:0,class:"create-board-modal"},Gd=o("p",null,"Create Board",-1),$d=o("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),Pd=[$d],Jd=o("img",{src:Fd,alt:"",role:"presentation"},null,-1),Zd=[Jd],jd={class:"background-picker-container"},Qd=o("p",null,"Background",-1),Yd={class:"cover-mini-photos"},Hd=["onClick"],Vd=["src"],zd={key:0,class:"icon-check"},qd=I(" Board title "),Xd=o("span",{class:"red-text"},"*",-1),Wd=["disabled"];function Kd(t,e,i,n,r,s){const l=p("color-picker"),c=L("click-outside");return r.boardToAdd?b((a(),d("section",Nd,[o("header",null,[Gd,o("span",{onClick:e[0]||(e[0]=(...u)=>s.closeModal&&s.closeModal(...u))},Pd)]),o("div",{class:"create-board-preview",style:x(s.bgStyle)},Zd,4),o("div",jd,[Qd,o("div",Yd,[(a(!0),d(T,null,M(r.randPics,u=>(a(),d("div",{key:u._id,onClick:h=>s.updateBgImg(u.full,u._id)},[o("img",{src:u.thumb,class:A({"low-opacity ":r.bgImg===u._id})},null,10,Vd),r.bgImg===u._id?(a(),d("span",zd)):m("",!0)],8,Hd))),128))]),k(l,{bgImg:r.bgImg,onUpdateColor:s.updateBgColor},null,8,["bgImg","onUpdateColor"])]),o("div",null,[o("label",null,[qd,Xd,b(o("input",{type:"text",class:"board-title-inp","onUpdate:modelValue":e[1]||(e[1]=u=>r.boardToAdd.title=u)},null,512),[[E,r.boardToAdd.title]])])]),o("button",{disabled:!r.boardToAdd.title,class:"create-board-btn",onClick:e[2]||(e[2]=(...u)=>s.addBoard&&s.addBoard(...u))},"Create",8,Wd)])),[[c,s.closeModal]]):m("",!0)}var ec=g(Rd,[["render",Kd]]);const tc={name:"user-modal",props:{user:Object},methods:{closeModal(){this.$emit("closeModal")},async logout(){await this.$store.dispatch({type:"logout"}),this.$router.push("/login"),this.closeModal()}}},sc={class:"user-modal"},oc=o("h4",null,"Account",-1),ic=o("p",null,"Logout",-1),rc=[ic];function nc(t,e,i,n,r,s){const l=p("avatar");return a(),d("section",sc,[o("header",null,[oc,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...c)=>s.closeModal&&s.closeModal(...c))})]),o("article",null,[k(l,{size:"40",name:i.user.fullname},null,8,["name"]),o("div",null,[o("p",null,v(i.user.fullname),1),o("span",null,v(i.user.username),1)])]),o("div",{class:"logout",onClick:e[1]||(e[1]=(...c)=>s.logout&&s.logout(...c))},rc)])}var ac=g(tc,[["render",nc]]);const lc={name:"board-serach",props:{filterBy:Object},data(){return{search:""}},created(){},methods:{goToBoard(t){this.$router.push(`/board/${t}`)}},computed:{boards(){return this.$store.getters.boards},boardToDisplay(){let t=JSON.parse(JSON.stringify(this.boards)),e;return this.search?e=new RegExp(this.search,"i"):e=new RegExp(this.filterBy.title,"i"),t=t.filter(i=>e.test(i.title)),t}}},dc={class:"board-search"},cc=o("header",null,[o("h4",null,"Available Boards")],-1),uc={class:"boards-list"},mc=["onClick"];function hc(t,e,i,n,r,s){return a(),d("section",dc,[cc,b(o("input",{type:"text",class:"board-search-inp","onUpdate:modelValue":e[0]||(e[0]=l=>r.search=l)},null,512),[[E,r.search]]),o("div",uc,[o("ul",null,[(a(!0),d(T,null,M(s.boardToDisplay,l=>(a(),d("li",{class:"board-display",key:l._id,onClick:c=>s.goToBoard(l._id)},[o("div",{class:"board-bg",style:x({"background-color":l.style.bgColor,"background-image":"url("+l.style.bgImg+")"})},null,4),o("p",null,v(l.title),1)],8,mc))),128))])])])}var pc=g(lc,[["render",hc]]);const gc={name:"recent-boards-popup",props:{user:Object},data(){return{recentBoards:[]}},async created(){await this.$store.dispatch({type:"loadBoards"}),this.recentBoards=JSON.parse(JSON.stringify(this.user.recentBoards)).map(t=>this.getBoard(t))},methods:{getBoard(t){return this.boards.find(i=>i._id===t)},goToBoard(t){this.$router.push(`/board/${t}`)},closePopup(){this.$emit("closePopup")}},computed:{boards(){return this.$store.getters.boards}}},bc={class:"recent-boards-popup"},_c=o("p",null,"Recent Boards",-1),kc=["onClick"];function fc(t,e,i,n,r,s){return a(),d("section",bc,[o("header",null,[_c,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...l)=>s.closePopup&&s.closePopup(...l))})]),o("main",null,[o("ul",null,[(a(!0),d(T,null,M(r.recentBoards,l=>(a(),d("li",{key:l._id,onClick:c=>s.goToBoard(l._id)},[o("div",{class:"board-bg",style:x({"background-color":l.style.bgColor,"background-image":"url("+l.style.bgImg+")"})},null,4),o("p",null,v(l.title),1)],8,kc))),128))])])])}var vc=g(gc,[["render",fc]]);const yc={name:"favorite-boards-popup",props:{user:Object},data(){return{favoriteBoards:[]}},methods:{getBoard(t){return this.boards.find(i=>i._id===t)},goToBoard(t){this.$router.push(`/board/${t}`)},closePopup(){this.$emit("closePopup")}},computed:{boards(){return this.$store.getters.boards},users(){return this.$store.getters.user},favBoards(){return this.user.favorites.map(t=>this.boards.filter(i=>i._id===t))}}},Ac={class:"favorite-boards-popup"},Cc=o("p",null,"Favorite Boards",-1),Tc=["onClick"];function Ic(t,e,i,n,r,s){return a(),d("section",Ac,[o("header",null,[Cc,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=(...l)=>s.closePopup&&s.closePopup(...l))})]),o("main",null,[o("ul",null,[(a(!0),d(T,null,M(s.favBoards.flat(),l=>(a(),d("li",{key:l._id,onClick:c=>s.goToBoard(l._id)},[o("div",{class:"board-bg",style:x({"background-color":l.style.bgColor,"background-image":"url("+l.style.bgImg+")"})},null,4),o("p",null,v(l.title),1)],8,Tc))),128))])])])}var Bc=g(yc,[["render",Ic]]);const wc={name:"more-popup",methods:{openBoards(t){t==="recent"?this.$emit("openRecent"):this.$emit("openStarred"),this.$emit("closeMoreModal")}}},Mc={class:"more-popup"},Ec=o("h4",null,"More",-1),Sc=o("p",null,"Recent Boards",-1),xc=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M16.7071 12.7071L9.63606 19.7781C9.24554 20.1687 8.61237 20.1687 8.22185 19.7781C7.83132 19.3876 7.83132 18.7544 8.22185 18.3639L14.5858 12L8.22185 5.636C7.83132 5.24548 7.83132 4.61231 8.22185 4.22179C8.61237 3.83126 9.24554 3.83126 9.63606 4.22179L16.7071 11.2929C17.0977 11.6834 17.0977 12.3165 16.7071 12.7071Z",fill:"currentColor"})],-1),Lc=[Sc,xc],Uc=o("p",null,"Starred Boards",-1),Dc=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M16.7071 12.7071L9.63606 19.7781C9.24554 20.1687 8.61237 20.1687 8.22185 19.7781C7.83132 19.3876 7.83132 18.7544 8.22185 18.3639L14.5858 12L8.22185 5.636C7.83132 5.24548 7.83132 4.61231 8.22185 4.22179C8.61237 3.83126 9.24554 3.83126 9.63606 4.22179L16.7071 11.2929C17.0977 11.6834 17.0977 12.3165 16.7071 12.7071Z",fill:"currentColor"})],-1),Oc=[Uc,Dc];function Fc(t,e,i,n,r,s){return a(),d("section",Mc,[o("header",null,[Ec,o("span",{class:"icon-cancel",onClick:e[0]||(e[0]=l=>t.$emit("closeMoreModal"))})]),o("main",null,[o("ul",null,[o("li",{onClick:e[1]||(e[1]=l=>s.openBoards("recent"))},Lc),o("li",{onClick:e[2]||(e[2]=l=>s.openBoards("starred"))},Oc)])])])}var Rc=g(wc,[["render",Fc]]);const Nc={created(){},data(){return{search:"",isCreateBoard:!1,isInputFocused:!1,Search:Pe,isUserModal:!1,isBoardSearch:!1,isRecentBoards:!1,isFavoriteBoards:!1,isMoreModal:!1,filterBy:{title:""}}},async created(){await this.$store.dispatch({type:"loadBoards"})},methods:{home(){this.$router.push("/board")},focusInput(){this.$refs.headerInput.focus(),this.isInputFocused=!0,this.toggleBoardSearch()},async logout(){await this.$store.dispatch({type:"logout"}),this.$router.push("/login")},toggleUserModal(){this.isUserModal=!this.isUserModal},toggleBoardSearch(){this.isBoardSearch=!this.isBoardSearch},toggleRecentBoards(){this.isRecentBoards=!this.isRecentBoards},toggleFavoriteBoards(){this.isFavoriteBoards=!this.isFavoriteBoards},toggleMoreModal(){this.isMoreModal=!this.isMoreModal}},computed:{user(){return this.$store.getters.user},isBoard(){return this.$store.getters.currBoard},boards(){return this.$store.getters.boards}},components:{createBoard:ec,Avatar:ye,userModal:ac,boardSearch:pc,recentBoardsPopup:vc,favoriteBoardsPopup:Bc,morePopup:Rc}},Gc={class:"flex"},$c=o("span",{class:"menu-btn"},null,-1),Pc=o("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"trello",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"trello-icon svg-inline--fa fa-trello fa-w-14 logo-img"},[o("path",{fill:"currentColor",d:"M392.3 32H56.1C25.1 32 0 57.1 0 88c-.1 0 0-4 0 336 0 30.9 25.1 56 56 56h336.2c30.8-.2 55.7-25.2 55.7-56V88c.1-30.8-24.8-55.8-55.6-56zM197 371.3c-.2 14.7-12.1 26.6-26.9 26.6H87.4c-14.8.1-26.9-11.8-27-26.6V117.1c0-14.8 12-26.9 26.9-26.9h82.9c14.8 0 26.9 12 26.9 26.9v254.2zm193.1-112c0 14.8-12 26.9-26.9 26.9h-81c-14.8 0-26.9-12-26.9-26.9V117.2c0-14.8 12-26.9 26.8-26.9h81.1c14.8 0 26.9 12 26.9 26.9v142.1z",class:""})],-1),Jc=o("span",{class:"logo"},"Drello",-1),Zc=[Pc,Jc],jc={class:"create-board-container flex align-items"},Qc=o("p",null,"Create",-1),Yc=o("span",{class:"icon-plus"},null,-1),Hc=[Qc,Yc],Vc=o("span",null,"Recent",-1),zc=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),qc=[Vc,zc],Xc=o("span",null,"Starred",-1),Wc=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),Kc=[Xc,Wc],eu=o("span",null,"More",-1),tu=o("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),su=[eu,tu],ou={class:"secondery-container flex align-items"},iu=o("span",{class:"icon icon-bell"},null,-1),ru={class:"user"};function nu(t,e,i,n,r,s){const l=p("createBoard"),c=p("recent-boards-popup"),u=p("more-popup"),h=p("favorite-boards-popup"),C=p("board-search"),_=p("avatar"),B=p("user-modal"),S=L("click-outside");return a(),d("header",{class:A(["main-header flex space-between",{"header-bg-color":s.isBoard}])},[o("div",Gc,[$c,o("section",{class:"header-logo flex align-items",onClick:e[0]||(e[0]=(...f)=>s.home&&s.home(...f))},Zc),o("div",jc,[o("button",{class:A(["create-btn",{"light-btn-bg":s.isBoard}]),onClick:e[1]||(e[1]=f=>r.isCreateBoard=!r.isCreateBoard)},Hc,2)]),r.isCreateBoard?(a(),w(l,{key:0,onCloseCreateModal:e[2]||(e[2]=f=>r.isCreateBoard=!1)})):m("",!0),o("div",{class:"header-btn hidden-btn-header",onClick:e[3]||(e[3]=(...f)=>s.toggleRecentBoards&&s.toggleRecentBoards(...f))},qc),r.isRecentBoards?b((a(),w(c,{key:1,onClosePopup:s.toggleRecentBoards,boards:s.boards,user:s.user,class:"popup"},null,8,["onClosePopup","boards","user"])),[[S,s.toggleRecentBoards]]):m("",!0),o("div",{class:"header-btn hidden-btn-header",onClick:e[4]||(e[4]=(...f)=>s.toggleFavoriteBoards&&s.toggleFavoriteBoards(...f))},Kc),o("div",{class:"header-btn more-btn",onClick:e[5]||(e[5]=(...f)=>s.toggleMoreModal&&s.toggleMoreModal(...f))},su),r.isMoreModal?(a(),w(u,{key:2,onCloseMoreModal:s.toggleMoreModal,onOpenRecent:s.toggleRecentBoards,onOpenStarred:s.toggleFavoriteBoards},null,8,["onCloseMoreModal","onOpenRecent","onOpenStarred"])):m("",!0),r.isFavoriteBoards?b((a(),w(h,{key:3,onClosePopup:s.toggleFavoriteBoards,user:s.user,class:"popup"},null,8,["onClosePopup","user"])),[[S,s.toggleFavoriteBoards]]):m("",!0)]),o("section",ou,[o("div",{class:A(["main-header-input flex",{focused:r.isInputFocused}])},[o("span",{class:"icon-search flex",onClick:e[6]||(e[6]=(...f)=>s.focusInput&&s.focusInput(...f))}),b(o("input",{"onUpdate:modelValue":e[7]||(e[7]=f=>r.filterBy.title=f),onBlur:e[8]||(e[8]=f=>{r.isInputFocused=!1}),ref:"headerInput",placeholder:"Search boards...",onClick:e[9]||(e[9]=(...f)=>s.focusInput&&s.focusInput(...f))},null,544),[[E,r.filterBy.title]]),r.isBoardSearch?b((a(),w(C,{key:0,filterBy:r.filterBy},null,8,["filterBy"])),[[S,s.toggleBoardSearch]]):m("",!0)],2),iu,o("div",ru,[s.user?(a(),w(_,{key:0,onClick:s.toggleUserModal,size:"32",color:"white",name:s.user.fullname,class:"avatar-header"},null,8,["onClick","name"])):m("",!0),r.isUserModal?b((a(),w(B,{key:1,user:s.user,onCloseModal:s.toggleUserModal},null,8,["user","onCloseModal"])),[[S,s.toggleUserModal]]):m("",!0)])])],2)}var au=g(Nc,[["render",nu]]);const lu={name:"app",async created(){R.off("notify activity"),R.on("notify activity",this.notifyActivity);try{await this.$store.dispatch({type:"loadUsers"}),this.miniUser&&R.emit("set-user-socket",this.miniUser._id)}catch(t){console.log(t)}},methods:{getBoardById(t){return this.boards.find(e=>e._id===t)},getMemberById(t){return this.users.find(e=>e._id===t)},notify(t=null,e,i){t?_e({title:e,message:i,dangerouslyUseHTMLString:!0,type:"success"}):_e({title:e,message:i,dangerouslyUseHTMLString:!0,type:"info"})},async notifyActivity(t){console.log("activity",t);let e,i;const n=this.getMemberById(t.byMemberId);let r=this.getBoardById(t.boardId);r||(r=await G.getBoardById(t.boardId)),t.toMemberId?(t.groupId?(e="You've been tagged",i=n.fullname+` just tagged you at task at<a class="notification-link" href=http://localhost:3000/#/board/${t.boardId}> board ${r.title} </a>`):(e="You've been added to a new board !",i=n.fullname+` just added you to a new board <a class="notification-link" href=http://localhost:3000/#/board/${t.boardId}> board ${r.title} </a>`),O.getLoggedinUser()._id===t.toMemberId&&(this.notify(!0,e,i),this.$store.commit({type:"updateActivities",activity:t}))):r.members.find(s=>s._id===this.miniUser._id)&&(e=t.txt,i=n.fullname+" just "+e+` to <a class="notification-link" href=http://localhost:3000/#/board/${t.boardId}> board ${r.title} </a>`,this.notify(null,e,i),this.$store.commit({type:"updateActivities",activity:t}))}},computed:{boards(){return this.$store.getters.boards},users(){return this.$store.getters.getAllUsers},miniUser(){return this.$store.getters.miniUser},currBoardStyle(){var t,e;return(e=(t=this.$store.getters.currBoard)==null?void 0:t.style)==null?void 0:e.bgColor},currBoard(){var t;return(t=this.$store.getters.currBoard)==null?void 0:t.style},boardStlye(){var t,e;return{"background-color":(t=this.currBoard)==null?void 0:t.bgColor,"background-image":"url("+((e=this.currBoard)==null?void 0:e.bgImg)+")"}},isHomePage(){return this.$store.getters.isHomePage}},components:{appHeader:au}};function du(t,e,i,n,r,s){const l=p("app-header"),c=p("router-view");return a(),d("div",{class:"wrapper",style:x(s.boardStlye)},[s.isHomePage?m("",!0):(a(),w(l,{key:0})),k(c)],4)}var cu=g(lu,[["render",du]]),uu={state:{boards:[],currentBoard:null,currentGroup:null,currentTask:null,openLabels:!1},getters:{openLabel({openLabels:t}){return t},boards({boards:t}){return t},boardsToShow({boards:t,filterBy:e}){return JSON.parse(JSON.stringify(t))},currBoard({currentBoard:t}){return t},boardGroups({currentBoard:t}){return t==null?void 0:t.groups},currGroup({currentGroup:t}){return t},currTask({currentTask:t}){return t}},mutations:{toggleLabel(t){t.openLabels=!t.openLabels},setBoards(t,{boards:e}){t.boards=e},saveBoard(t,{board:e}){const i=t.boards.findIndex(n=>n._id===e._id);i!==-1?t.boards.splice(i,1,e):t.boards.push(e)},updateBoard(t,{key:e,val:i}){t.currentBoard[e]=i},removeBoard(t,{boardId:e}){const i=t.boards.findIndex(n=>n._id===e);t.boards.splice(i,1)},setFilter(t,{filterBy:e}){t.filterBy=e},setCurrGroup(t,{group:e}){t.currentGroup=e},setCurrTask(t,{task:e}){t.currentTask=e},setSort(t,{sortBy:e}){t.sortBy=e},setCurrentBoard(t,{board:e}){t.currentBoard=e},addGroup(t,{group:e}){t.currentBoard.groups.push(e)},removeGroup(t,{groupId:e}){const i=t.currentBoard.groups.findIndex(l=>l._id===e),{_id:n,title:r}=t.currentBoard.groups[i];t.currentBoard.groups.splice(i,1);const s=G.addActivity("removed group",O.getLoggedinUser(),{type:"group",_id:n,title:r});t.currentBoard.activities.unshift(s)},setCurrGroups(t,{groups:e}){t.currentBoard.groups=e},setGroup(t,{groupIdx:e,newGroup:i}){t.currentBoard.groups.splice(e,1,i)},setTask(t,{groupId:e,task:i,action:n}){var C,_,B;let r,s;var l=t.currentTask;if(console.log(n),n?s=`Edited ${n.type} in ${i.title}`:s=i._id?`Edited task ${i.title}`:`Added task ${i.title}`,t.currentGroup&&(e=t.currentGroup._id),e?r=t.currentBoard.groups.findIndex(S=>S._id===e):r=t.currentBoard.groups.findIndex(S=>S.tasks.findIndex(f=>f._id===i._id)!==-1),i._id){const S=t.currentBoard.groups[r].tasks.findIndex(f=>f._id===i._id);t.currentBoard.groups[r].tasks.splice(S,1,i)}else i._id=$.makeId(),t.currentBoard.groups[r].tasks.push(i);if((n==null?void 0:n.type)==="members"&&(((C=l==null?void 0:l.members)==null?void 0:C.length)||((_=l==null?void 0:l.members)==null?void 0:_.length)>((B=i==null?void 0:i.members)==null?void 0:B.length)))return;const c=t.currentBoard.groups[r],u=O.getLoggedinUser()._id,h=G.addActivity(s,u,l==null?void 0:l._id,c==null?void 0:c._id,t.currentBoard._id);(n==null?void 0:n.type)==="members"&&(h.toMemberId=n.item._id),t.currentBoard.activities.unshift(h),(!n||n.type==="members")&&R.emit("activity notify",{activity:h,boardMembers:t.currentBoard.members})},removeTask(t,{task:e}){const i=t.currentBoard.groups[e.groupIdx].tasks.findIndex(n=>n._id===e.taskId);t.currentBoard.groups[e.groupIdx].tasks[i],t.currentBoard.groups[e.groupIdx].tasks.splice(i,1)}},actions:{async loadBoards({commit:t,state:e}){try{const i=await G.getBoards(e.filterBy);t({type:"setBoards",boards:i}),R.off("board update"),R.on("board update",n=>{var s;const r=O.getLoggedinUser();n._id===((s=e.currentBoard)==null?void 0:s._id)?t({type:"setCurrentBoard",board:n}):n.members.find(l=>l._id===r._id)&&t({type:"saveBoard",board:n})})}catch(i){console.log(i)}},async saveBoard({getters:t,commit:e},{board:i,activity:n}){i._id||(i.createdBy=t.miniUser,i.members=[t.miniUser]);try{const r=JSON.parse(JSON.stringify(i));e({type:"saveBoard",board:r});const s=await G.saveBoard(i);return R.emit("set board",i),s}catch(r){console.log(r)}},async removeBoard({commit:t},{boardId:e}){try{await G.removeBoard(e),t({type:"removeBoard",boardId:e})}catch(i){console.log(i)}},async setCurrentBoard({commit:t},{boardId:e}){try{const i=await G.getBoardById(e);t({type:"setCurrentBoard",board:i})}catch(i){console.log(i)}},async setBoardPrefs({state:t,commit:e,dispatch:i},{key:n,val:r}){try{if(e({type:"updateBoard",key:n,val:r}),await i({type:"saveBoard",board:t.currentBoard}),n==="members"){const s=O.getLoggedinUser(),l=r[r.length-1],c=G.addActivity("invited you to board",s._id,null,null,t.currentBoard._id);c.toMemberId=l._id,R.emit("activity notify",{activity:c,boardMembers:t.currentBoard.members})}}catch(s){console.log(s)}},async addGroup({state:t,commit:e,dispatch:i},{groupTitle:n}){try{const r=G.getEmptyGroup(n);console.log(r),e({type:"addGroup",group:r}),await i({type:"saveBoard",board:t.currentBoard})}catch(r){console.log(r)}},async setGroups({state:t,commit:e,dispatch:i},{groups:n}){try{e({type:"setCurrGroups",groups:n}),await i({type:"saveBoard",board:t.currentBoard})}catch(r){console.log(r)}},async removeGroup({state:t,commit:e,dispatch:i},{groupId:n}){try{e({type:"removeGroup",groupId:n}),await i({type:"saveBoard",board:t.currentBoard})}catch(r){console.log(r)}},async setGroup({state:t,commit:e,dispatch:i},{groupIdx:n,newGroup:r}){try{e({type:"setGroup",groupIdx:n,newGroup:r}),await i({type:"saveBoard",board:t.currentBoard})}catch(s){console.log(s)}},async setTask({commit:t,state:e,dispatch:i},{groupId:n,task:r,action:s}){try{t({type:"setTask",groupId:n,task:r,action:s}),await i({type:"saveBoard",board:e.currentBoard})}catch(l){console.log(l)}},async removeTask({commit:t,state:e,dispatch:i},{task:n}){try{const r=e.currentBoard.groups.findIndex(s=>s._id===n.groupId);t({type:"removeTask",task:{groupIdx:r,taskId:n.taskId}}),await i({type:"saveBoard",board:e.currentBoard})}catch(r){console.log(r)}}}},mu={state:{loggedinUser:O.getLoggedinUser(),allUsers:[]},getters:{user(t){return t.loggedinUser},getAllUsers(t){return t.allUsers},miniUser({loggedinUser:t}){return t?{_id:t._id,fullname:t.fullname,username:t.username,imgUrl:t.imgUrl}:void 0}},mutations:{setLoggedinUser(t,{user:e}){e?R.emit("set-user-socket",e._id):R.emit("unset-user-socket"),t.loggedinUser=e},setUsers(t,{users:e}){t.allUsers=e},addRecentBoard(t,{boardId:e}){const i=O.addRecentBoard(e);t.loggedinUser=i},setUser(t,{user:e}){t.loggedinUser=e},updateActivities(t,{activity:e}){t.loggedinUser.activities.unshift(e),O.saveLocalUser(t.loggedinUser)},toggleActivity(t,{activityId:e}){const i=t.loggedinUser.activities.findIndex(n=>n._id===e);t.loggedinUser.activities[i].isReaden=!t.loggedinUser.activities[i].isReaden,O.saveLocalUser(t.loggedinUser)}},actions:{async loadUsers({commit:t,state:e}){try{const i=await O.getUsers();t({type:"setUsers",users:i})}catch(i){throw console.log(i),i}},async login({commit:t},{cred:e}){try{const i=await O.login(e);t({type:"setLoggedinUser",user:i})}catch(i){throw console.log(i),i}},async signup({commit:t},{cred:e}){try{const i=await O.signup(e);t({type:"setLoggedinUser",user:i})}catch(i){throw console.log(i),i}},async logout({commit:t}){try{await O.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log(e),e}},async updateUser({commit:t},{user:e}){try{await O.update(e),t({type:"setUser",user:e})}catch(i){throw console.log(i),i}},async toggleActivity({commit:t,dispatch:e,state:i},{activityId:n}){try{t({type:"toggleActivity",activityId:n}),await e({type:"updateUser",user:i.loggedinUser})}catch(r){throw r}}}};const hu=Je({strict:!0,state:{isHomePage:!1},getters:{isHomePage({isHomePage:t}){return t}},mutations:{setHomePage(t,{isHome:e}){t.isHomePage=e}},actions:{},modules:{boardStore:uu,userStore:mu}});const pu={mounted:t=>{t.focus()}},J=Ze(cu).component("avatar",ye);J.directive("focus",pu);const gu={clientId:"259143911327-0c53jftjilthpbel1ctuab58cef805bk.apps.googleusercontent.com",prompt:"consent"};J.use(je,gu);J.use(Qe);J.use(Be);J.use(hu);J.use(Ye);J.use(He);J.use(Ve,{load:{key:"AIzaSyDxg1BG-_6y4c06PrVYvHH76q51dKWkOGs"}});J.mount("#app");
